<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Zhi Mang Xing:300,300italic,400,400italic,700,700italic|Ma Shan Zheng:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@200..900&family=Permanent+Marker&family=Satisfy&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xidianswq.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#e6c35c","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="目录">
<meta property="og:type" content="article">
<meta property="og:title" content="FPGA学习笔记(30)——嵌入式Linux_Petalinux一">
<meta property="og:url" content="https://xidianswq.github.io/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/index.html">
<meta property="og:site_name" content="Switch">
<meta property="og:description" content="目录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/02634e9c629de10763b97adf4cbd4ee5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/7214388928d08a58386aaf640745d802.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/71d3ee33ee6a727e48d723243b0e893a.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f3df9f9690aa123582d4a68ed4dced51.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/68fe6694ea97c256c66129782272be07.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/659079b3f0270a474f4242ced2ac97b8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/00f3abd28725993d07f8ef21603c139b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/41be0b13c8944f0eb38505481be59e1d.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/fbd6bdbe41a447d061533a88e8bad8a9.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9f4287d5b2c5f05a44d171346851eac3.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2692d111454983b13f1ffa3594f56311.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/08e512168278cfd6995aa5bcc935df18.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/4e2c1939bb02498a21be1dc76171241a.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a83dff710bfdce1cc89fd50c9b6dbfa8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b0f9a188e5df166fb919bd2fe2140b59.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5b1497c082712b5d5d6eeee59e31bfed.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/612b60cb984a3d8cdfd6721695f4de26.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/739a10b29b1a3f63cacb77f6a26d8cba.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/250ec972a312abf03c984011b05c5a97.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/cd7ba58cf04b6494b487a1ca6ac860e4.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/3399fe22dabcc8eaa76210724169701f.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/87556f5dc05d0572c4cca94feb61c9f1.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/cf586be08fbacafa3baab0d324db1191.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/dd81a7ed1a3fb7ed7810ece777525c84.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a0d6802881da29584983e23d05d264c0.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5c470de2e4f70cee868c21189f201842.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f42ccb5a43617856eaa2539ffecdf6cd.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5bab0f3bbb3cedfb9db39f0ebb9722b0.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/84819ba0e2bd27d842fded323f1ab75c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f484804a452873f0fe3ee8feca88b623.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/e9aa6374c3a77fca52b1d9d384269193.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8afd8a1d3ce98b0b1b82e824a6d6de0c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b11e58ae1db75c75fd7ad406c31468e5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d3125a80ec08f73e61b9b25c76bf4639.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ba3bcfc72b47d681b7789eff23bc5737.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/42da38677d629d0ddd576397d6829da6.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6cb68099ed50588483a706cd2d4037fc.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/74a3e0bd0b3903e51125cc56adb311cd.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f1213533746cf2f88aa42270ade1e6f7.png">
<meta property="article:published_time" content="2023-10-01T11:39:59.000Z">
<meta property="article:modified_time" content="2025-02-15T04:28:55.629Z">
<meta property="article:author" content="SWQ">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="fpga开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i-blog.csdnimg.cn/blog_migrate/02634e9c629de10763b97adf4cbd4ee5.png">

<link rel="canonical" href="https://xidianswq.github.io/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>FPGA学习笔记(30)——嵌入式Linux_Petalinux一 | Switch</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/rss2.xml" title="Switch" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Switch</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Welcome to My Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">46</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">216</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xidianswq.github.io/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="SWQ">
      <meta itemprop="description" content="舟遥遥以轻扬，风飘飘而吹衣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Switch">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          FPGA学习笔记(30)——嵌入式Linux_Petalinux一
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar" color=f6416c></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-01 19:39:59" itemprop="dateCreated datePublished" datetime="2023-10-01T19:39:59+08:00">2023-10-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          
            <span id="/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/" class="post-meta-item leancloud_visitors" data-flag-title="FPGA学习笔记(30)——嵌入式Linux_Petalinux一" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(30)%E2%80%94%E2%80%94%E5%B5%8C%E5%85%A5%E5%BC%8FLinux_Petalinux%E4%B8%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>23k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>21 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>目录</strong></p>
<p><a href="about:blank#%E4%B8%80.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">一.开发环境搭建</a></p>
<p><a href="about:blank#1.Ubuntu%20%E5%92%8C%20Windows%20%E6%96%87%E4%BB%B6%E4%BA%92%E4%BC%A0">1.Ubuntu 和 Windows
文件互传</a></p>
<p><a href="about:blank#1%E3%80%81%E5%BC%80%E5%90%AF%20Ubuntu%20%E4%B8%8B%E7%9A%84%20FTP%20%E6%9C%8D%E5%8A%A1">1、开启 Ubuntu 下的 FTP
服务</a></p>
<p><a href="about:blank#2%E3%80%81Windows%20%E4%B8%8B%20FTP%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E8%A3%85">2、Windows 下 FTP
客户端安装</a></p>
<p><a href="about:blank#2.Ubuntu%20%E5%92%8C%20Windows%20%E6%96%87%E4%BB%B6%E6%9C%AC%E5%9C%B0%E5%85%B1%E4%BA%AB">2.Ubuntu 和 Windows
文件本地共享</a></p>
<p><a href="about:blank#3.Ubuntu%20%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%20tftp%20%E6%9C%8D%E5%8A%A1%E5%99%A8">3.Ubuntu 系统搭建 tftp
服务器</a></p>
<p><a href="about:blank#4.Ubuntu%20%E4%B8%8B%20NFS%20%E5%92%8C%20SSH%20%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF">4.Ubuntu 下 NFS 和 SSH
服务开启</a></p>
<p><a href="about:blank#5.Source%20Insight%20%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">5.Source Insight
软件安装和使用</a></p>
<p><a href="about:blank#6.Visual%20Studio%20Code%20%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">6.Visual Studio Code
软件的安装和使用</a></p>
<p><a href="about:blank#7.SecureCRT%20%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">7.SecureCRT
软件安装和使用</a></p>
<p><a href="about:blank#8.Putty%20%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">8.Putty
软件的安装和使用</a></p>
<p><a href="about:blank#%E4%BA%8C.Petalinux%20%E7%9A%84%E5%AE%89%E8%A3%85">二.Petalinux
的安装</a></p>
<p><a href="about:blank#1.Petalinux%20%E7%AE%80%E4%BB%8B">1.Petalinux 简介</a></p>
<p><a href="about:blank#2.%E5%AE%89%E8%A3%85%C2%A0Petalinux">2.安装 Petalinux</a></p>
<p><a href="about:blank#1%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%BA%93%E4%BB%A5%E5%8F%8A%E8%BD%AF%E4%BB%B6">1、安装依赖库以及软件</a></p>
<p><a href="about:blank#2%E3%80%81%E4%BF%AE%E6%94%B9%20bash">2、修改 bash</a></p>
<p><a href="about:blank#3%E3%80%81%E5%AE%89%E8%A3%85%20Petalinux">3、安装 Petalinux</a></p>
<p><a href="about:blank#4%E3%80%81%E8%AE%BE%E7%BD%AE%20Petalinux%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">4、设置 Petalinux
环境变量</a></p>
<p><a href="about:blank#5%E3%80%81Linux%20%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%20JTAG%20cable%20%E9%A9%B1%E5%8A%A8">5、Linux 系统安装 JTAG cable
驱动</a></p>
<p><a href="about:blank#%E4%B8%89.Petalinux%20%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B%E5%AE%9E%E6%88%98">三.Petalinux
设计流程实战</a></p>
<p><a href="about:blank#1.Zynq%20UltraScale%2B%20MPSoC%20%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E6%A0%88%E6%A6%82%E8%BF%B0">1.Zynq UltraScale+ MPSoC
嵌入式软件栈概述</a></p>
<p><a href="about:blank#1%E3%80%81FSBL">1、FSBL</a></p>
<p><a href="about:blank#2%E3%80%81Platform%20Management%20Unit%20%28PMU%29%20Firmware">2、Platform Management Unit (PMU)
Firmware</a></p>
<p><a href="about:blank#3%E3%80%81ARM%20Trusted%20Firmware">3、ARM Trusted Firmware</a></p>
<p><a href="about:blank#4%E3%80%81U-Boot">4、U-Boot</a></p>
<p><a href="about:blank#5%E3%80%81Hypervisor%20%28Optional%EF%BC%8C%E5%8F%AF%E9%80%89%29">5、Hypervisor
(Optional，可选)</a></p>
<p><a href="about:blank#6%E3%80%81Linux">6、Linux</a></p>
<p><a href="about:blank#2.%E4%BD%BF%E7%94%A8%20Petalinux%20%E5%AE%9A%E5%88%B6%20Linux%20%E7%B3%BB%E7%BB%9F">2.使用 Petalinux 定制 Linux
系统</a></p>
<p><a href="about:blank#1%E3%80%81%E5%88%9B%E5%BB%BA%20Vivado%20%E7%A1%AC%E4%BB%B6%E5%B9%B3%E5%8F%B0">1、创建 Vivado
硬件平台</a></p>
<p><a href="about:blank#2%E3%80%81%E8%AE%BE%E7%BD%AE%20Petalinux%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">2、设置 Petalinux
环境变量</a></p>
<p><a href="about:blank#3%E3%80%81%E5%88%9B%E5%BB%BA%20petalinux%20%E5%B7%A5%E7%A8%8B">3、创建 petalinux
工程</a></p>
<p><a href="about:blank#4%E3%80%81%E9%85%8D%E7%BD%AE%20petalinux%20%E5%B7%A5%E7%A8%8B">4、配置 petalinux
工程</a></p>
<p><a href="about:blank#5%E3%80%81%E9%85%8D%E7%BD%AE%20Linux%20%E5%86%85%E6%A0%B8">5、配置 Linux
内核</a></p>
<p><a href="about:blank#6%E3%80%81%E9%85%8D%E7%BD%AE%20Linux%20%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">6、配置 Linux
根文件系统</a></p>
<p><a href="about:blank#7%E3%80%81%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%A4%87%E6%A0%91%E6%96%87%E4%BB%B6">7、配置设备树文件</a></p>
<p><a href="about:blank#8%E3%80%81%E7%BC%96%E8%AF%91%20Petalinux%20%E5%B7%A5%E7%A8%8B">8、编译 Petalinux
工程</a></p>
<p><a href="about:blank#9%E3%80%81%E5%88%B6%E4%BD%9C%20BOOT.BIN%20%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6">9、制作 BOOT.BIN
启动文件</a></p>
<p><a href="about:blank#10%E3%80%81%E5%88%B6%E4%BD%9C%20SD%20%E5%90%AF%E5%8A%A8%E5%8D%A1">10、制作 SD
启动卡</a></p>
<p><a href="about:blank#11%E3%80%81%E5%BC%80%E5%8F%91%E6%9D%BF%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE">11、开发板启动模式设置</a></p>
<hr>
<p>前置学习：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/133484963" title="Linux系统——OS学习笔记＜1＞">Linux系统——OS学习笔记＜1＞</a></p>
<p>参考资料：正点原子《DFZU2EG_4EV MPSoC 之 Linux 驱动开发指南》</p>
<pre><code>     “PetaLinux 工具提供在 Xilinx 处理系统上定制、构建和调配嵌入式 Linux 解决方案所需的所有组件。该解决方案旨在提升设计生产力，可与 Xilinx 硬件设计工具配合使用，以简化针对 Versal、Zynq UltraScale MPSoC、Zynq 7000 SoC 和 MicroBlaze 的 Linux 系统开发。”
</code></pre>
<h2 id="一-开发环境搭建"><a href="#一-开发环境搭建" class="headerlink" title="一.开发环境搭建"></a>一.开发环境搭建</h2><pre><code>    要进行 ZYNQ MPSoC 开发肯定要先搭建好开发环境，我们在开始学习 STM32 的时候肯  
</code></pre>
<p>定需要安装一堆的软件，比如 MDK、IAR、串口调试助手等等，这个就是 STM32 的开发环境<br>搭建。同样的，要想在 Ubuntu 下进行 ZYNQ MPSoC 开发也需要安装一些软件，也就是网上<br>说的开发环境搭建，环境搭建好以后我们就可以进行开发了。环境搭建分为 Ubuntu 和 Windows，<br>因为我们最熟悉 Windows，所以代码编写、查找资料啥的肯定是在 Windows 下进行的。但是<br>Linux 开发又必须在 Ubuntu 下进行，所以还需要搭建 Ubuntu 下的开发环境。本章我们就分为<br>Ubuntu 和 Windows，讲解这两种操作系统下的环境搭建。</p>
<h3 id="1-Ubuntu-和-Windows-文件互传"><a href="#1-Ubuntu-和-Windows-文件互传" class="headerlink" title="1.Ubuntu 和 Windows 文件互传"></a>1.Ubuntu 和 Windows 文件互传</h3><p>Windows 和 Ubuntu 下的文件互传我们需要使用 FTP 服务，设置方法如下：</p>
<h4 id="1、开启-Ubuntu-下的-FTP-服务"><a href="#1、开启-Ubuntu-下的-FTP-服务" class="headerlink" title="1、开启 Ubuntu 下的 FTP 服务"></a>1、开启 Ubuntu 下的 FTP 服务</h4><p>打开 Ubuntu 的终端窗口，然后执行如下命令来安装 FTP 服务：</p>
<p>​<br>​    sudo apt-get install vsftpd</p>
<p>等待软件自动安装，安装完成以后使用如下 VI 命令打开&#x2F;etc&#x2F;vsftpd.conf，命令如下：</p>
<p>​<br>​    sudo vi &#x2F;etc&#x2F;vsftpd.conf</p>
<p>打开以后 vsftpd.conf 文件以后找到如下两行：</p>
<p>​<br>​    local_enable&#x3D;YES 
​    write_enable&#x3D;YES</p>
<p>确保上面两行前面没有“#”，有的话就取消掉</p>
<h4 id="2、Windows-下-FTP-客户端安装"><a href="#2、Windows-下-FTP-客户端安装" class="headerlink" title="2、Windows 下 FTP 客户端安装"></a>2、Windows 下 FTP 客户端安装</h4><pre><code>    Windows 下 FTP 客户端我们使用 FileZilla。打开站点管理器，点击：文件-&gt;站点管理器。点击“新站点(N)”按钮来创建站点，新建站点以后就会在“我的站点”下出现新建的这个站点，站点的名称可以自行修改，比如我将新的站点命名为“Ubuntu”。选中新创建的“Ubuntu”站点，然后对站点的“常规”进行设置：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/02634e9c629de10763b97adf4cbd4ee5.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/7214388928d08a58386aaf640745d802.png"></p>
<pre><code>    如果要将 Windows 下的文件或文件夹拷贝到 Ubuntu 中，只需要在左侧的 Windows 区域选中要拷贝的文件或者文件夹，然后**直接拖到右侧** 的 Ubuntu 中指定的目录即可。 将 Ubuntu 中的文件或者文件夹拷贝到 Windows 中也是**直接拖放** 。
</code></pre>
<h3 id="2-Ubuntu-和-Windows-文件本地共享"><a href="#2-Ubuntu-和-Windows-文件本地共享" class="headerlink" title="2.Ubuntu 和 Windows 文件本地共享"></a>2.Ubuntu 和 Windows 文件本地共享</h3><pre><code>    Ubuntu 和 Windows 文件互传可以使用本地共享的方式。这种共享的方式极大的免除了不同系统文件 之间的文件复制和磁盘空间的双重占用。下面笔者将介绍如何使用 Vmware 虚拟机来实现 Ubuntu 和 Windows 文件之间的共享。

    在 Vmware 的菜单栏中，选择“设置(S)”，在弹出的菜单中，选择“选项”，在该界面中，单击“共享文件夹”，在右边界面中选择 “总是启用(E)”，添加共享的文件夹，默认勾选“启用此共享”。

    该文件夹在 Ubuntu 系统中对应的是**/mnt/hgfs/share/目录** ，我们在终端中输入命令：
</code></pre>
<p>​<br>​    ll &#x2F;mnt&#x2F;hgfs&#x2F;share&#x2F;</p>
<p>可以看到该文件夹为空。如果需要从 Ubuntu 系统向 Windows 传递文件，可 以用 cp 命令或 mv 命令文件到该目录。</p>
<h3 id="3-Ubuntu-系统搭建-tftp-服务器"><a href="#3-Ubuntu-系统搭建-tftp-服务器" class="headerlink" title="3.Ubuntu 系统搭建 tftp 服务器"></a>3.Ubuntu 系统搭建 tftp 服务器</h3><pre><code>    TFTP 作为一种**简单的文件传输协议** ，在嵌入式开发中会经常使用到，而且后面我们在**安装 Petalinux 工具时也会提示需要 tftp 服务** ，所以我们需要**在 Ubuntu 上搭建 TFTP 服务器** 。需要**安装 tftp-hpa（客户端软件包，如果不用可不装）和 tftpd-hpa 软件包** ，命令如下：
</code></pre>
<p>​<br>​    sudo apt install tftp-hpa tftpd-hpa
​<br>​        TFTP 需要一个文件夹来存放文件，我们在根目录下新建一个&#x2F;tftpboot 目录做为 TFTP 文 件存储目录，之所以使用该目录是因为后面使用的 Petalinux 工具默认使用该目录，省得我们 每次建 Petalinux 工程的时候手动修改。创建&#x2F;tftpboot 目录命令如下：</p>
<p>​<br>​    sudo mkdir -p &#x2F;tftpboot 
​    sudo chmod 777 &#x2F;tftpboot
​<br>​        这样笔者就在电脑上创建了一个名为 tftpboot 的目录(文件夹)，路径为&#x2F;tftpboot。需要注意 的是我们要<strong>给 tftpboot 文件夹权限，否则的话后面在使用过程中会遇到问题，所以使用了 chmod 777 命令</strong> 。 最后配置 tftp。打开&#x2F;etc&#x2F;default&#x2F;tftpd-hpa 文件，将其内容修改如下：</p>
<p>​<br>​    # &#x2F;etc&#x2F;default&#x2F;tftpd-hp
​<br>​    TFTP_USERNAME&#x3D;”tftp”<br>​    TFTP_DIRECTORY&#x3D;”&#x2F;tftpbo
​    TFTP_ADDRESS&#x3D;”:69”<br>​    TFTP_OPTIONS&#x3D;”-l -c -s”</p>
<p>最后输入如下命令，重启 tftp 服务器：</p>
<p>​<br>​    sudo service tftpd-hpa restart</p>
<h3 id="4-Ubuntu-下-NFS-和-SSH-服务开启"><a href="#4-Ubuntu-下-NFS-和-SSH-服务开启" class="headerlink" title="4.Ubuntu 下 NFS 和 SSH 服务开启"></a>4.Ubuntu 下 NFS 和 SSH 服务开启</h3><pre><code>    后面进行 **Linux 驱动开发** 的时候**需要 NFS 启动** ，因此要先安装并开启 Ubuntu 中的 NFS 服务，使用如下命令安装 NFS 服务：
</code></pre>
<p>​<br>​    sudo apt install nfs-kernel-server</p>
<p>等待安装完成。安装完成以后在<strong>用户根目录</strong> 下创建一个名为“workspace&#x2F;nfs”的文件夹， 命令如下：</p>
<p>​<br>​    cd
​    mkdir -p workspace&#x2F;nfs
​    cd workspace&#x2F;nfs
​    pwd</p>
<p>以后所有需要使用 nfs 的东西都放到这个“nfs”文件夹里面。</p>
<pre><code>    上面创建的 nfs 文件夹供 nfs 服务器使用，以后我们可以在开发板上**通过网络文件系统来访问 nfs 文件夹** 。

    使用前需要先**配置 nfs** 。NFS 允许挂载的目录及权限**在文件/etc/exports 中进行定义** ，使用 如下命令打开 nfs 配置文件/etc/exports，打开/etc/exports 以后在后面添加如下所示内容：
</code></pre>
<p>​<br>​    &#x2F;home&#x2F;&lt;用户名&gt;&#x2F;workspace&#x2F;nfs *(rw,sync,no_root_squash)</p>
<pre><code>    * 代表允许所有的网络段访问，rw 是可读写权限，sync 是文件同步写入存储器，no_root_squash 是 nfs 客户端分享目录使用者的权限。如果客户端使用的是 root 用户，那么对于该共享目录而 言，该客户端就具有 root 权限。
</code></pre>
<p>重启 NFS 服务，使用如下命令：</p>
<p>​<br>​    sudo systemctl start nfs-kernel-server.service</p>
<p>此时可以运行以下命令来显示共享的目录：</p>
<p>​<br>​    showmount -e</p>
<p>在 nfs 运行的过程中，修改了&#x2F;etc&#x2F;exports 配置文件，可以使用 exportfs 命令使改动生效， 具体命令：</p>
<p>​<br>​    sudo exportfs -rv
​<br>​        开启 Ubuntu 的 SSH 服务以后我们就可以在 Windwos 下使用终端软件登陆到 Ubuntu，比 如使用 SecureCRT，<strong>Ubuntu 下使用如下命令开启 SSH 服务</strong> ：</p>
<p>​<br>​    sudo apt install openssh-server</p>
<p>上述命令安装 ssh 服务，ssh 的配置文件为&#x2F;etc&#x2F;ssh&#x2F;sshd_config，使用默认配置即可。</p>
<h3 id="5-Source-Insight-软件安装和使用"><a href="#5-Source-Insight-软件安装和使用" class="headerlink" title="5.Source Insight 软件安装和使用"></a>5.Source Insight 软件安装和使用</h3><pre><code>    Source Insight 是一款功能强大的代码编辑、阅读工具，工作在 Windows 下，我们可以用 Source Insight 来进行代码编写和阅读，编写完成以后将代码拷贝到 Ubuntu 中去编译即可。
</code></pre>
<h3 id="6-Visual-Studio-Code-软件的安装和使用"><a href="#6-Visual-Studio-Code-软件的安装和使用" class="headerlink" title="6.Visual Studio Code 软件的安装和使用"></a>6.Visual Studio Code 软件的安装和使用</h3><pre><code>    Visual Stuio Code 和 Source Insight 一样，都是编辑器，Visual Studio Sode 本教程以后就简 称为 VSCode，VSCode 是微软出的一款编辑器，但是免费的。VSCode 有 Windows、Linux 和 macOS三个版本的，是一个跨平台的编辑器。
</code></pre>
<p>我们需要按照的插件有下面几个：</p>
<p>1)、C&#x2F;C++。</p>
<p>2)、C&#x2F;C++ Snippets，即 C&#x2F;C++重用代码块。</p>
<p>3)、C&#x2F;C++ Advanced Lint,即 C&#x2F;C++静态检测。</p>
<p>4)、Code Runner，即代码运行。</p>
<p>5)、Include AutoComplete，即自动头文件包含。</p>
<p>6)、Rainbow Brackets，彩虹花括号，有助于阅读代码。</p>
<p>7)、One Dark Pro，VSCode 的主题。</p>
<p>8)、GBKtoUTF8，将 GBK 转换为 UTF8。</p>
<p>9)、ARM，即支持 ARM 汇编语法高亮显示。</p>
<p>10)、Chinese(Simplified)，即中文环境。</p>
<p>11)、vscode-icons，VSCode 图标插件，主要是资源管理器下各个文件夹的图标。</p>
<p>12)、compareit，比较插件，可以用于比较两个文件的差异。</p>
<p>13)、DeviceTree，设备树语法插件。</p>
<pre><code>    新建文件后，按下“Ctrl+Shift+P”打开搜索框，然后**输入“Edit configurations”， 选择“C/C++:Edit configurations…”。C/C++的配置文件是个 json 文件** ，json 中的变量“includePath”用于指定工程中的头文件路径，但是“stdio.h” 是 C 语言库文件，而**VSCode 只是个编辑器，没有编译器** ，所以肯定是没有 stdio.h 的，除非 我们自行安装一个编译器，比如 CygWin，然后**在 includePath 中添加编译器的头文件** 。这里我 们就不添加了，因为我们不会使用 VSCode 来编译程序，这里主要知道如何指定头文件路径就 可以了，后面有实际需要的时候再来讲。
</code></pre>
<h3 id="7-SecureCRT-软件安装和使用"><a href="#7-SecureCRT-软件安装和使用" class="headerlink" title="7.SecureCRT 软件安装和使用"></a>7.SecureCRT 软件安装和使用</h3><pre><code>    在后续的开发过程中我们需要在Windows下使用串口终端，用来查看信息以及进行操作。 常用的串口终端有 SecureCRT、Putty 和 MobaXterm。

    SecureCRT 功能很强大，支持 SSH，可以用来远程登陆；支持串口，可以用来作为 Linux 开发板的串口终端。我们用的最多的就是将 **SecureCRT 作为串口终端来使用** 。

    我们以串口连接为例讲解如何使用 SecureCRT，我们需要准备好一个能进行**串口通信** 的设 备，我们的 DFZU2EG_4EV MPSoC 开发板就可以。DFZU2EG_4EV MPSoC 开发板出厂已经 烧写了 Linux 系统，Linux 系统在运行的过程中会通过串口输出信息，**通过串口可以实现 Linux 命令行交互操作** ，就和 Ubuntu 里面的终端一样，使用方法如下：
</code></pre>
<p>打开 SecureCRT，然 后点击 File-&gt;Quick Connect…，按照下图所示进行设置：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/71d3ee33ee6a727e48d723243b0e893a.png"></p>
<pre><code>    左侧是会话列表，保存着历史会话，会显示出所有曾经连接的串口，这个在关闭 SecureCRT 以后会被保存起来，下次重新打开 SecureCRT 就可以直接使用这个串口会话连接进行快速连接。比如我们关闭 SecureCRT，在关闭 SecureCRT 之前要先关闭所有的会话(串口)，重新打开 SecureCRT。上图中重新打开的 SecureCRT 保存这上次关闭之前建立的会话(串口)“serial-com8”，通 过双击“serial-com8”可以重新连接会话(串口)，不需要再使用快速连接对话框进行连接设置。 开发板默认出厂烧写了 Linux 系统，所以如果连接上 SecureCRT 以后会将串口作为终端， 会输出 Linux 系统启动信息，并且可以通过 SecureCRT 来操作开发板中的 Linux 系统，此时 SecureCRT 就是开发板的终端，和 Ubuntu 中的终端一样。
</code></pre>
<p><strong>关于：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/451782049" title="SecureCRT
中如何配置颜色">SecureCRT 中如何配置颜色</a></strong></p>
<h3 id="8-Putty-软件的安装和使用"><a href="#8-Putty-软件的安装和使用" class="headerlink" title="8.Putty 软件的安装和使用"></a>8.Putty 软件的安装和使用</h3><pre><code>    Putty 和 SecureCRT 是类似的软件，都是用来作为 SSH 或者串口终端的，区别在于 SecureCRT 是付费软件，而 Putty 是免费的。虽然 Putty 没有 SecureCRT 功能强大，但是 Putty 用来作为嵌入式 Linux 的串口终端是绰绰有余的，而且**在 Ubuntu 下安装 Putty 十分方便** ，只需 一条命令即可：
</code></pre>
<p>​<br>​    sudo apt install putty</p>
<pre><code>    使用 USB 线将开发板串口和电脑连接起来，打开 Putty 软件，打开以后是配置界面，如下 图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f3df9f9690aa123582d4a68ed4dced51.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/68fe6694ea97c256c66129782272be07.png"></p>
<h2 id="二-Petalinux-的安装"><a href="#二-Petalinux-的安装" class="headerlink" title="二.Petalinux 的安装"></a>二.Petalinux 的安装</h2><pre><code>    安装 Petalinux 开发工具在 Ubuntu 操作系统中，在虚拟机中安装了 Ubuntu 18.04 64 位操作系统，这也是官方推荐的版本。
</code></pre>
<h3 id="1-Petalinux-简介"><a href="#1-Petalinux-简介" class="headerlink" title="1.Petalinux 简介"></a>1.Petalinux 简介</h3><pre><code>    Petalinux 工具是 Xilinx 公司推出的嵌入式 Linux 开发套件，包括了 **u-boot、Linux Kernel、 device-tree、rootfs 等源码和库** ，以及 **Yocto recipes** ，可以让客户很方便的生成、配置、编译及 自定义 Linux 系统。Petalinux 支持 Versal 、Zynq UltraScale+ MPSoC、Zynq-7000 SoC 以及 MicroBlaze，可与 Xilinx 硬件设计工具 Vivado 协同工作，大大简化了 Linux 系统的开发工作。
</code></pre>
<p>官方网站：[PetaLinux 工具 (xilinx.com)](<a target="_blank" rel="noopener" href="https://china.xilinx.com/products/design-">https://china.xilinx.com/products/design-</a>
tools&#x2F;embedded-software&#x2F;petalinux-sdk.html “PetaLinux 工具 (xilinx.com)“)</p>
<p>下载途径：[下载
(xilinx.com)](<a target="_blank" rel="noopener" href="https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/embedded-">https://china.xilinx.com/support/download/index.html/content/xilinx/zh/downloadNav/embedded-</a>
design-tools&#x2F;2023-1.html “下载 (xilinx.com)“)</p>
<p><strong>注意 Petalinux 的版本 要求与 Vivado 的版本一致</strong></p>
<h3 id="2-安装-Petalinux"><a href="#2-安装-Petalinux" class="headerlink" title="2.安装 Petalinux"></a>2.安装 Petalinux</h3><pre><code>    首先将 petalinux 安装包文件 petalinux-v2019.2-final-installer.run 拷贝到 share 共享目录，，在 Ubuntu 系统中，打开终端，切换到 /mnt/hgfs/share/目录，可以看到 petalinux 的安装文件 petalinux-v2019.2-final-installer.run 已在该目录，可直接访问。
</code></pre>
<h4 id="1、安装依赖库以及软件"><a href="#1、安装依赖库以及软件" class="headerlink" title="1、安装依赖库以及软件"></a>1、安装依赖库以及软件</h4><pre><code>    Xilinx 提供了安装脚本 plnx-env-setup.sh。将下载后的脚本拷贝到 Ubuntu 虚拟机中，打开 Ubuntu Terminal 终端执行输入如下命令以 执行此脚本：
</code></pre>
<p>​<br>​    sudo .&#x2F;plnx-env-setup.sh</p>
<p>如果上面的命令不行，可以使用下面的方式替代，对与 Ubuntu 而言，两种方式是等效的。</p>
<p>​<br>​    sudo apt install iproute2 gawk python3 python build-essential gcc git make net-tools libncurses5-dev tftpd zlib1g-dev libssl-dev flex bison libselinux1 gnupg wget git-core diffstat chrpath socat xterm autoconf libtool tar unzip texinfo zlib1g-dev gcc-multilib automake zlib1g:i386 screen pax gzip cpio python3-pip python3-pexpect xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev pylint3</p>
<h4 id="2、修改-bash"><a href="#2、修改-bash" class="headerlink" title="2、修改 bash"></a>2、修改 bash</h4><pre><code>    Petalinux 工具需要主机系统的/bin/sh 是 bash，而 Ubuntu 默认的/bin/sh 是 dash，所以这里 需要进行更改，运行 sudo dpkg-reconfigure dash 命令，如下：
</code></pre>
<p>​<br>​    sudo dpkg-reconfigure dash</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/659079b3f0270a474f4242ced2ac97b8.png"></p>
<p>**选择“No”按下回车即可。  **</p>
<h4 id="3、安装-Petalinux"><a href="#3、安装-Petalinux" class="headerlink" title="3、安装 Petalinux"></a>3、安装 Petalinux</h4><pre><code>    安装 Petalinux 就要考虑安装位置了，对于 Petalinux 这种体积庞大的工具，我们将其放在 /opt 目录下。在/opt 目录下新建专门存放 Petalinux 的文件夹，如/opt/pkg/petalinux/2019.2，在 终端输入以下命令即可：
</code></pre>
<p>​<br>​    sudo chown -R $USER:$USER &#x2F;opt
​    mkdir -p &#x2F;opt&#x2F;pkg&#x2F;petalinux&#x2F;2023.1
​<br>​        <strong>chown命令将&#x2F;opt 目录的属主和属组更改为当前的用户名</strong> ，如笔者的 Ubuntu 用户名为 cx， 执行的 chown 命令就相当于“sudo chown -R cx:cx &#x2F;opt”，然后通过 mkdir 创建安装目录。现在我们将 petalinux 安装在&#x2F;opt&#x2F;pkg&#x2F;petalinux&#x2F;2023.1 目录下，在终端中输入如下命令：</p>
<p>​<br>​    .&#x2F;petalinux-v2023.1-05012318-installer.run -d &#x2F;opt&#x2F;pkg&#x2F;petalinux&#x2F;2023.1</p>
<p>运行上述命令后，需要等待一段时间，当出现“Press Enter to display the license agreements”
字样的时候，从显示的意思可以知道，让我们按下回车键显示软件许可协议，按下键盘上的回车键
Enter，这些内容如果你感兴趣可以看看，此处我们就不详细看了，直接按下键盘上的 Q 键退出， 回到之前的界面之后会出现一个选择项，询问我们是否接受
xilinx 最终用户协议。这个显然是没得选，必须接受，否则无法进行下面的安装；输入 y 按回车接受。除了 xilinx
最终用户协议之外，还有两个协议也需要大家接受，会依次显示在终端上，同理也是输入 Y 按下回车接受。接受所有协议之后 Petalinux
安装工具便会继续安装，直到安装完成。</p>
<h4 id="4、设置-Petalinux-环境变量"><a href="#4、设置-Petalinux-环境变量" class="headerlink" title="4、设置 Petalinux 环境变量"></a>4、设置 Petalinux 环境变量</h4><pre><code>    在正式使用 petalinux 工具之前，需要先运行 petalinux 安装目录下的 settings.sh 脚本文件 设置 petalinux 工作环境，settings.sh 脚本用于 bash，还有一个 settings.csh 用于 C shell。

    一般默认情况下，我们使用 bash作为登录 shell，所以 source 脚本文件 settings.sh对 petalinux 所需的运行环境进行配置，命令如下：
</code></pre>
<p>​<br>​    source settings.sh
​<br>​        需要注意的是该命令<strong>只对当前终端有效</strong> ，重新打开终端后需要重新执行这一步。执行结果 如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/00f3abd28725993d07f8ef21603c139b.png"></p>
<p> 我们来验证下工作环境是否已设置，在终端输入如下命令：</p>
<p>​<br>​    echo $PETALINUX</p>
<p>显示 Petalinux 的安装目录，表明工作环境已设置。现在可以使用 Petalinux 工具了。</p>
<pre><code>    鉴于每次打开终端使用 Petalinux 都需要设置相应的环境变量，我们为了方便，**将设置 Petalinux 环境变量的命令设置成别名**，这样我们使用起来就方便些。设置别名方法的很简单， 在终端输入如下命令：
</code></pre>
<p>​<br>​    echo “alias sptl&#x3D;’source $PETALINUX&#x2F;settings.sh’” &gt;&gt; ~&#x2F;.bashrc</p>
<pre><code>    以后我们打开终端后，**输入 sptl** 就可以设置 Petalinux 的环境变量了，无需输入长长的路 径。sptl 的记忆法是 Source PeTaLinux 的环境变量。提醒：在使用 linux 的时候要善用别名但不要滥用别名。
</code></pre>
<h4 id="5、Linux-系统安装-JTAG-cable-驱动"><a href="#5、Linux-系统安装-JTAG-cable-驱动" class="headerlink" title="5、Linux 系统安装 JTAG cable 驱动"></a>5、Linux 系统安装 JTAG cable 驱动</h4><pre><code>    在嵌入式开发中，我们都是通过在线 jtag 进行调试的，这种调试方式方便快捷，在使用 Petalinux 进行 Linux 开发中，其实也是可以使用 JTAG 的，不过对于 Linux 系统，**由于安装驱动程序需要 root 或 sudo 访问权限，因此从 Vivado 2015.4 版本开始，默认不安装 jtag 驱动。这 样 Vivado 安装程序和 Petalinux 安装程序可以在没有 root 或 sudo 特权的 Linux 系统上运行。** 这也导致了在 linux 系统中，jtag 驱动需要手动安装。

    下面我们介绍如何在 Ubuntu 主机中（其 他 Linux 系统同样适用）安装 jtag 驱动。 需要注意的是在安装 jtag 驱动之前，请**不要将 jtag 下载器连接到电脑** ，已经接到电脑的， 最好先拔掉。下面开始安装。

    在 Ubuntu 系统中，打开终端，以普通用户运行即可。进入到 petalinux 安装目录。可以看到有一个名为“tools”的目录，jtag 驱动程序在该目录下，我们输入以下命令进入 到 jtag 驱动程序所在位置：
</code></pre>
<p>​<br>​    cd tools&#x2F;xsct&#x2F;data&#x2F;xicom&#x2F;cable_drivers&#x2F;lin64&#x2F;install_script&#x2F;install_drivers
​<br>​        可以看到该目录下有一个名为“install_drivers”的文件，输入如下命令，以 root 权限执行该文件，安装 jtag 驱动程序：</p>
<p>​<br>​    sudo .&#x2F;install_drivers
​<br>​        可以看到 jtag 驱动安装成功。对于最下面一行的警告，如果已经拔掉 jtag 下载器与电脑的 连接就可以不用看。至此 jtag 驱动程序就安装完成了。
​<br>        下面说下在遇到 jtag 驱动问题时，<strong>如何删除 jtag 驱动。注意如无特需情况，请不要执行下 面的命令：</strong></p>
<p>​<br>​    sudo rm -f &#x2F;etc&#x2F;udev&#x2F;rules.d&#x2F;52-xilinx-digilent-usb.rules
​    sudo rm -f &#x2F;etc&#x2F;udev&#x2F;rules.d&#x2F;52-xilinx-ftdi-usb.rules
​    sudo rm -f &#x2F;etc&#x2F;udev&#x2F;rules.d&#x2F;52-xilinx-pcusb.rules</p>
<h2 id="三-Petalinux-设计流程实战"><a href="#三-Petalinux-设计流程实战" class="headerlink" title="三.Petalinux 设计流程实战"></a>三.Petalinux 设计流程实战</h2><pre><code>    PetaLinux 工具提供了**在 Xilinx 处理系统上自定义、构建和部署嵌入式 Linux 解决方案** 所需的一切。该解决方案旨在提高设计生产力，可**与 Xilinx 硬件设计工具一起使用** ，以**简化针对 Zynq SoC 的 Linux 系统的开发** 。本章我们以使用 Petalinux 定制 Linux 系统为例，实战 Petalinux 的设计流程，看下 Petalinux 如何简化 Linux 系统的开发。
</code></pre>
<h3 id="1-Zynq-UltraScale-MPSoC-嵌入式软件栈概述"><a href="#1-Zynq-UltraScale-MPSoC-嵌入式软件栈概述" class="headerlink" title="1.Zynq UltraScale+ MPSoC 嵌入式软件栈概述"></a>1.Zynq UltraScale+ MPSoC 嵌入式软件栈概述</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/41be0b13c8944f0eb38505481be59e1d.png"></p>
<pre><code>    在 Zynq UltraScale+ MPSoC 设备中，有一个 **BootROM** 用于设备的初始启动。配置和安全 部件 CSU(Configuration and Security Unit)处理器使用 BootROM 中的代码。在这个配置阶段， BootROM(CSU ROM 代码的一部分)**解释引导头部（boot header）来配置系统** ，并以安全或者非安全引导模式将处理系统(PS，processing system)的第一阶段**引导加载程序(FSBL，first-stage boot loader)** 代码加载到**片上 RAM(OCM，on-chip RAM)**中。引导头部定义了许多引导参数，包 括安全模式和应该执行 FSBL 的处理器。引导头部参数可以在 Zynq UltraScale+器件手册 [UG1085](https://docs.xilinx.com/r/en-US/ug1085-zynq-ultrascale-trm/Fallback &quot;UG1085&quot;) 中找到。在启动过程中，CSU 还将 **PMU** 用户固件(PMU FW)加载到 PMU RAM 中， 与 PMU ROM 一起提供平台管理服务。对于基于 xilinx 的 FSBL 和系统软件，大多数系统中都 必须有 PMU FW。在 PMU 固件加载前加载 FBSL 是默认配置。有些系统会切换顺序，首先加 载 PMU 固件。

    在[Vitis开发二——FPGA学习笔记——二程序固化实验](https://blog.csdn.net/qq_32971095/article/details/136352300?spm=1001.2014.3001.5501 &quot;Vitis开发二——FPGA学习笔记——二程序固化实验&quot;)中也涉及到相关内容，不过产生的BOOT文件不涉及linux操作系统。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/fbd6bdbe41a447d061533a88e8bad8a9.png"></p>
<p>Boot Image Format with FSBL and PMU Firmware</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9f4287d5b2c5f05a44d171346851eac3.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/2692d111454983b13f1ffa3594f56311.png"></p>
<p>可以参考《xilinx zynq soc与嵌入式Linux设计实战指南》——第三章 zynq启动流程及镜像制作</p>
<p>及[PMU Processor • Zynq UltraScale+ Device Technical Reference Manual
(UG1085)](<a target="_blank" rel="noopener" href="https://docs.xilinx.com/r/en-US/ug1085-zynq-ultrascale-trm/PMU-">https://docs.xilinx.com/r/en-US/ug1085-zynq-ultrascale-trm/PMU-</a>
Processor “PMU Processor • Zynq UltraScale+ Device Technical Reference Manual
(UG1085)“)</p>
<h4 id="1、FSBL"><a href="#1、FSBL" class="headerlink" title="1、FSBL"></a>1、FSBL</h4><pre><code>    FSBL 是 Zynq UltraScale + MPSoC 的**第一阶段引导加载程序** ，由 BootROM 引导加载到片上 RAM 中并启动，用于**配置 FPGA** （使用 bitstream，如果存在的话）和**从非易失性 Flash(SD/eMMC/NAND/QSPI)加载裸机镜像或者操作系统的第二阶段引导加载程序镜像到内存(DDR/OCM)。**
</code></pre>
<h4 id="2、Platform-Management-Unit-PMU-Firmware"><a href="#2、Platform-Management-Unit-PMU-Firmware" class="headerlink" title="2、Platform Management Unit (PMU) Firmware"></a>2、Platform Management Unit (PMU) Firmware</h4><pre><code>    PMU 控制系统的上电、复位和监控系统内的资源。Zynq MPSoC 中的平台管理单元(PMU) 有一个带有 32KB ROM 和 128 KB RAM 的 Microblaze。启动时，ROM 被 PMU Boot ROM (PBR)预加载，PBR 用于执行预启动任务，进入服务模式。有关 **PMU、PBR 和 PMUFW 加载顺序** 的更多细节，请参阅 Zynq UltraScale+器件手册 UG1085 中的平台管理单元(第 6 章)。PMU RAM 可以在运行时加载固件(PMU Firmware)，并可用于扩展或定制 PMU 的功能。
</code></pre>
<p>PMU System Diagram</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/08e512168278cfd6995aa5bcc935df18.png"></p>
<p>官方给出PMU的用处：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4e2c1939bb02498a21be1dc76171241a.png"></p>
<h4 id="3、ARM-Trusted-Firmware"><a href="#3、ARM-Trusted-Firmware" class="headerlink" title="3、ARM Trusted Firmware"></a>3、ARM Trusted Firmware</h4><pre><code>    ARM Trusted Firmware(ATF)为 ARMv8-A 架构的安全软件提供了参考，它提供了各种接 口标准的实现，如 PSCI(Power State Coordination Interface，电源状态协调接口)和用于与 Normal world software 接口的安全监控代码。
</code></pre>
<h4 id="4、U-Boot"><a href="#4、U-Boot" class="headerlink" title="4、U-Boot"></a>4、U-Boot</h4><pre><code>    U-Boot 是 **Universal Boot Loader** 的简称，是一个开源的、主要的引导加载程序，**用于嵌入 式设备中引导设备的操作系统内核** ，在 Linux 社区中经常使用。**Xilinx 在 Zynq Ultrascale+设备 中使用 U-Boot 作为 第二阶段引导加载程序**。
</code></pre>
<h4 id="5、Hypervisor-Optional，可选"><a href="#5、Hypervisor-Optional，可选" class="headerlink" title="5、Hypervisor (Optional，可选)"></a>5、Hypervisor (Optional，可选)</h4><pre><code>    **在 Zynq UltraScale+设备上** ，可以**使用 hypervisor 运行多个虚拟机** 。Zynq UltraScale+设备 上支持几种 hypervisor，该榜单可在 [Embedded Software EcoSystem](https://www.xilinx.com/products/design-tools/embedded-software.html#rtos &quot;Embedded Software EcoSystem&quot;) 上找到。
</code></pre>
<h4 id="6、Linux"><a href="#6、Linux" class="headerlink" title="6、Linux"></a>6、Linux</h4><pre><code>    Linux，全称 GNU/Linux，是一种免费使用和自由传播的类 UNIX 操作系统，是我们本开发指南的重点。

    Zynq UltraScale+ MPSoC 上电后，**首先由 BootROM 对 zynq 设备进行初始启动，然后引导加载 fsbl 到 OCM 并启动 fsbl；fsbl 启动后加载 PMU Firmware，然后加载 ARM Trusted Firmware，配置 DDR，最后将 uboot 加载到 DDR 并启动 uboot；uboot 启动后可选的加 载 hypervisor，并在 hypervisor 上运行 linux 系统，一般我们不使用 hypervisor，而是直接使用 uboot 加载 linux 系统镜像到 DDR 并启动 linux，至此整个 linux 系统启动完成。**

    综上，就是需要在 Zynq UltraScale+ MPSoC 运行 linux 系统所需要搭建的软件栈。如果这 些软件栈由我们一个个手工搭建，任务量极其庞大，所幸的是，**Xilinx 推出了 Petalinux 开发工 具，可以让我们方便快捷的完成这些软件栈的搭建，从而加快 linux 的使用和开发** 。

    注：上面介绍了那么多软件栈，并不需要我们全部了解。以 uboot 为分界线，uboot 以下 的是跟 zynq 芯片密切相关的，是很底层的内容，一般不需要额外配置，让 Petalinux 工具自动 适配即可。**从 uboot 开始，跟 zynq 芯片的关联就弱了很多，uboot 和 linux 内核可以适用与其 他芯片平台，其知识点是通用的，也是我们需要关注的。**
</code></pre>
<h3 id="2-使用-Petalinux-定制-Linux-系统"><a href="#2-使用-Petalinux-定制-Linux-系统" class="headerlink" title="2.使用 Petalinux 定制 Linux 系统"></a>2.使用 Petalinux 定制 Linux 系统</h3><h4 id="1、创建-Vivado-硬件平台"><a href="#1、创建-Vivado-硬件平台" class="headerlink" title="1、创建 Vivado 硬件平台"></a>1、创建 Vivado 硬件平台</h4><pre><code>    system_wrapper.xsa 文件，该文件包含着 Vivado 工程所对应的硬件平台信 息，Petalinux 根据这些信息来配置 fsbl、uboot、内核等。 将该文件拷贝到 Ubuntu 系统下。在 share 文件夹下创建一个 xsa 文 件夹，并将 system_wrapper.xsa 文件复制到该文件夹下。
</code></pre>
<h4 id="2、设置-Petalinux-环境变量"><a href="#2、设置-Petalinux-环境变量" class="headerlink" title="2、设置 Petalinux 环境变量"></a>2、设置 Petalinux 环境变量</h4><p>​<br>​    source &#x2F;opt&#x2F;pkg&#x2F;petalinux&#x2F;2019.2&#x2F;settings.sh
​    #或者
​    sptl</p>
<h4 id="3、创建-petalinux-工程"><a href="#3、创建-petalinux-工程" class="headerlink" title="3、创建 petalinux 工程"></a>3、创建 petalinux 工程</h4><pre><code>    为了方便工程的管理，我们在使用的用户的家目录下新建一个 workspace/petalinux 目录， 作为 petalinux 的工程目录。在终端中输入如下命令新建 workspace/petalinux 目录并切换到该目 录：
</code></pre>
<p>​<br>​    cd
​    mkdir -p workspace&#x2F;petalinux&#x2F;
​    cd workspace&#x2F;petalinux&#x2F;</p>
<p>现在我们创建一个名为“ALIENTEK-ZYNQ”的 Petalinux 工程，在终端中输入如下命令：</p>
<p>​<br>​    petalinux-create -t project –template zynqMP -n ALIENTEK-ZYNQ
​<br>​        template 参数表明创建的 petalinux 工程使用的平台模板，此处的 zynqMP 表明使用的是 zynqMP Soc 平台模板的 petalinux 工程，用于 Zynq UltraScale+ MPSoC 系列的芯片。name 参数 （此处简写为“-n”）后接的是 petalinux 工程名，如此处的“ALIENTEK-ZYNQ”</p>
<h4 id="4、配置-petalinux-工程"><a href="#4、配置-petalinux-工程" class="headerlink" title="4、配置 petalinux 工程"></a>4、配置 petalinux 工程</h4><pre><code>    首次配置 Petalinux 工程是将 xsa 文件导入到 Petalinux 工程中，Petalinux 工具会解析 xsa 文件并弹出配置窗口。在终端中输入如下命令配置 Petalinux 工程：
</code></pre>
<p>​<br>​    cd ALIENTEK-ZYNQ
​    petalinux-config –get-hw-description &#x2F;mnt&#x2F;hgfs&#x2F;shared_folder&#x2F;xsa&#x2F;</p>
<p>弹出 petalinux 工程配置窗口，如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a83dff710bfdce1cc89fd50c9b6dbfa8.png"></p>
<pre><code>    需要注意的是该窗口不可以使用鼠标操作，只能通过键盘操作，界面上方的英文就是简单 的操作说明，操作方法如下：

    通过键盘上的**“↑”和“↓”键来选择要配置的菜单** ，**按下“Enter”键进入子菜单** 。菜单中高亮的字母就是此菜单的**热键** ，在键盘上按下此高亮字母对应的键可以快速选中对应的菜单。选中子菜单以后**按下“Y”键就会将相应的配置选项写入配置文件中，菜单前面变为“ &lt; * &gt;”**。 **按下“N”键不编译相应的代码，按下“M”键就会将相应的代码编译为模块，菜单前面变为“ &lt; M &gt;”**。按两下“Esc”键退出，也就是返回到上一级，按下“?”键查看此菜单的帮助信 息，按下“/”键打开搜索框，可以在搜索框输入要搜索的内容。
</code></pre>
<p>在配置界面下方会有五个按钮，这五个按钮的功能如下：<br><Select>：选中按钮，和“Enter”键的功能相同，负责选中并进入某个菜单。<br><Exit>：退出按钮，和按两下“Esc”键功能相同，退出当前菜单，返回到上一级。<br><Help>：帮助按钮，查看选中菜单的帮助信息。<br><Save>：保存按钮，保存修改后的配置文件。<br><Load>：加载按钮，加载指定的配置文件。<br>        本实验我们无需更改该窗口的配置信息。不过由于该窗口菜单不多，我们就从上到下的简单地介绍下这些菜单。</p>
<pre><code>    首先按键盘上的下方向键移动到“Linux Components Selection”，然后按键盘上的“Enter” 进入子菜单，子菜单内容如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b0f9a188e5df166fb919bd2fe2140b59.png"></p>
<pre><code>    括号里的“*”表示为已使能配置。前两个选项表示会**自动生成我们在《DFZU2EG_4EV MPSoC 之嵌入式 Vitis 开发指南》程序固化实验中的 fsbl.elf 文件和自动更新 ps_init** 。下面两个选项用来配置 u-boot 和 linux-kernel 的来源，本实验保持默认来源配置，不做改动，后面的实验需要更改的时候再做介绍。按键盘上的“Esc”按键连按两次退出该子菜单。

    “Auto Config Settings”菜单主要就是**选择是否使能 fsbl、pmufw、Device tree、Kernel 和 u-boot 的自动配置** ，默认为自动配置，无需更改
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5b1497c082712b5d5d6eeee59e31bfed.png"></p>
<pre><code>     其中**“SD/SDIO Settings”配置项用于配置开发板的首要启动媒介** ，即是从**SD 卡启动还是从 eMMC 启动** 。一般我们调试使用都 是通过 SD 卡启动，因为 SD 卡读写文件方便，从而方便调试；eMMC 一般是程序测试稳定后 上市时使用，不会像 SD 卡那样因碰摔造成的松动。对于 DFZU2EG_4EV MPSoC 开发板来说， 这里需要修改一下，因为 DFZU2EG_4EV MPSoC 开发板的 SD 卡接在 PS 的 SD1 控制器，如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/612b60cb984a3d8cdfd6721695f4de26.png"></p>
<p>首先光标移动到该配置项按回车进入，如下所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/739a10b29b1a3f63cacb77f6a26d8cba.png"></p>
<pre><code>    在“Primary SD/SDIO”配置项中需要将其修改为 psu_sd_1。**psu_sd_1 对应的就是 SD 卡** 。 修改完成之后连按两次 ESC 键回到上一级菜单。

    在“Advanced bootable images storage Settings”菜单中可**配置启动引导镜像和内核镜像的存储媒介** ，默认为 Primary SD，这里保持默认即可。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/250ec972a312abf03c984011b05c5a97.png"></p>
<pre><code>    返回到主界面（按四次“ESC”按键），**设备树设置菜单“DTG Settings”和 ATF 配置菜 单“ARM Trusted Firmware Compilation Configuration”** 等一般保持默认即可。

    我们进入“Image Packaging Configuration”子菜单，如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/cd7ba58cf04b6494b487a1ca6ac860e4.png"></p>
<pre><code>    第一个选项便是**根文件系统的类型的配置，默认为 INITRAMFS** ，一般默认即可，如果我们需要运行 Ubuntu 或 Debian 的 根文件系统时 ， 就需要配置成 **EXT(SD/eMMC/QSPI/SATA/USB)** ，**NFS 挂载启动需要配置成 NFS** 。另外从该界面我们可以看 到，有**“Copy final images to tftpboot”** 选项，**当在 Ubuntu 的根文件下创建一个名为 tftpboot 的文件夹时，工程生成镜像后会自动将相关文件复制到/tftpboot 目录中** 。

    回到主界面，“Firmware Version Configuration”可以用来修改定制的 linux 系统的主机名 和产品名，默认与该 Petalinux 工程同名，如果需要可修改。

    “Yocto Settings”进行与 Yocto 相关的设置，这里就不做介绍了，一般保持默认即可。

    按键盘上的右方向键（即右箭头），移动到底部的“Save”，按键盘上的“Enter”键， 进入如下图所示的保存配置文件界面：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/3399fe22dabcc8eaa76210724169701f.png"></p>
<p>按键盘上的“Enter”键确认，进入下图所示界面：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/87556f5dc05d0572c4cca94feb61c9f1.png"></p>
<pre><code>    再次按键盘上的“Enter”键确认，返会到原界面，按两次键盘上的“Esc”退出配置窗口。 如果后面想重新配置，只需输入“petalinux-config”命令即可重新配置。

    这一步可能需要几分钟才能完成。这是因为 PetaLinux 会根据“Auto Config Settings ---&gt;‖ 和―Subsystem AUTO Hardware Settings ---&gt;‖来解析 xsa 文件，以获取更新设备树、U-Boot 配置 文件和内核配置文件所需的硬件信息。等待一段时间后，完成 petalinux 工程的配置，如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/cf586be08fbacafa3baab0d324db1191.png"></p>
<h4 id="5、配置-Linux-内核"><a href="#5、配置-Linux-内核" class="headerlink" title="5、配置 Linux 内核"></a>5、配置 Linux 内核</h4><p>现在我们开始定制 Linux 内核，在终端输入如下命令：</p>
<p>​<br>​    petalinux-config -c kernel
​<br>​        等一段时间后会在终端中创建一个名为“linux-xlnx Configuration”的标签页，也就是 Linux 内核的配置界面，如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/dd81a7ed1a3fb7ed7810ece777525c84.png"></p>
<pre><code>    可以看到 Petalinux 默认使用的**内核版本为 4.19.0** ，当然也可以换成其它版本的内核,不过 修改起来比较麻烦，Petalinux 对内核版本有要求，读者如需使用其他的内核版本可以在网上查 找关于 Petalinux 使用非默认内核版本的方法。一般使用默认内核版本就可以了。

    这里使用的内核 Xilinx 官方已经做好了基础配置，如无特定需求，无需更改。另外关于 Linux 内核的配置在后面的 Linux 内核移植章节进行讲解，此处就不多做介绍了。这里采用 Xilinx 官方的默认配置即可，保存配置并退出。
</code></pre>
<h4 id="6、配置-Linux-根文件系统"><a href="#6、配置-Linux-根文件系统" class="headerlink" title="6、配置 Linux 根文件系统"></a>6、配置 Linux 根文件系统</h4><p>在终端输入下面的命令可配置根文件系统，如果不需要配置可不执行该命令：</p>
<p>​<br>​    petalinux-config -c rootfs</p>
<p>下图就是根文件系统的配置界面：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a0d6802881da29584983e23d05d264c0.png"></p>
<pre><code>    默认配置可满足一般使用，也可以根据需求来定制根文件系统，本实验保持默认配置。需要说明的是**“PetaLinux RootFS Settings”可以用来设置 root 用户的密码，默认为“root”** 。后面登录的时候会用到。 保存配置并退出。
</code></pre>
<h4 id="7、配置设备树文件"><a href="#7、配置设备树文件" class="headerlink" title="7、配置设备树文件"></a>7、配置设备树文件</h4><pre><code>    设备树的概念源自于 Linux 内核当中，当然其实在 U-Boot 当中也已经使用了。如果需要配置设备树，可以编辑当前 petalinux 工程目录下的 **project-spec/meta-user/recipes-bsp/device-tree/files/system-user.dtsi** 文件。

    我们可以打开这个文件进行编辑，将一些简单外设添加到系统当中，譬如按键、led 和 IIC 设备。设备树用于保存 Linux 系统中的各种设备信息，内核在启动过程当中会去解析设备树文 件，获取设备所需的配置信息完成设备的初始化工作。

    **设备树的概念以及相关配置、语法涉及到了 Linux 内核驱动相关知识** ，并不是本篇学习的 重点，所以这里并不会去深入给大家介绍，将会**在 Linux 驱动部分** 的章节做详细解说。
</code></pre>
<p>使用 vi 命令打开 system-user.dtsi 文件，如下所示：</p>
<p>​<br>​    vi project-spec&#x2F;meta-user&#x2F;recipes-bsp&#x2F;device-tree&#x2F;files&#x2F;system-user.dtsi</p>
<p>默认的文件内容如下，可见该文件需要我们自己手动配置。</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5c470de2e4f70cee868c21189f201842.png"></p>
<p>​<br>​    &#x2F;include&#x2F; “system-conf.dtsi”
​    #include &lt;dt-bindings&#x2F;gpio&#x2F;gpio.h&gt;
​    #include &lt;dt-bindings&#x2F;input&#x2F;input.h&gt;
​    &#x2F; {
​    	model &#x3D; “Alientek Zynq MpSoc Development Board”;
​    	
​    	leds {
​    		compatible &#x3D; “gpio-leds”;
​    		gpio-led0 {
​    			label &#x3D; “ps_led1”;
​    			gpios &#x3D; &lt;&amp;gpio 38 GPIO_ACTIVE_HIGH&gt;;
​    			linux,default-trigger &#x3D; “timer”;
​    		};
​    		gpio-led1 {
​    			label &#x3D; “ps_led2”;
​    			gpios &#x3D; &lt;&amp;gpio 39 GPIO_ACTIVE_HIGH&gt;;
​    			default-state &#x3D; “on”;
​    		};
​    		gpio-led2 {
​    			label &#x3D; “pl_led1”;
​    			gpios &#x3D; &lt;&amp;axi_gpio_0 0 0 GPIO_ACTIVE_HIGH&gt;;
​    			linux,default-trigger &#x3D; “timer”;
​    		};
​    		gpio-led3 {
​    			label &#x3D; “pl_led2”;
​    			gpios &#x3D; &lt;&amp;axi_gpio_0 1 0 GPIO_ACTIVE_HIGH&gt;;
​    			default-state &#x3D; “on”;
​    		}; 
​    	};
​    	
    	keys {
    		compatible &#x3D; “gpio-keys”;
    		autorepeat;
    		gpio-key,wakeup;
    		
    		gpio-key1 {
    			label &#x3D; “ps_key1”;
    			gpios &#x3D; &lt;&amp;gpio 40 GPIO_ACTIVE_LOW&gt;;
    			linux,code &#x3D; <KEY_UP>;
    		};
    			gpio-key2 {
    			label &#x3D; “ps_key2”;
    			gpios &#x3D; &lt;&amp;gpio 41 GPIO_ACTIVE_LOW&gt;;
    			linux,code &#x3D; <KEY_DOWN>;
    		};
    			gpio-key3 {
    			label &#x3D; “pl_key1”;
    			gpios &#x3D; &lt;&amp;gpio 78 GPIO_ACTIVE_LOW&gt;;
    			linux,code &#x3D; <KEY_LEFT>; 
    		};
    			gpio-key4 {
    			label &#x3D; “pl_key2”;
    			gpios &#x3D; &lt;&amp;gpio 79 GPIO_ACTIVE_LOW&gt;;
    			linux,code &#x3D; <KEY_RIGHT>; 
    		};
    	};
    };
    	
    &amp;gem3 {
    	phy-handle &#x3D; &lt;&amp;ethernet_phy&gt;;
    	local-mac-address &#x3D; [00 0a 35 00 1e 53];
    	ethernet_phy: ethernet-phy@7 { 
    		reg &#x3D; &lt;0x7&gt;;
    	};
    };</p>
<pre><code>&amp;gem0 &#123;
	psu_ethernet_0_mdio: mdio &#123;
		#address-cells = &lt;1&gt;;
		#size-cells = &lt;0&gt;;
		phy1:phy@4 &#123;
			reg = &lt;0x4&gt;; /* YT8521 phy address */
		&#125;;
		gmii_to_rgmii_0: gmii_to_rgmii_0@0 &#123;
			compatible = &quot;xlnx,gmii-to-rgmii-1.0&quot;;
			phy-handle = &lt;&amp;phy1&gt;;
			reg = &lt;0&gt;;
		&#125;;
	&#125;;
&#125;;

&amp;sdhci0 &#123;
	mmc-hs200-1_8v;
	bus-width = &lt;0x8&gt;;
	non-removable;
&#125;;

&amp;sdhci1 &#123;
	disable-wp;
	no-1-8-v;
&#125;;

&amp;i2c0 &#123;
	clock-frequency = &lt;400000&gt;;
	eeprom@50 &#123;
		compatible = &quot;24c64&quot;;
		reg = &lt;0x50&gt;;
		pagesize = &lt;32&gt;;
	&#125;;
&#125;;

&amp;dwc3_0 &#123;
	dr_mode = &quot;host&quot;;
	maximum-speed = &quot;super-speed&quot;;
&#125;;

&amp;usb0 &#123;
	dr_mode = &quot;host&quot;;
&#125;;

    设备树文件当中配置了 4 个 gpio led 灯，4 个按键、i2c0 和 usb0，以及 PS 和 PL 的以太网。 下面简单的讲解下 gpio led 的配置。

    4 个 gpio led 灯分别对应开发板的 4 个 led 灯，配置信息主要包括 **compatible（用于与内核 驱动匹配的名字）、label（名字）、gpios（对应的 GPIO 管脚）、默认状态以及触发状态** 。 例如 linux,default-trigger = &quot; timer &quot;表示默认的触发状态是 timer 模式，也可以改为 heartbeat 模式，可以用来判断系统是否还在运行。除此之外，还有其他一些内核定义好的触发状态； default-state = &quot;on&quot;表示默认 led 灯是亮着的；gpios = 表示该 led 的控制管脚是 gpio_38，GPIO_ACTIVE_HIGH 表示高电平有效（也就是高电平的时候 led 灯才会亮）。
</code></pre>
<h4 id="8、编译-Petalinux-工程"><a href="#8、编译-Petalinux-工程" class="headerlink" title="8、编译 Petalinux 工程"></a>8、编译 Petalinux 工程</h4><p>现在我们就可以编译整个 Petalinux 工程了，在终端输入如下命令：</p>
<p>​<br>​    petalinux-build
​<br>​        该命令将<strong>生成设备树 DTB 文件、fsbl 文件、U-Boot 文件，Linux 内核和根文件系统映像</strong> 。 编译完成后，生成的映像将<strong>位于工程的 images 目录下</strong> 。需要说明的是 fsbl、U-Boot 这两个我们在工程中并没有配置，这是因为 Petalinux 会根据 xsa 文件和配置 petalinux 工程<strong>自动配置 fsbl 和 uboot</strong> ，如无特需要求，不需要再手动配置。</p>
<p>执行结果如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f42ccb5a43617856eaa2539ffecdf6cd.png"></p>
<h4 id="9、制作-BOOT-BIN-启动文件"><a href="#9、制作-BOOT-BIN-启动文件" class="headerlink" title="9、制作 BOOT.BIN 启动文件"></a>9、制作 BOOT.BIN 启动文件</h4><pre><code>    Petalinux 提供了 petalinux-package 命令将 PetaLinux 项目打包为适合部署的格式，其中 “petalinux-package --boot”命令生成可引导映像，该映像可直接与 Zynq 系列设备（包括 Zynq-7000 和 Zynq UltraScale + MPSoC）或基于 MicroBlaze 的 FPGA 设计一起使用。对于 Zynq 系列设备，可引导格式为 BOOT.BIN，可以从 SD 卡引导启动。对于基于 MicroBlaze 的设计， 默认格式为 MCS PROM 文件，适用于通过 Vivado 或其他 PROM 编程器进行编程。

    ZYNQ 的启动文件 BOOT.BIN 一般包含 fsbl 文件、bitstream 文件和 uboot 文件。使用下面 的命令可生成 BOOT.BIN 文件：
</code></pre>
<p>​<br>​    petalinux-package –boot –fsbl –fpga –u-boot –force
​<br>​        选项“–fsbl”用于指定 fsbl 文件所在位置，后面接文件对应的路径信息，如果不指定文 件位置，默认对应的是 images&#x2F;linux&#x2F;zynqmp_fsbl.elf；选项“–fpga”用于指定 bitstream 文件所 在位置，后面接该文件对应的路径信息，默认对应的是 images&#x2F;linux&#x2F;system.bit，实际可能有区 别；选项“–u-boot”用于指定 U-Boot 文件所在位置，后面接该文件所在路径信息，默认为 images&#x2F;linux&#x2F;u-boot.elf。这里笔者均没有指定对应的文件的路径信息，那么 Petalinux 会自动使用默认文件。</p>
<p>执行结果如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5bab0f3bbb3cedfb9db39f0ebb9722b0.png"></p>
<pre><code>    可以看到 Petalinux **自动将 PMU（Platform Management Unit） firmware 文件 pmufw.elf 和 ATF（Arm trusted firmware）文件 bl31.elf 包含进 BOOT.BIN** 。

    生成的 BOOT.BIN 文件放在 Petalinux 工程的 **images/linux 目录下** ，上一小节编译 Petalinux 工程生成的文件同样存放在 images/linux 目录下，如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/84819ba0e2bd27d842fded323f1ab75c.png"></p>
<h4 id="10、制作-SD-启动卡"><a href="#10、制作-SD-启动卡" class="headerlink" title="10、制作 SD 启动卡"></a>10、制作 SD 启动卡</h4><pre><code>    如果使用 SD 卡引导 linux系统启动，一般需要在 SD 卡上有 2 个分区。**一个分区使用 FAT32 文件系统，用于放置启动镜像文件（如 BOOT.BIN，linux 镜像等），另一分区使用 EXT4 文件系统，用于存放根文件系统**。

    需要说明的是在配置 petalinux 工程中，“Image Packaging Configuration”子菜单根文件系统的类型的配置使用的是默认的 **INITRAMFS** ，所以**只需要一个使用 FAT32 文件系统** 的分区就可以了。**当设置为“EXT”则需要另一个存放根文件系统的分区** 。
</code></pre>
<p>​        </p>
<pre><code>    先讲解 SD 卡的分区和格式化，然后说明将哪些文件复制到 SD 卡中。 注：在使用 SD 卡前需要先将 sd 卡中的数据做备份，否则会丢失 SD 卡中的数据。        

    将 SD 卡插入到读卡器中、并将读卡器插入电脑并连接到 Ubuntu 系统，**在 Ubuntu 系统中 找到 SD 卡所对应的设备节点** ，笔者插入的 SD 卡对应的设备节点为/dev/sdc。在终端中输入如 下命令：
</code></pre>
<p>​<br>​    umount &#x2F;dev&#x2F;sdc*
​    sudo fdisk &#x2F;dev&#x2F;sdc</p>
<p>输入“p”执行结果如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f484804a452873f0fe3ee8feca88b623.png"></p>
<pre><code>    可以看到当前的分区表，有一个 FAT32 的分区。在开始新分区之前需要将以前的分区删 除，键入“d”，删除该分区，再次键入“d”时会出现下图所示的红色字体提示，表明已无存 在的分区。如果 SD 卡存在多个分区，需要全部删除，存在多个分区的情况下，键入“d”时 会提示选择需要删除的分区编号。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/e9aa6374c3a77fca52b1d9d384269193.png"></p>
<pre><code>    下面开始新建分区。输入“n”创建一个新分区。通过选择&#39;p&#39;使其为主，使用默认分区号 1 和第一个扇区 2048。设置最后一个扇区，也就是设置第一个分区的大小，一般设置 500M 足 够了，通过输入“+ 500M”，为该分区预留 500MB，如下图所示：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8afd8a1d3ce98b0b1b82e824a6d6de0c.png"></p>
<p>现在设置分区类型，输入“t”，然后输入“c”，设置为“W95 FAT32 (LBA)”，如下图 所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b11e58ae1db75c75fd7ad406c31468e5.png"></p>
<p>输入“a”，设为引导分区，如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d3125a80ec08f73e61b9b25c76bf4639.png"></p>
<p>第一个分区就创建好了，开始创建第二个分区。</p>
<p>通过键入“n”来创建根文件系统分区。后面一路默认就可以了，如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ba3bcfc72b47d681b7789eff23bc5737.png"></p>
<pre><code>    如果现在输入“p”检查分区表，会看到刚刚创建的 2 个分区。如果没问题，键入“w” 以写入到 SD 卡并退出。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/42da38677d629d0ddd576397d6829da6.png"></p>
<p>完成了分区创建后，就可以格式化分区了。在终端输入如下命令：</p>
<p>​<br>​    sudo mkfs.vfat -F 32 -n boot &#x2F;dev&#x2F;sdc1
​    sudo mkfs.ext4 -L rootfs &#x2F;dev&#x2F;sdc2
​<br>​        将第一个分区格式化成 FAT32 分区并命名为 boot，将第二个分区格式化成 ext4 分区并命 名为 rootfs。执行结果如下图所示：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/6cb68099ed50588483a706cd2d4037fc.png"></p>
<pre><code>    格式化分区之后就可以挂载分区了（重新插拔读卡器或者使用 mount 命令进行挂载）。挂 载完成后，我们将该工程 image/linux 目录下的 BOOT.BIN 和 image.ub 文件拷贝到名为 boot 的分区也即/dev/sdc1 分区中。然后就可以卸载 SD 卡了。
</code></pre>
<h4 id="11、开发板启动模式设置"><a href="#11、开发板启动模式设置" class="headerlink" title="11、开发板启动模式设置"></a>11、开发板启动模式设置</h4><pre><code>    将 SD 卡插入 SD 卡槽，接下来将启动模式开关 BOOT MODE 的四个开关的第二个与第四个开关拨到下面（置为 OFF），即设置为从 SD 卡启动。打开 MobaXterm 串口上位机或其它串口上位机。上位机打印 Linux 启动信息如下：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/74a3e0bd0b3903e51125cc56adb311cd.png"></p>
<pre><code>    停留在登录处，此处使用 root 用户登录，登录密码为“root”（去掉双引号），登录进去 后，界面如下：
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f1213533746cf2f88aa42270ade1e6f7.png"></p>
<pre><code>    如果我们把视线移到开发板，会看到板上的 LED 灯全都是亮的，其中，底板上的 PL_LED1 和 PS_LED1 同频闪烁，这是设备树配置文件产生的结果。

    Petalinux 的功能远不止如此，其他功能读者有兴趣可进行探索，建议参考 ug1144 参考 手册，也就是 Xilinx 官方编写的 PetaLinux 工具使用说明文档。
</code></pre>
<p><strong>支持文档</strong> ：[Xilinx Wiki - Confluence (atlassian.net)](<a target="_blank" rel="noopener" href="https://xilinx-/">https://xilinx-</a>
wiki.atlassian.net&#x2F;wiki&#x2F;spaces&#x2F;A&#x2F;overview “Xilinx Wiki - Confluence
(atlassian.net)“)</p>
<pre><code>    特别说明：以后我们使用主机终端指代电脑上 Ubuntu 系统的终端，串口终端指代通过串 口线连接到开发板显示在串口上位机中的终端。
</code></pre>
<p>本文转自 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/133468006">https://blog.csdn.net/qq_32971095/article/details/133468006</a>，如有侵权，请联系删除。</p>

    </div>

    
    
    

    
      <div>
        
<div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">
            <center><i>> --------------- THE END -------------- <</i></center>
        </div>
    
</div>
      </div>
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"># 学习笔记</a>
              <a href="/tags/fpga%E5%BC%80%E5%8F%91/" rel="tag"># fpga开发</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/10/01/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(20)%E2%80%94%E2%80%94Xilinx_HLS%E5%BC%80%E5%8F%91/" rel="prev" title="FPGA学习笔记(20)——Xilinx_HLS开发">
      <i class="fa fa-chevron-left"></i> FPGA学习笔记(20)——Xilinx_HLS开发
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/10/02/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/OS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(1)%E2%80%94%E2%80%94Linux%E7%B3%BB%E7%BB%9F/" rel="next" title="OS学习笔记(1)——Linux系统">
      OS学习笔记(1)——Linux系统 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">1.</span> <span class="nav-text">一.开发环境搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Ubuntu-%E5%92%8C-Windows-%E6%96%87%E4%BB%B6%E4%BA%92%E4%BC%A0"><span class="nav-number">1.1.</span> <span class="nav-text">1.Ubuntu 和 Windows 文件互传</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%BC%80%E5%90%AF-Ubuntu-%E4%B8%8B%E7%9A%84-FTP-%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.1.1.</span> <span class="nav-text">1、开启 Ubuntu 下的 FTP 服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81Windows-%E4%B8%8B-FTP-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.2.</span> <span class="nav-text">2、Windows 下 FTP 客户端安装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Ubuntu-%E5%92%8C-Windows-%E6%96%87%E4%BB%B6%E6%9C%AC%E5%9C%B0%E5%85%B1%E4%BA%AB"><span class="nav-number">1.2.</span> <span class="nav-text">2.Ubuntu 和 Windows 文件本地共享</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Ubuntu-%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA-tftp-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.3.</span> <span class="nav-text">3.Ubuntu 系统搭建 tftp 服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Ubuntu-%E4%B8%8B-NFS-%E5%92%8C-SSH-%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%90%AF"><span class="nav-number">1.4.</span> <span class="nav-text">4.Ubuntu 下 NFS 和 SSH 服务开启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Source-Insight-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">1.5.</span> <span class="nav-text">5.Source Insight 软件安装和使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Visual-Studio-Code-%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">1.6.</span> <span class="nav-text">6.Visual Studio Code 软件的安装和使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-SecureCRT-%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">1.7.</span> <span class="nav-text">7.SecureCRT 软件安装和使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Putty-%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="nav-number">1.8.</span> <span class="nav-text">8.Putty 软件的安装和使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C-Petalinux-%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">二.Petalinux 的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Petalinux-%E7%AE%80%E4%BB%8B"><span class="nav-number">2.1.</span> <span class="nav-text">1.Petalinux 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85-Petalinux"><span class="nav-number">2.2.</span> <span class="nav-text">2.安装 Petalinux</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%BA%93%E4%BB%A5%E5%8F%8A%E8%BD%AF%E4%BB%B6"><span class="nav-number">2.2.1.</span> <span class="nav-text">1、安装依赖库以及软件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E4%BF%AE%E6%94%B9-bash"><span class="nav-number">2.2.2.</span> <span class="nav-text">2、修改 bash</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E5%AE%89%E8%A3%85-Petalinux"><span class="nav-number">2.2.3.</span> <span class="nav-text">3、安装 Petalinux</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E8%AE%BE%E7%BD%AE-Petalinux-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.4.</span> <span class="nav-text">4、设置 Petalinux 环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81Linux-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85-JTAG-cable-%E9%A9%B1%E5%8A%A8"><span class="nav-number">2.2.5.</span> <span class="nav-text">5、Linux 系统安装 JTAG cable 驱动</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89-Petalinux-%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B%E5%AE%9E%E6%88%98"><span class="nav-number">3.</span> <span class="nav-text">三.Petalinux 设计流程实战</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Zynq-UltraScale-MPSoC-%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E6%A0%88%E6%A6%82%E8%BF%B0"><span class="nav-number">3.1.</span> <span class="nav-text">1.Zynq UltraScale+ MPSoC 嵌入式软件栈概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81FSBL"><span class="nav-number">3.1.1.</span> <span class="nav-text">1、FSBL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81Platform-Management-Unit-PMU-Firmware"><span class="nav-number">3.1.2.</span> <span class="nav-text">2、Platform Management Unit (PMU) Firmware</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81ARM-Trusted-Firmware"><span class="nav-number">3.1.3.</span> <span class="nav-text">3、ARM Trusted Firmware</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81U-Boot"><span class="nav-number">3.1.4.</span> <span class="nav-text">4、U-Boot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81Hypervisor-Optional%EF%BC%8C%E5%8F%AF%E9%80%89"><span class="nav-number">3.1.5.</span> <span class="nav-text">5、Hypervisor (Optional，可选)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6%E3%80%81Linux"><span class="nav-number">3.1.6.</span> <span class="nav-text">6、Linux</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8-Petalinux-%E5%AE%9A%E5%88%B6-Linux-%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.2.</span> <span class="nav-text">2.使用 Petalinux 定制 Linux 系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BA-Vivado-%E7%A1%AC%E4%BB%B6%E5%B9%B3%E5%8F%B0"><span class="nav-number">3.2.1.</span> <span class="nav-text">1、创建 Vivado 硬件平台</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E8%AE%BE%E7%BD%AE-Petalinux-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">3.2.2.</span> <span class="nav-text">2、设置 Petalinux 环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E5%88%9B%E5%BB%BA-petalinux-%E5%B7%A5%E7%A8%8B"><span class="nav-number">3.2.3.</span> <span class="nav-text">3、创建 petalinux 工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E9%85%8D%E7%BD%AE-petalinux-%E5%B7%A5%E7%A8%8B"><span class="nav-number">3.2.4.</span> <span class="nav-text">4、配置 petalinux 工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81%E9%85%8D%E7%BD%AE-Linux-%E5%86%85%E6%A0%B8"><span class="nav-number">3.2.5.</span> <span class="nav-text">5、配置 Linux 内核</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6%E3%80%81%E9%85%8D%E7%BD%AE-Linux-%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.2.6.</span> <span class="nav-text">6、配置 Linux 根文件系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7%E3%80%81%E9%85%8D%E7%BD%AE%E8%AE%BE%E5%A4%87%E6%A0%91%E6%96%87%E4%BB%B6"><span class="nav-number">3.2.7.</span> <span class="nav-text">7、配置设备树文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8%E3%80%81%E7%BC%96%E8%AF%91-Petalinux-%E5%B7%A5%E7%A8%8B"><span class="nav-number">3.2.8.</span> <span class="nav-text">8、编译 Petalinux 工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9%E3%80%81%E5%88%B6%E4%BD%9C-BOOT-BIN-%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="nav-number">3.2.9.</span> <span class="nav-text">9、制作 BOOT.BIN 启动文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10%E3%80%81%E5%88%B6%E4%BD%9C-SD-%E5%90%AF%E5%8A%A8%E5%8D%A1"><span class="nav-number">3.2.10.</span> <span class="nav-text">10、制作 SD 启动卡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11%E3%80%81%E5%BC%80%E5%8F%91%E6%9D%BF%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="nav-number">3.2.11.</span> <span class="nav-text">11、开发板启动模式设置</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SWQ"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">SWQ</p>
  <div class="site-description" itemprop="description">舟遥遥以轻扬，风飘飘而吹衣</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">216</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xidianswq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xidianswq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_32971095" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_32971095" rel="noopener" target="_blank"><i class="fa fa-link fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://qm.qq.com/q/fJkfzkochO" title="QQ → https:&#x2F;&#x2F;qm.qq.com&#x2F;q&#x2F;fJkfzkochO" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
      <span class="links-of-author-item">
        <a href="/3209507800@qq.com" title="E-Mail → 3209507800@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/348651384" title="bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;348651384" rel="noopener" target="_blank"><i class="fa fa-tv fa-fw"></i>bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/profiles/76561199188319035/" title="Steam → https:&#x2F;&#x2F;steamcommunity.com&#x2F;profiles&#x2F;76561199188319035&#x2F;" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://c6.y.qq.com/base/fcgi-bin/u?__=sZVdegbNTeC3" title="Music → https:&#x2F;&#x2F;c6.y.qq.com&#x2F;base&#x2F;fcgi-bin&#x2F;u?__&#x3D;sZVdegbNTeC3" rel="noopener" target="_blank"><i class="fa fa-music fa-fw"></i>Music</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1309889000&auto=1&height=66"></iframe>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-8 ~ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SWQ</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.5m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">22:15</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

<script src="/js/floating-history.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'H2FYHQwVGaUkawg5DkrA6d6M-gzGzoHsz',
      appKey     : 'zndS0u9Qj7qj8CqnJINs2MGT',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : 'https://h2fyhqwv.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});
</script>


  <script async src="/js/cursor/fireworks.js"></script>


</body>
</html>
