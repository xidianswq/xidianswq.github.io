<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC|Roboto&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xidianswq.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#e6c35c","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="目录">
<meta property="og:type" content="article">
<meta property="og:title" content="基础设计一——FPGA学习笔记＜2＞">
<meta property="og:url" content="https://xidianswq.github.io/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/index.html">
<meta property="og:site_name" content="Switch">
<meta property="og:description" content="目录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b2efe3610ba66737b9104ad2f0d80a3c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f92d1d6e686a5d2205375e96b85fff6b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2667696a820c85797d4d6df1cd43b3c2.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a547736864f1e460e82164c0dbd31028.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/3b7294591ac560a6ea16c433bad7f58b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9529f923229460a5c7d62e2813b2a149.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5c2a7cc9868e417cc2454b198ef7c77c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/af3dc861458df3b6b3b0b48ef0d48397.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a1dd6f2041ad2af10e07bce42ef0ed57.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8a5b95f6c18a4f91ac7113d884df5d06.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/195ecfe4afdbb59d8a2c2871b179f4b4.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b47bce4a0d597ad6c2f825c93fddea3c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5f7462237ec90db44d753643fd1175f8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/1b47c2afa869d2985439cd6a764acec2.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/08347777a3520b80c7389d37b9a8f174.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/7022f97c6a64984110ce0190374f40ee.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/07d2cc78f9f45c76abd50199a1765abb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/db93f9f8c2c93c51f9cebe41a5343324.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c87e94d3d00825f28e055fc0409abf65.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/357b240f0acec1fdd18ae18c48ac40e6.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/45e3ec6b37e6730e9b3cb619c63e3506.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/0cb4b6be1ea1d93446498b0a58ccf824.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/702c1dbfa022a48d2038ebc95a365143.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/3f5cb3dcb64fe6c9a9fb78114e65ab90.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/0552faa2eab0dffee4a70c5accc31b5b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/140e2313fb9fd6db965f491478b676bd.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/0dc2ae66a16b4d70850a1f4ae1018297.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9cce811c897aaa8d84456affe85324ee.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a4bbc39dcadb1a386cb97f00b0ed60ca.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/87d997a95dc950fcd7f972d92fa4b0a5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ad5f6ceceaaa31907048acf97b94a072.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d6d545db03b98d36c3b125aa76fba5f7.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6a08207a83f751091bd3135d3a6b23cf.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c9cfdde4d3a4b725549baa2d34cf355c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b7b0ba72cbd40812bb052723628d968f.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/e538294c904a9336b2a9984f3527a2bf.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c9be6c6007e107c284be2d883a67a383.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/93bb9d23989a1f4147bf1e7de4c66084.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/937dd3128d1f5cdf77c8fccd00816ed4.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/4cbcc3ca593a40beb56c37d744b6a0b5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d8e7264f035f94a2d4c35f795bc2e70e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/56dcc057c914e8a882f7fcaae1c8522c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d640913a44f0ee53ed095a299dea32bf.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f03c006da178aee72d96d6e2a4269007.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/64bba58e601e6b56807646b7f5dedf3e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c59d2b0cbc40709126a80bb867ab976a.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d07f66848d920d0322d81f64d5e9bfa5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/94b02aeeb99d1401d4105fccbf6f30cb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/1268b6615fce43b3f1c4286c6f1b6908.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c327b5d96c1e35949a45b32ae231a9e5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/72d0265f36c516cd1237289542749cae.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c9907890950a3eb61c446e3525534c57.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5ec6283f38702f38a3f6b123c9d7d8cb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/005205dcc527510028d73ea92813072b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/04a58b1443519b04e6ba1b564905ca29.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/53534ff8355e13c45c4c60f415bed274.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/7538cc8f96cd3ed8557ff715e102cc35.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/098c9d43dc2c588dda513c7f86aef146.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/0550049229a1c71c2bf226988dc5403d.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b63e0103ecc4b574df8128798cca2804.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b5d7fc4a027154627993d5a2ea410858.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c81af6a8d1452ff19cb2584c664cb05e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9212a0f54789e4279e0deb46892893a0.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/0c366aa57dc96fc107f7a98134ea541e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f7cfd9794934a24ebb4c1604bc93ddff.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/fb4bca81cfe11f1a319e9269c00fc728.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a587c62737e05e53796c075785335997.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f0dd282c6d098d42d7ccbd5dcc6a8060.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9a0ef5616d5f85f5cd9134eba3f8b4af.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/19ead2babd57ed1bfbd253080790a2e8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8046c5befbf38e5f3597ba0ee3ed4d54.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9b531d4379ea89303cbfd9c4322c8649.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ce8ccc7525ce5b5d56a6159fc5739653.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/bde02cf87bc7d8048af7109c8740f6fb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/709bad310d63a8fb4530b7384ede5919.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b1b3d9a5fc4da47dfa2eeb409d54cb4a.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a48c6951f6329e22e97c67b20b033e15.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/dc1c3738464e52a3b09c540e65703e3e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/13d4617698f497ba37ed751532fd025b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/193aa0a1d5a6cc8beda043590a0a82e7.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/3b48d646be58e4074fd5758995c1b194.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6b64737d4cf0b4fb0e5a5ef634392b4e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/4cccccf928ca614d15bdc36b46caf2b3.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f441c1d4aef20817a3875e82ada804c9.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b6e5825667316f9e53a7c78b93238025.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/bb3cb18907d7b8039a8cab21a18b9a46.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a4604d25ce110aa5d7fcf14ae08cc6b7.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/de1332e424bc46b895e1e0d63443eacf.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ad6b10f466b0b610deb1f226a1481d6d.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d6b290cd161a83a533df103f57c759bc.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c4c0e4274d427c529f6abec8fe8c648b.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/499a0fa7af357d8d9cca522a16524e9c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/c6893b44caf7ec63ddc68714a118b9b4.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/16ddf72ebb4d584e925a8b26d958cfaa.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8b274eaefe8b17e020a89b2ddfd461a9.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/a5599919d9d77d3ca30d278b89288156.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5a266ef72d4b7f265101a20d9fed74c1.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/056d9b2536446b3eb89583eccfe55204.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/be646017aad2b634afd574b313146586.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6b1bd720cad58a07bb520c880f0b80ac.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ae562916815db1311874ac2adf109bfb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/dab5caf57215a249ba38d858e47fb211.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/68e8473cbba3135dd5d8fc77423e4351.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/093258a351514dd05e83d3cf3d4e8bde.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ff4a4f1a879daad7f8bfe49f24fe63b2.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f705ff295f1ea2ea1e088ef15013368c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b075f02dfe393c49623598e5ca2c5a23.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/992fdf3e38def6dea07b66383225d3c4.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/21e5c11ef610a33d93b404ef205251e3.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/277af51439649f5fd8edd3bea324ba42.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/669f0463e404b28fe73cf0b254d242bd.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5300ccd1c590907cd2eef1605876a964.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b8759c5a5b929f36c23f74d72c739fdb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9739916bd01d5da854f10529de7bf04c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ff8f350fea1cf05ea913f0a2cc20aed0.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5620fa45183aaca2fc841d87809c8010.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/efc4721fe989ceadb077cfa024b628d1.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2cbae469f08cf53fc9d5f56e3059bb4f.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/696166e97ce5d3b1a2be055ac6dc925c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b28c0e71220e72cd013719c820965bed.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6bbbe960d9a46469be4d41b77fe63590.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ce08eac2cbdaba2d66e7242c75655e6e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/f2782237565cfc547af71d1efbb7664d.png">
<meta property="article:published_time" content="2023-08-16T14:51:36.000Z">
<meta property="article:modified_time" content="2025-02-09T06:25:40.542Z">
<meta property="article:author" content="SWQ">
<meta property="article:tag" content="fpga开发">
<meta property="article:tag" content="嵌入式硬件">
<meta property="article:tag" content="学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i-blog.csdnimg.cn/blog_migrate/b2efe3610ba66737b9104ad2f0d80a3c.png">

<link rel="canonical" href="https://xidianswq.github.io/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>基础设计一——FPGA学习笔记＜2＞ | Switch</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><!-- hexo injector head_end end --><link rel="alternate" href="/rss2.xml" title="Switch" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Switch</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Welcome to My Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">33</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">135</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xidianswq.github.io/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="SWQ">
      <meta itemprop="description" content="舟遥遥以轻飏，风飘飘而吹衣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Switch">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          基础设计一——FPGA学习笔记＜2＞
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar" color=f6416c></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-16 22:51:36" itemprop="dateCreated datePublished" datetime="2023-08-16T22:51:36+08:00">2023-08-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          
            <span id="/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/" class="post-meta-item leancloud_visitors" data-flag-title="基础设计一——FPGA学习笔记＜2＞" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>33k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>30 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>目录</strong></p>
<p><a href="about:blank#%E9%9B%B6.%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B">零.设计流程</a></p>
<p><a href="about:blank#%E4%B8%80.%E6%8C%89%E9%94%AE%E7%82%B9%E4%BA%AELED%E7%81%AF">一.按键点亮LED灯</a></p>
<p><a href="about:blank#1.%E7%A1%AC%E4%BB%B6%E8%B5%84%E6%BA%90">1.硬件资源</a></p>
<p><a href="about:blank#%C2%A02.%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1"> 2.项目设计</a></p>
<p><a href="about:blank#%C2%A03.%E6%B3%A2%E5%BD%A2%E8%AE%BE%E8%AE%A1"> 3.波形设计</a></p>
<p><a href="about:blank#%C2%A04.%E5%88%9B%E5%BB%BAVivado%E5%B7%A5%E7%A8%8B%E2%80%8B%E7%BC%96%E8%BE%91"><br>4.创建Vivado工程​编辑</a></p>
<p><a href="about:blank#%3C1%3E%E6%B7%BB%E5%8A%A0%E8%AE%BE%E8%AE%A1%E6%96%87%E4%BB%B6">&lt;1&gt;添加设计文件</a></p>
<p><a href="about:blank#%3C2%3E%E6%B7%BB%E5%8A%A0%E4%BB%BF%E7%9C%9F%E6%96%87%E4%BB%B6">&lt;2&gt;添加仿真文件</a></p>
<p><a href="about:blank#5.%E5%BC%95%E8%84%9A%E7%BA%A6%E6%9D%9F">5.引脚约束</a></p>
<p><a href="about:blank#6.%E7%94%9F%E6%88%90%E6%AF%94%E7%89%B9%E6%B5%81%E6%96%87%E4%BB%B6">6.生成比特流文件</a></p>
<p><a href="about:blank#7.%E4%B8%8B%E8%BD%BD%E9%AA%8C%E8%AF%81">7.下载验证</a></p>
<p><a href="about:blank#8.%E7%A8%8B%E5%BA%8F%E5%9B%BA%E5%8C%96">8.程序固化</a></p>
<p><a href="about:blank#%E4%BA%8C.%E5%A4%9A%E8%B7%AF%E9%80%89%E6%8B%A9%E5%99%A8">二.多路选择器</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95">1.实现方法</a></p>
<p>[&lt;1&gt;always 中 if-else 实现方法](about:blank#%3C1%3Ealways%20%E4%B8%AD%20if-<br>else%20%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95)</p>
<p><a href="about:blank#%C2%A0%3C2%3Ealways%20%E4%B8%AD%20case%20%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%E2%80%8B%E7%BC%96%E8%BE%91"> &lt;2&gt;always 中 case<br>实现方法​编辑</a></p>
<p><a href="about:blank#%C2%A0%3C3%3Eassign%20%E4%B8%AD%E6%9D%A1%E4%BB%B6%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%89%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"> &lt;3&gt;assign<br>中条件运算符（三元运算符）实现方法</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E4%B8%89.%E8%AF%91%E7%A0%81%E5%99%A8">三.译码器</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95">1.实现方法</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E5%9B%9B.%E5%8D%8A%E5%8A%A0%E5%99%A8">四.半加器</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0">1.实现</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E4%BA%94.%E5%B1%82%E6%AC%A1%E5%8C%96%E8%AE%BE%E8%AE%A1">五.层次化设计</a></p>
<p><a href="about:blank#1.%E5%85%A8%E5%8A%A0%E5%99%A8">1.全加器</a></p>
<p><a href="about:blank#%E5%85%AD.%E9%81%BF%E5%85%8DLatch%E7%9A%84%E4%BA%A7%E7%94%9F">六.避免Latch的产生</a></p>
<p><a href="about:blank#%E4%B8%83.%E5%AF%84%E5%AD%98%E5%99%A8">七.寄存器</a></p>
<p><a href="about:blank#1.%E5%90%8C%E6%AD%A5%E5%A4%8D%E4%BD%8D%20D%20%E8%A7%A6%E5%8F%91%E5%99%A8%E5%92%8C%E5%BC%82%E6%AD%A5%E5%A4%8D%E4%BD%8D%C2%A0D%20%E8%A7%A6%E5%8F%91%E5%99%A8">1.同步复位 D 触发器和异步复位 D<br>触发器</a></p>
<p><a href="about:blank#%3C1%3E%E5%90%8C%E6%AD%A5%E5%A4%8D%E4%BD%8D%20D%20%E8%A7%A6%E5%8F%91%E5%99%A8">&lt;1&gt;同步复位 D<br>触发器</a></p>
<p><a href="about:blank#%3C2%3E%E5%BC%82%E6%AD%A5%E5%A4%8D%E4%BD%8D%20D%20%E8%A7%A6%E5%8F%91%E5%99%A8">&lt;2&gt;异步复位 D<br>触发器</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E5%85%AB.%E9%98%BB%E5%A1%9E%E8%B5%8B%E5%80%BC%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9E%E8%B5%8B%E5%80%BC">八.阻塞赋值与非阻塞赋值</a></p>
<p><a href="about:blank#%E4%B9%9D.%E8%AE%A1%E6%95%B0%E5%99%A8">九.计数器</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95">1.实现方法</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E5%8D%81.%E5%88%86%E9%A2%91%E5%99%A8">十.分频器</a></p>
<p><a href="about:blank#1.%E5%81%B6%E5%88%86%E9%A2%91">1.偶分频</a></p>
<p><a href="about:blank#2.%E5%A5%87%E5%88%86%E9%A2%91">2.奇分频</a></p>
<p><a href="about:blank#%E5%8D%81%E4%B8%80.%E6%8C%89%E9%94%AE%E6%B6%88%E6%8A%96">十一.按键消抖</a></p>
<p><a href="about:blank#1.%E7%A1%AC%E4%BB%B6%E6%B6%88%E6%8A%96">1.硬件消抖</a></p>
<p><a href="about:blank#2.%E8%BD%AF%E4%BB%B6%E6%B6%88%E6%8A%96">2.软件消抖</a></p>
<p><a href="about:blank#%E5%8D%81%E4%BA%8C.%E6%B5%81%E6%B0%B4%E7%81%AF">十二.流水灯</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0">1.实现</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<p><a href="about:blank#%E5%8D%81%E4%B8%89.%E7%8A%B6%E6%80%81%E6%9C%BA">十三.状态机</a></p>
<p><a href="about:blank#1.%E7%AE%80%E6%98%93%E5%8F%AF%E4%B9%90%E6%9C%BA">1.简易可乐机</a></p>
<p><a href="about:blank#2.%E5%A4%8D%E6%9D%82%E5%8F%AF%E4%B9%90%E6%9C%BA">2.复杂可乐机</a></p>
<p><a href="about:blank#%E5%8D%81%E5%9B%9B.%E6%97%A0%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8">十四.无源蜂鸣器</a></p>
<p><a href="about:blank#%E5%8D%81%E4%BA%94.%E5%8A%A8%E6%80%81%E6%95%B0%E7%A0%81%E7%AE%A1%E6%98%BE%E7%A4%BA">十五.动态数码管显示</a></p>
<p><a href="about:blank#1.%E5%AE%9E%E7%8E%B0">1.实现</a></p>
<p><a href="about:blank#%3C1%3Edata_gen">&lt;1&gt;data_gen</a></p>
<p><a href="about:blank#%C2%A0%3C2%3Ebcd_8421"> &lt;2&gt;bcd_8421</a></p>
<p><a href="about:blank#%3C3%3E%C2%A0seg_dynamic">&lt;3&gt; seg_dynamic</a></p>
<p><a href="about:blank#%C2%A0%3C4%3Etop_seg_dynamic"> &lt;4&gt;top_seg_dynamic</a></p>
<p><a href="about:blank#2.%E4%BB%BF%E7%9C%9F">2.仿真</a></p>
<hr>
<p>前置学习：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/132308209?spm=1001.2014.3001.5501" title="verilog语法——FPGA学习笔记＜1＞">verilog语法——FPGA学习笔记＜1＞</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/132220627?spm=1001.2014.3001.5501" title="FPGA基本概念及资源整理——FPGA学习笔记＜0＞">FPGA基本概念及资源整理——FPGA学习笔记＜0＞</a></p>
<p> 参考书目：《野火FPGA Verilog 开发实战指南》</p>
<h2 id="零-设计流程"><a href="#零-设计流程" class="headerlink" title="零.设计流程"></a>零.设计流程</h2><p><img src="https://i-blog.csdnimg.cn/blog_migrate/b2efe3610ba66737b9104ad2f0d80a3c.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f92d1d6e686a5d2205375e96b85fff6b.png"></p>
<p><strong>熟悉Vivado界面参考：</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/L20902/article/details/86542768" title="4.1 Vivado使用技巧（1）：了解主界面"> 4.1 Vivado使用技巧（1）：了解主界面<img src="https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png" alt="icon-
default.png?t&#x3D;N7T8">https://blog.csdn.net/L20902/article/details/86542768</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/152589392" title="[走近FPGA]之工具篇（上）-Vivado">[走近FPGA]之工具篇（上）-Vivado<img src="https://i-blog.csdnimg.cn/blog_migrate/003a2ce7eb50c2e24a8c624c260c5930.png" alt="icon-
default.png?t&#x3D;N7T8">https://zhuanlan.zhihu.com/p/152589392</a></p>
<h2 id="一-按键点亮LED灯"><a href="#一-按键点亮LED灯" class="headerlink" title="一.按键点亮LED灯"></a>一.按键点亮LED灯</h2><h3 id="1-硬件资源"><a href="#1-硬件资源" class="headerlink" title="1.硬件资源"></a>1.硬件资源</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/2667696a820c85797d4d6df1cd43b3c2.png"></p>
<h3 id="2-项目设计"><a href="#2-项目设计" class="headerlink" title="2.项目设计"></a>2.项目设计</h3><p>①项目分解成模块；②模块设计：模块、输入信号、输出信号</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a547736864f1e460e82164c0dbd31028.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/3b7294591ac560a6ea16c433bad7f58b.png"></p>
<h3 id="3-波形设计"><a href="#3-波形设计" class="headerlink" title="3.波形设计"></a>3.波形设计</h3><p>信号之间的逻辑或时序上关系，众多信号使用波形图表达（注意信号间规范区分，比如绿色输入信号，黄色之间变量，红色输出变量等等）</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9529f923229460a5c7d62e2813b2a149.png"></p>
<h3 id><a href="#" class="headerlink" title></a></h3><p>4.创建Vivado工程<img src="https://i-blog.csdnimg.cn/blog_migrate/5c2a7cc9868e417cc2454b198ef7c77c.png"></p>
<h4 id="添加设计文件"><a href="#添加设计文件" class="headerlink" title="&lt;1&gt;添加设计文件"></a>&lt;1&gt;添加设计文件</h4><p><img src="https://i-blog.csdnimg.cn/blog_migrate/af3dc861458df3b6b3b0b48ef0d48397.png"></p>
<p> 文件会复制到xxx.srcs文件夹内；创建文件路径也在此文件夹中；复制选项上面的选项指复制搜寻并复制子模块RTL文件</p>
<p>示例RTL代码：</p>
<p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​    &#x2F;&#x2F;<br>​    &#x2F;&#x2F; Company:<br>​    &#x2F;&#x2F; Engineer:<br>​    &#x2F;&#x2F;<br>​    &#x2F;&#x2F; Create Date: 2023&#x2F;08&#x2F;16 22:03:43<br>​    &#x2F;&#x2F; Design Name:<br>​    &#x2F;&#x2F; Module Name: led_creat<br>​    &#x2F;&#x2F; Project Name:<br>​    &#x2F;&#x2F; Target Devices:<br>​    &#x2F;&#x2F; Tool Versions:<br>​    &#x2F;&#x2F; Description:<br>​    &#x2F;&#x2F;<br>​    &#x2F;&#x2F; Dependencies:<br>​    &#x2F;&#x2F;<br>​    &#x2F;&#x2F; Revision:<br>​    &#x2F;&#x2F; Revision 0.01 - File Created<br>​    &#x2F;&#x2F; Additional Comments:<br>​    &#x2F;&#x2F;<br>​    &#x2F;&#x2F;<br>​<br>    module  led<br>    (<br>        input   wire    key_in  ,   &#x2F;&#x2F;输入按键</p>
<pre><code>    output  wire    led_out     //输出控制led
);

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//led_out:led灯输出的结果为key_in按键取反的输入
assign  led_out  =  ~key_in;

endmodule
</code></pre>
<h4 id="添加仿真文件"><a href="#添加仿真文件" class="headerlink" title="&lt;2&gt;添加仿真文件"></a>&lt;2&gt;添加仿真文件</h4><p>逻辑仿真时使用的Testbench脚本也是用HDL语言写的，其原理如下：</p>
<p>第一步创建Testbench脚本，名字通常为被测试模块前加tb_</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a1dd6f2041ad2af10e07bce42ef0ed57.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8a5b95f6c18a4f91ac7113d884df5d06.png"></p>
<p>代码示例：</p>
<p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  tb_led();</p>
<pre><code>//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//
//wire  define
wire    led_out ;

//reg   define
reg     key_in  ;

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//
//初始化输入信号
initial key_in &lt;= 1&#39;b0;

//key_in:产生输入随机数，模拟按键的输入情况
always #10 key_in &lt;= &#123;$random&#125; % 2; /*取模求余数，产生非负随机数0、1
                                      每隔10ns产生一次随机数*/

//********************************************************************//
//**************************** Instantiate ***************************//
//********************************************************************//
//------------- led_inst -------------
led led_inst
(
    .key_in (key_in ),  //input     key_in

    .led_out(led_out)   //output    led_out
);

endmodule


    _**这里定义的变量类型如果要手动赋值仿真，使用reg变量；如果是输出则用使用wire变量引出**_ ，理解变量的含义即可。
</code></pre>
<p>然后运行仿真即可，可选择Vivado仿真或Modelsim联合仿真。仿真过程类似Quartus II</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/195ecfe4afdbb59d8a2c2871b179f4b4.png"></p>
<p>此处可设定仿真参数</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b47bce4a0d597ad6c2f825c93fddea3c.png"><img src="https://i-blog.csdnimg.cn/blog_migrate/5f7462237ec90db44d753643fd1175f8.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/1b47c2afa869d2985439cd6a764acec2.png"></p>
<h3 id="5-引脚约束"><a href="#5-引脚约束" class="headerlink" title="5.引脚约束"></a>5.引脚约束</h3><p><strong>&lt; 1&gt;方式一——RTL ANALYSIS</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/08347777a3520b80c7389d37b9a8f174.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/7022f97c6a64984110ce0190374f40ee.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/07d2cc78f9f45c76abd50199a1765abb.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/db93f9f8c2c93c51f9cebe41a5343324.png"></p>
<p><strong>注：相关文件信息及更改在中间框中如下</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c87e94d3d00825f28e055fc0409abf65.png"></p>
<p>**  &lt;2&gt;方式二——直接编写并添加.xdc连接文件**</p>
<p><strong>注：.xdc文件使用#注释</strong></p>
<h3 id="6-生成比特流文件"><a href="#6-生成比特流文件" class="headerlink" title="6.生成比特流文件"></a>6.生成比特流文件</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/357b240f0acec1fdd18ae18c48ac40e6.png"></p>
<h3 id="7-下载验证"><a href="#7-下载验证" class="headerlink" title="7.下载验证"></a>7.下载验证</h3><p>**  注意事项**</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/45e3ec6b37e6730e9b3cb619c63e3506.png"></p>
<p><strong>即先将JTAG连接至FPGA，然后打开FPGA电源，然后JTAG链接电脑</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/0cb4b6be1ea1d93446498b0a58ccf824.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/702c1dbfa022a48d2038ebc95a365143.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/3f5cb3dcb64fe6c9a9fb78114e65ab90.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/0552faa2eab0dffee4a70c5accc31b5b.png"></p>
<p>可以看到生成的bit文件保存在.runs文件夹中</p>
<h3 id="8-程序固化"><a href="#8-程序固化" class="headerlink" title="8.程序固化"></a>8.程序固化</h3><p><strong>首先在.xdc连接文件添加以下代码，目的是使用spi4加速（如果不添加后续只能使用spi1）</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/140e2313fb9fd6db965f491478b676bd.png"></p>
<p>​<br>​    set_property CFGBVS VCCO [current_design]<br>​    set_property CONFIG_VOLTAGE 3.3 [current_design]<br>​    set_property BITSTREAM.CONFIG.SPI_BUSWIDTH 4 [current_design]<br>​    set_property CONFIG_MODE SPIx4 [current_design]<br>​    set_property BITSTREAM.CONFIG.CONFIGRATE 50 [current_design]</p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42741023/article/details/110523933" title="XILINX 7系列配置4线SPI_spi_setconfig">XILINX<br>7系列配置4线SPI_spi_setconfig</a></p>
<p>MSC文件是xilinx的二进制文件</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/0dc2ae66a16b4d70850a1f4ae1018297.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9cce811c897aaa8d84456affe85324ee.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a4bbc39dcadb1a386cb97f00b0ed60ca.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/87d997a95dc950fcd7f972d92fa4b0a5.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ad5f6ceceaaa31907048acf97b94a072.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d6d545db03b98d36c3b125aa76fba5f7.png"></p>
<p> 进程两步操作：擦除FLASH芯片、写入FLASH芯片；</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/6a08207a83f751091bd3135d3a6b23cf.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c9cfdde4d3a4b725549baa2d34cf355c.png"></p>
<p>生成bin文件之后，右键之前生成的存储器配置文件，更改“programme file”为生成的bin文件如下</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b7b0ba72cbd40812bb052723628d968f.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/e538294c904a9336b2a9984f3527a2bf.png"></p>
<p> 之后便可以在这里进行程序烧录</p>
<p><strong>最终简化流程为“Generate BItstrean”- &gt;“Program Configuration Memory Device”</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c9be6c6007e107c284be2d883a67a383.png"></p>
<h2 id="二-多路选择器"><a href="#二-多路选择器" class="headerlink" title="二.多路选择器"></a>二.多路选择器</h2><h3 id="1-实现方法"><a href="#1-实现方法" class="headerlink" title="1.实现方法"></a>1.实现方法</h3><h4 id="always-中-if-else-实现方法"><a href="#always-中-if-else-实现方法" class="headerlink" title="&lt;1&gt;always 中 if-else 实现方法"></a>&lt;1&gt;always 中 if-else 实现方法</h4><p><img src="https://i-blog.csdnimg.cn/blog_migrate/93bb9d23989a1f4147bf1e7de4c66084.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/937dd3128d1f5cdf77c8fccd00816ed4.png"><img src="https://i-blog.csdnimg.cn/blog_migrate/4cbcc3ca593a40beb56c37d744b6a0b5.png"></p>
<h4 id="always-中-case"><a href="#always-中-case" class="headerlink" title="&lt;2&gt;always 中 case"></a>&lt;2&gt;always 中 case</h4><p>实现方法<img src="https://i-blog.csdnimg.cn/blog_migrate/d8e7264f035f94a2d4c35f795bc2e70e.png"></p>
<h4 id="assign-中条件运算符（三元运算符）实现方法"><a href="#assign-中条件运算符（三元运算符）实现方法" class="headerlink" title="&lt;3&gt;assign 中条件运算符（三元运算符）实现方法"></a>&lt;3&gt;assign 中条件运算符（三元运算符）实现方法</h4><p><img src="https://i-blog.csdnimg.cn/blog_migrate/56dcc057c914e8a882f7fcaae1c8522c.png"></p>
<p>注：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wordwarwordwar/article/details/101114439" title="assign和always@(*)区别">assign和always@(*)区别</a></p>
<h3 id="2-仿真"><a href="#2-仿真" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/d640913a44f0ee53ed095a299dea32bf.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f03c006da178aee72d96d6e2a4269007.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/64bba58e601e6b56807646b7f5dedf3e.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c59d2b0cbc40709126a80bb867ab976a.png"></p>
<h2 id="三-译码器"><a href="#三-译码器" class="headerlink" title="三.译码器"></a>三.译码器</h2><h3 id="1-实现方法-1"><a href="#1-实现方法-1" class="headerlink" title="1.实现方法"></a>1.实现方法</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/d07f66848d920d0322d81f64d5e9bfa5.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/94b02aeeb99d1401d4105fccbf6f30cb.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/1268b6615fce43b3f1c4286c6f1b6908.png"></p>
<h3 id="2-仿真-1"><a href="#2-仿真-1" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/c327b5d96c1e35949a45b32ae231a9e5.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/72d0265f36c516cd1237289542749cae.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c9907890950a3eb61c446e3525534c57.png"></p>
<h2 id="四-半加器"><a href="#四-半加器" class="headerlink" title="四.半加器"></a>四.半加器</h2><h3 id="1-实现"><a href="#1-实现" class="headerlink" title="1.实现"></a>1.实现</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/5ec6283f38702f38a3f6b123c9d7d8cb.png"></p>
<h3 id="2-仿真-2"><a href="#2-仿真-2" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/005205dcc527510028d73ea92813072b.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/04a58b1443519b04e6ba1b564905ca29.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/53534ff8355e13c45c4c60f415bed274.png"></p>
<h2 id="五-层次化设计"><a href="#五-层次化设计" class="headerlink" title="五.层次化设计"></a>五.层次化设计</h2><p>**         <em>自上而下设计</em>** ：自上而下的设计是<strong>从系统级开始</strong> ，<strong>把系统分为基本单元</strong> ，然后再把每个单元划分为<strong>下<br>一层次的基本单元</strong> ，一直这样做下去，<strong>直到直接可以用 EDA 元件库中的原件来实现为止。</strong> 在自顶向下设计方法中，我们首<br>先定义顶层功能块，进而分析需要哪些构成顶层模块的必 要子模块；然后进一步对各个子模块进行分解，直到到达无法进一步分解的底层功能块。</p>
<p>**         <em>自下而上设计</em>** ：自底向上的设计是一种传统的设计方法，对设计进行逐次划分的过程是<strong>从存在的基本单元出发的</strong><br>，设计树最末枝上的单元要么是<strong>已经构造出的单元</strong> ，要么是<strong>其他 项目开发好的单元</strong><br>或者是可外购得到的单元。在自底向上建模方法中，我们首先对现有的功能块进行分 析，然后使用这些模块来搭建规模大一些的功能块，如此继续<strong>直至顶层模块</strong> 。</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/7538cc8f96cd3ed8557ff715e102cc35.png"></p>
<h3 id="1-全加器"><a href="#1-全加器" class="headerlink" title="1.全加器"></a>1.全加器</h3><p>&lt;1&gt;实现</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/098c9d43dc2c588dda513c7f86aef146.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/0550049229a1c71c2bf226988dc5403d.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b63e0103ecc4b574df8128798cca2804.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b5d7fc4a027154627993d5a2ea410858.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c81af6a8d1452ff19cb2584c664cb05e.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9212a0f54789e4279e0deb46892893a0.png"></p>
<h2 id="六-避免Latch的产生"><a href="#六-避免Latch的产生" class="headerlink" title="六.避免Latch的产生"></a>六.避免Latch的产生</h2><pre><code>    Latch 其实就是**锁存器** ，是一种在异步电路系统中，对输入信号电平敏感的单元，用来存储信息。锁存器在数据未锁存时，输出端的信号随输入信号变化，就像信号通过一个缓冲器，一旦锁存信号有效，则数据被锁存，输入信号不起作用。因此，锁存器也被称为透明锁存器，指的是不锁存时输出对于输入是透明的。

    在同步电路中 Latch 会产生不好的效果，**如对毛刺敏感** ；不能异步复位，**上电后处于不定态** ；还会让静态时序分析变得十分复杂；在 FPGA 的资源中，大部分器件没有锁存器 这个东西，所以需要用使用寄存器来组成锁存器所以会**占用更多逻辑资源** ；在 ASIC 设计 中，锁存器也会带来**额外的延时和 DFT** ，并不利于提高系统的工作频率，所以要避免产 生。在这里我们把会产生组合逻辑的几种情况列举出来，希望大家以后能够避免出现类似 的问题。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/0c366aa57dc96fc107f7a98134ea541e.png"></p>
<h2 id="七-寄存器"><a href="#七-寄存器" class="headerlink" title="七.寄存器"></a>七.寄存器</h2><pre><code>    时序逻辑最基本的单元就是寄存器， 寄存器具有存储功能，一般是由 **D 触发器构成** ，由时钟脉冲控制，每个 D 触发器（**D Flip Flop ，DFF** ）能够存储一位二进制码。

    我们先给模块取一个名字叫 **flip_flop** ，接下来是分析端口信号：D 触发器能够正常工 作一定有时钟，每当**时钟** 的“沿（上升沿或下降沿）”来到时我们采集到稳定有效的数 据；其次还需要的就是**复位信号** ，用于让触发器的回到初始状态把数据清零；因为是用按 键控制 led 灯的亮灭，所以输入端我们还需要一个按键控制信号；输出就只有一个控制 led 灯的信号，这里我们的输入输出信号都是 1bit 的。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f7cfd9794934a24ebb4c1604bc93ddff.png"></p>
<h3 id="1-同步复位-D-触发器和异步复位-D-触发器"><a href="#1-同步复位-D-触发器和异步复位-D-触发器" class="headerlink" title="1.同步复位 D 触发器和异步复位 D 触发器"></a>1.同步复位 D 触发器和异步复位 D 触发器</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/fb4bca81cfe11f1a319e9269c00fc728.png"><img src="https://i-blog.csdnimg.cn/blog_migrate/a587c62737e05e53796c075785335997.png"></p>
<pre><code>    因为时 序电路只有在沿到来时才检测信号是否有效，所以在两个上升沿之间的毛刺都会被自然的 过滤掉，可以大大减少毛刺现象产生的干扰，提高了电路中数据的可靠性。

    时序电路还有一个特点，就是“**延一拍** ”的效果。上面两个图最左边的一组红色竖线所表达的就是这个现象。key_in 在复位后的第一个时钟的上升沿来到时拉高，我们可以发 现此时 led_out 并**没有在同一时刻也跟着拉高** ，而在之前的组合逻辑中输出是在输入变化的 同一时刻立刻变化的

    因为我们所画的波形图都是基于前仿真的，没有加入**门延时** 的信息，所以很多时候数 据的变化都是和时钟直接对齐的。当表达**时序逻辑时如果时钟和数据是对齐的，则默认当 前时钟沿采集到的数据为在该时钟上升沿前一时刻的值** ；当表达组合逻辑时如果时钟和数据是对齐的，则默认当前时钟沿采集到的数据为在该时钟上升沿同一时刻的值。而仿真工 具在进行 RTL 代码的仿真时也遵循这个规则，我们也可以理解为仿真寄存器是按照**建立时间 Tsu（指触发器的时钟信号上升沿到来以前，数据稳定不变的最小时间）最大（一个时 钟周期），保持时间 Th（指触发器的时钟信号上升沿到来以后，数据稳定不变的最小时 间）最小（为 0）的理想环境下进行的** ；而在仿真组合逻辑时因为没有时钟也就**没有建立时间和保持时间的概念** ，所以数据只要有变化就立刻有效。这里我们在 _**画波形图的时候一 定要记住这个“延一拍”的效果**_ ，否则我们绘制的波形图就会和最后的仿真结果不符，也 可能会导致最后的逻辑混乱。
</code></pre>
<h4 id="同步复位-D-触发器"><a href="#同步复位-D-触发器" class="headerlink" title="&lt;1&gt;同步复位 D 触发器"></a>&lt;1&gt;同步复位 D 触发器</h4><p><img src="https://i-blog.csdnimg.cn/blog_migrate/f0dd282c6d098d42d7ccbd5dcc6a8060.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9a0ef5616d5f85f5cd9134eba3f8b4af.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/19ead2babd57ed1bfbd253080790a2e8.png"></p>
<h4 id="异步复位-D-触发器"><a href="#异步复位-D-触发器" class="headerlink" title="&lt;2&gt;异步复位 D 触发器"></a>&lt;2&gt;异步复位 D 触发器</h4><p><img src="https://i-blog.csdnimg.cn/blog_migrate/8046c5befbf38e5f3597ba0ee3ed4d54.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9b531d4379ea89303cbfd9c4322c8649.png"></p>
<h3 id="2-仿真-3"><a href="#2-仿真-3" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/ce8ccc7525ce5b5d56a6159fc5739653.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/bde02cf87bc7d8048af7109c8740f6fb.png"></p>
<pre><code>    begin...end 是一个串行块在 Testbench 中被使用时其内部的语句是**顺序执行** 的，在本例中，我们多次进行延时，其时间是在之前基础上**叠加** 的，而不是从 0 时 刻开始计算时间。
</code></pre>
<h2 id="八-阻塞赋值与非阻塞赋值"><a href="#八-阻塞赋值与非阻塞赋值" class="headerlink" title="八.阻塞赋值与非阻塞赋值"></a>八.阻塞赋值与非阻塞赋值</h2><pre><code>    阻塞赋值的赋值号用“=”表示。对应的电路结构往往与触发沿没有关系，只与输入电平的变化有关系。阻塞赋值的操作可以认为 是只有一个步骤的操作，即计算赋值号右边的语句并更新赋值号左边的语句，此时不允许 有来自任何其他 Verilog 语句的干扰，直到现行的赋值完成时刻，即把当前赋值号右边的值 赋值给左边的时刻完成后，它才允许下一条的赋值语句的执行。串行块（begin-end）中的各条阻塞型过程赋值语句将以它们在**顺序块后的排列次序依次执行** 。阻塞型过程赋值语句的执行过程是：首先计算赋值号右边的值，然后立即将计算结果赋值给左边，赋值语句结束，变量值立即发生改变。阻塞的概念是指在同一个 always 块中，其后面的赋值语句从概念上是在前一句赋值语句结束后再开始下面的赋值。

   非阻塞赋值的赋值号用“&lt;=”表示。对应的电路结构往往与触发沿有关系，只有在触发沿的时刻才能进行非阻塞赋值。非阻塞操作开始时计算非阻塞赋值符的赋值号右边的语句，赋值操作结束时刻才更新赋值号左 边的语句，可以认为是两个步骤（赋值开始时刻和结束时刻）来完成非阻塞赋值。在计算 非阻塞语句赋值号右边的语句和更新赋值号左边的语句期间，其他的 Verilog 语句包括其他 的 Verilog 非阻塞赋值语句都能同时计算赋值号右边的语句和更新赋值号左边的语句，**允许 其他的 Verilog 语句同时进行操作** 。非阻塞赋值的操作可以看作为两个步骤的过程：在赋值开始时刻，计算赋值号右边的语句。在赋值结束时刻，更新赋值号左边的语句。注意：非阻塞操作只能用于对寄存器类型变量进行赋值，**因此只能用于“initial”和“always”块 中，不允许用于连续赋值“assign”** 。

    **在描述逻辑电路时使用阻塞赋值，在描述时序逻辑电路时要用非阻塞赋值** ，这也 是官方的推荐写法。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/709bad310d63a8fb4530b7384ede5919.png"></p>
<h2 id="九-计数器"><a href="#九-计数器" class="headerlink" title="九.计数器"></a>九.计数器</h2><h3 id="1-实现方法-2"><a href="#1-实现方法-2" class="headerlink" title="1.实现方法"></a>1.实现方法</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/b1b3d9a5fc4da47dfa2eeb409d54cb4a.png"><img src="https://i-blog.csdnimg.cn/blog_migrate/a48c6951f6329e22e97c67b20b033e15.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/dc1c3738464e52a3b09c540e65703e3e.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/13d4617698f497ba37ed751532fd025b.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/193aa0a1d5a6cc8beda043590a0a82e7.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/3b48d646be58e4074fd5758995c1b194.png"></p>
<pre><code>    原理图可以看出由触发器组成的状态机，累加器，选择器等

    通过对比我们可以发现第一种实现方式用了 2 个 always 块，其 RTL 视图分别对应两组 触发器，而第二种实现方式用了 3 个 always 块，其 RTL 视图分别对应了 3 组触发器
</code></pre>
<h3 id="2-仿真-4"><a href="#2-仿真-4" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/6b64737d4cf0b4fb0e5a5ef634392b4e.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4cccccf928ca614d15bdc36b46caf2b3.png"></p>
<h2 id="十-分频器"><a href="#十-分频器" class="headerlink" title="十.分频器"></a>十.分频器</h2><pre><code>    无论分频和倍频，我们都有两种方式可以选择，一种是器件厂商提供的锁相环（PLL，后面章节会讲解），另一种是自己动手来用 Verilog 代码描述。用 Verilog 代码描述的往往是分频电路，即分频器。
</code></pre>
<h3 id="1-偶分频"><a href="#1-偶分频" class="headerlink" title="1.偶分频"></a>1.偶分频</h3><p><strong>方法 1 实现：仅实现分频功能</strong></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f441c1d4aef20817a3875e82ada804c9.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b6e5825667316f9e53a7c78b93238025.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/bb3cb18907d7b8039a8cab21a18b9a46.png"></p>
<p><strong>方法 2 实现： 实用的降频方法</strong></p>
<p>方法一中的 clk_out 输出信号是我们想要的分频后的信号，然后很多同学就直接把这个<br>信号当作新的低频时钟来使用，并实现了自己想要的功能。大家肯定会觉得能够实现功能 就一切 OK 了，而往往忽略了一些隐患的存在，如果你对 FPGA<br>的了解多一些就会理解其 实这是不严谨的做法，这种做法所衍生的潜在问题在低速系统中不易察觉，而在高速系统<br>中就很容易出现问题。因为我们通过这种方式分频得到的时钟虽然表面上是对系统时钟进<br>行了分频产生了一个新的低频时钟，但实际上和真正的时钟信号还是有很大区别的。因为在 FPGA<br>中凡是时钟信号都要连接到全局时钟网络上，<strong>全局时钟网络也称为全局时钟树， 是 FPGA<br>厂商专为时钟路径而特殊设计的，它能够使时钟信号到达每个寄存器的时间都尽 可能相同，以保证更低的时钟偏斜（Skew）和抖动（Jitter）</strong><br>。而我们用这种分频的方式产 生的 clk_out 信号并没有<strong>连接到全局时钟网络</strong> 上，但 sys_clk 则是由外部晶振直接通过管脚 连接到了<br>FPGA 的专用时钟管脚上，自然就会连接到全局时钟网络上，所以在 <strong>sys_clk 时钟 工作下的信号要比在 clk_out<br>时钟工作下的信号更容易在高速系统中保持稳定</strong> ，既然发现了 问题那我们该怎么办呢？这时可不要忘记了上一章中刚学到的 flag 标志信号，这里我们就<br>可以用上了，我们可以产生一个用于标记 6 分频的 clk_flag 标志信号，这样每两 clk_flag 脉 冲之间的频率就是对 sys_clk 时钟信号的<br>6 分频，但是计数器计数的个数我们需增加一些， 如图 17-4 所示需要从 0~5 共 6 个数，否则不能实现 6 分频的功能。和方法 1 对比可以发<br>现，相当于<strong>把 clk_out 的上升沿信号变成了 clk_flag 的脉冲电平信号</strong> （和上一章方法 2 中的 cnt_flag<br>是一样的道理），为后级模块实现相同的降频效果。虽然这样会多使用一些寄存器资源，不过不用担心我们的系统是完全可以承担的起的，而得到的好处却远远大于这点资源的使用，能让系统更加稳定。<img src="https://i-blog.csdnimg.cn/blog_migrate/a4604d25ce110aa5d7fcf14ae08cc6b7.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/de1332e424bc46b895e1e0d63443eacf.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ad6b10f466b0b610deb1f226a1481d6d.png"></p>
<h3 id="2-奇分频"><a href="#2-奇分频" class="headerlink" title="2.奇分频"></a>2.奇分频</h3><p>&lt;1&gt;方法一：分频（两结果或运算）</p>
<p>这里 clk1 和 clk2 都是低电平 2 个时钟周期，高电平 3 个时钟周期，clk1 和 clk2 相与的结果就是 clk_out 的波形。</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d6b290cd161a83a533df103f57c759bc.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c4c0e4274d427c529f6abec8fe8c648b.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/499a0fa7af357d8d9cca522a16524e9c.png"></p>
<p>&lt;2&gt;方法二：降频（同前）</p>
<p>&lt;3&gt;后面的 IP 核章节还会讲解到通过 PLL（Phase Locked Loop，即锁相环）的方法来实现对时钟的任意分频、倍频、相位 移动。</p>
<h2 id="十一-按键消抖"><a href="#十一-按键消抖" class="headerlink" title="十一.按键消抖"></a>十一.按键消抖</h2><h3 id="1-硬件消抖"><a href="#1-硬件消抖" class="headerlink" title="1.硬件消抖"></a>1.硬件消抖</h3><pre><code>    图中两个与非门构成一个 RS 触发器。当按键未按下时，输出为 0；当键按下时， 输出为 1。此时即使用按键的机械性能，使按键因弹性抖动而产生瞬时断开(抖动跳开 B)， 只要按键不返回原始状态 A，双稳态电路的状态不改变，输出保持为 0，不会产生抖动的波形。也就是说，即使 B 点的电压波形是抖动的，但经双稳态电路之后，其输出为正规的矩形波。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c6893b44caf7ec63ddc68714a118b9b4.png"></p>
<h3 id="2-软件消抖"><a href="#2-软件消抖" class="headerlink" title="2.软件消抖"></a>2.软件消抖</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/16ddf72ebb4d584e925a8b26d958cfaa.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8b274eaefe8b17e020a89b2ddfd461a9.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/a5599919d9d77d3ca30d278b89288156.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5a266ef72d4b7f265101a20d9fed74c1.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/056d9b2536446b3eb89583eccfe55204.png"></p>
<h2 id="十二-流水灯"><a href="#十二-流水灯" class="headerlink" title="十二.流水灯"></a>十二.流水灯</h2><h3 id="1-实现-1"><a href="#1-实现-1" class="headerlink" title="1.实现"></a>1.实现</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/be646017aad2b634afd574b313146586.png"></p>
<p>三个计数器、cnt_en使led由暗到亮再由亮到暗</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/6b1bd720cad58a07bb520c880f0b80ac.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ae562916815db1311874ac2adf109bfb.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/dab5caf57215a249ba38d858e47fb211.png"></p>
<p>可用异或简化判断语句</p>
<h3 id="2-仿真-5"><a href="#2-仿真-5" class="headerlink" title="2.仿真"></a>2.仿真</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/68e8473cbba3135dd5d8fc77423e4351.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/093258a351514dd05e83d3cf3d4e8bde.png"></p>
<p>减小三个MAX的值方便仿真观察</p>
<h2 id="十三-状态机"><a href="#十三-状态机" class="headerlink" title="十三.状态机"></a>十三.状态机</h2><pre><code>    **状态机（FSM，Finite State Machine）** ，若最后的输出只和当前状态有关而与输入无关则称为 Moore 型状态机； 若最后的输出不仅和当前状态有关还和输入有关则称为 Mealy 型状态机。

    最原始的状态我们称之为**IDLE** 状态
</code></pre>
<h3 id="1-简易可乐机"><a href="#1-简易可乐机" class="headerlink" title="1.简易可乐机"></a>1.简易可乐机</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/ff4a4f1a879daad7f8bfe49f24fe63b2.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f705ff295f1ea2ea1e088ef15013368c.png"></p>
<pre><code>    上面是一个用 Verilog 描述的简单状态机，我们可以发现它是按照我们总结好的一套格 式来编写的，我们按照这种格式再结合状态转移图可以编写出更复杂的状态机代码，所以 我们总结一下我们套用的格式有哪些主要部分构成：
</code></pre>
<p>其中 01-09 行是端口列表部分；</p>
<p>17-19 行是状态编码部；</p>
<p>22 行是定义的状态变量；</p>
<p>29-49 行是第一段状态机部分；</p>
<p>52-58 是第二段 状态机部分。</p>
<pre><code>    一共有五部分，我们写状态机代码的时候根据这 5 部分对照着状态机依次编写，非常容易的就可以实现。 第一部分：第一部分是端口列表，和之前的设计一样没有什么特殊之处。 第二部分、第三部分：第二部分是状态编码，第三部分是状态变量，这两个是有联系 的，所以放到一起讲解。17-19 行是状态编码，状态转移图中有多少个状态数就需要有多少 个状态编码，这里一共有 3 个状态数，所以就需要 3 个状态编码。22 行是状态变量，这里 为什么状态变量的位宽是 3 呢？因为我们采用了独热码的编码方式，每个状态数只有 1 比 特为 1，其余比特都为 0，所以 3 个状态就要用 3 位宽的变量，如果是 4 个状态那就要用 4 位宽的变量，也就是一共有几个状态数就需要几位宽的状态变量。那么除了用独热码的方 式对状态进行编码，还有其他的方法吗？当然有，我们还可以采用二进制码或格雷码的方式对状态进行编码，上面的例子中如果我们用二进制码编码 3 个状态则为：2’b00， 2’b01，2’b10；而用格雷码编码 3 个状态则为：2’b00，2’b01，2’b11，都只需要 2 位宽的状态变量即可，即便是有 4 个状态数，我们使用 2 位宽的状态变量依然可以解决问题，要比独热码更节省状态变量的位宽个数。

    为什么例子中我们使用的是独热码而非二进制码或格雷码呢？那就要从每种编码的特性上说起了，首先独热码因为每个状态只有 1bit 是不同的，所以在执行到 55 行时的（state == TWO）这条语句时，综合器会识别出这是一个比较器，而因为只有 1 比特为 1，所以综**合器会进行智能优化为（state[2] == 1’b1）** ，这就相当于把之前 3 比特的比较器变为了 **1 比特的比较器** ，大大**节省了组合逻辑资源** ，但是付出的代价就是状态变量的位宽需要的比较多，而我们 FPGA 中组合逻辑资源相对较少，所以比较宝贵，而**寄存器资源较多** ，所以很完美。而二进制编码的情况和独热码刚好相反，他因为使用了较少的状态变量，使之在减 少了寄存器状态的同时无法进行比较器部分的优化，所以使用的寄存器资源较少，而使用 的组合逻辑资源较多，我们还知道 **CPLD 就是一个组合逻辑资源多而寄存器逻辑资源少的器件** ，因为这里我们使用的是 FPGA 器件，所以使用独热码进行编码。就因为这个比较部分的优化，还使得使用**独热码编码的状态机可以在高速系统上运行，其原因是多比特的比 较器每个比特到达比较器的时间可能会因为布局布线的走线长短而导致路径延时的不同， 这样在高速系统下，就会导致采集到不稳定的状态，导致比较后的结果产生一个时钟的毛刺，使输出不稳定，而单比特的比较器就不用考虑这种问题。** 下面是示意图解析。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b075f02dfe393c49623598e5ca2c5a23.png"></p>
<pre><code>    用独热码编码虽然好处多多，但是如果状态数非常多的话即使是 FPGA 也吃不消独热码对寄存器的消耗，所以当**状态数特别多的时候可以使用格雷码对状态进行编码** 。格雷码虽然也是和二进制编码一样使用的寄存器资源少，组合逻辑资源多，但是其相邻状态转换 时**只有一个状态发生翻转，这样不仅能消除状态转换时由多条信号线的传输延迟所造成的毛刺，又可以降低功耗** ，所以要优于二进制码的方式，相当于是独热码和二进制编码的折中。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/992fdf3e38def6dea07b66383225d3c4.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/21e5c11ef610a33d93b404ef205251e3.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/277af51439649f5fd8edd3bea324ba42.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/669f0463e404b28fe73cf0b254d242bd.png"></p>
<pre><code>    第 40 行重新定义了一个 2bit 名为 state 的变量，然后通过在 Testbench 模块中实例化 RTL 模块的名字与“.”定位到 RTL 模块中的信号，如果要引入到 Testbench 模块中的信号是 RTL 模块多层实例化中最底层的信号则需要从顶层的实例化 RTL 模块的名字与“.”依次传递，直到最后定位到内部的信号。这样我们就把**RTL 模块中的内部信号引入到 Testbench 模块中** 了。之所以这样做是因为我们要在 ModelSim 的 “Transcript”界面中打印 RTL 模块中内部信号的信息以方便观察验证，直接实例化 RTL 模块的方式只能够将 **RTL 模块中的端口信号** 引入到 Testbench 模块中，而不能将 RTL 模块 的内部信号引入到 Testbench 模块中，所以无法在 ModelSim 的“Transcript”界面中观察打印的信息。
</code></pre>
<h3 id="2-复杂可乐机"><a href="#2-复杂可乐机" class="headerlink" title="2.复杂可乐机"></a>2.复杂可乐机</h3><pre><code>    输入信号除了可以投 1 元外，还可以投 0.5 元，一次只投一个币；可乐机的输出除了可乐还可能会有找零（找零的结果只有一种即找回 0.5 元），我们将可乐机输出购买可乐的信号取名为 po_cola，找零的信号取名为 po_money。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5300ccd1c590907cd2eef1605876a964.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b8759c5a5b929f36c23f74d72c739fdb.png"></p>
<pre><code>    大家在画状态转移图时容易出现状态跳转情况遗漏的问题，这里我们给大家总结一个 小技巧：我们可以观察到，输入有多少种情况（上一节是两种输入情况，本节是三种输入 情况），每个状态的跳转就有多少种情况（上一节每个状态都有两种跳转情况。这样根据输入来确定状态的跳转就能够保证我们不漏掉任何一 种状态跳转。
</code></pre>
<p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  complex_fsm<br>    (<br>        input   wire    sys_clk         ,   &#x2F;&#x2F;系统时钟50MHz<br>        input   wire    sys_rst_n       ,   &#x2F;&#x2F;全局复位<br>        input   wire    pi_money_one    ,   &#x2F;&#x2F;投币1元<br>        input   wire    pi_money_half   ,   &#x2F;&#x2F;投币0.5元</p>
<pre><code>    output  reg     po_money        ,   //po_money为1时表示找零
                                        //po_money为0时表示不找零
    output  reg     po_cola             //po_cola为1时出可乐
                                        //po_cola为0时不出可乐
);

//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//parameter define
//只有五种状态，使用独热码
parameter   IDLE     = 5&#39;b00001;
parameter   HALF     = 5&#39;b00010;
parameter   ONE      = 5&#39;b00100;
parameter   ONE_HALF = 5&#39;b01000;
parameter   TWO      = 5&#39;b10000;

//reg   define
reg     [4:0]   state;

//wire  define
wire    [1:0]   pi_money;

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//pi_money:为了减少变量的个数，我们用位拼接把输入的两个1bit信号拼接成1个2bit信号
//投币方式可以为：不投币（00）、投0.5元（01）、投1元（10），每次只投一个币
assign pi_money = &#123;pi_money_one, pi_money_half&#125;;

//第一段状态机，描述当前状态state如何根据输入跳转到下一状态
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        state &lt;= IDLE;  //任何情况下只要按复位就回到初始状态
    else	case(state)
                IDLE    : if(pi_money == 2&#39;b01)   //判断一种输入情况
                              state &lt;= HALF;
                          else    if(pi_money == 2&#39;b10)//判断另一种输入情况
                              state &lt;= ONE;
                          else
                              state &lt;= IDLE;
    
                HALF    : if(pi_money == 2&#39;b01)
                              state &lt;= ONE;
                          else    if(pi_money == 2&#39;b10)
                              state &lt;= ONE_HALF;
                          else
                              state &lt;= HALF;
    
                ONE     : if(pi_money == 2&#39;b01)
                              state &lt;= ONE_HALF;
                          else    if(pi_money == 2&#39;b10)
                              state &lt;= TWO;
                          else
                              state &lt;= ONE;
    
                ONE_HALF: if(pi_money == 2&#39;b01)
                              state &lt;= TWO;
                          else    if(pi_money == 2&#39;b10)
                              state &lt;= IDLE;
                          else
                              state &lt;= ONE_HALF;
    
                TWO     : if((pi_money == 2&#39;b01) || (pi_money == 2&#39;b10))
                              state &lt;= IDLE;
                          else
                              state &lt;= TWO;
        //如果状态机跳转到编码的状态之外也回到初始状态
                default :       state &lt;= IDLE;
            endcase

//第二段状态机，描述当前状态state和输入pi_money如何影响po_cola输出
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        po_cola &lt;= 1&#39;b0;
    else    if((state == TWO &amp;&amp; pi_money == 2&#39;b01) || (state == TWO &amp;&amp; 
          pi_money == 2&#39;b10) || (state == ONE_HALF &amp;&amp; pi_money == 2&#39;b10))
        po_cola &lt;= 1&#39;b1;
    else
        po_cola &lt;= 1&#39;b0;

//第二段状态机，描述当前状态state和输入pi_money如何影响po_money输出
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n ==	1&#39;b0)
        po_money &lt;= 1&#39;b0;
    else if((state == TWO) &amp;&amp; (pi_money == 2&#39;b10))
        po_money &lt;= 1&#39;b1;
    else
        po_money &lt;= 1&#39;b0;

endmodule
</code></pre>
<p>​<br>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  tb_complex_fsm();</p>
<pre><code>//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//reg   define
reg         sys_clk;
reg         sys_rst_n;
reg         pi_money_one;
reg         pi_money_half;
reg         random_data_gen;

//wire  define
wire        po_cola;
wire        po_money;

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//初始化系统时钟、全局复位
initial begin
    sys_clk    = 1&#39;b1;
    sys_rst_n &lt;= 1&#39;b0;
    #20
    sys_rst_n &lt;= 1&#39;b1;
end

//sys_clk:模拟系统时钟，每10ns电平翻转一次，周期为20ns，频率为50MHz
always  #10 sys_clk = ~sys_clk;

//random_data_gen:产生非负随机数0、1
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        random_data_gen &lt;= 1&#39;b0;
    else
        random_data_gen &lt;= &#123;$random&#125; % 2;

//pi_money_one:模拟投入1元的情况
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        pi_money_one &lt;= 1&#39;b0;
    else
        pi_money_one &lt;= random_data_gen;

//pi_money_half:模拟投入0.5元的情况
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        pi_money_half &lt;= 1&#39;b0;
    else
    //取反是因为一次只能投一个币，即pi_money_one和pi_money_half不能同时为1
        pi_money_half &lt;= ~random_data_gen;

//------------------------------------------------------------
//将RTL模块中的内部信号引入到Testbench模块中进行观察
wire    [4:0]   state    = complex_fsm_inst.state;
wire    [1:0]   pi_money = complex_fsm_inst.pi_money;

initial begin
    $timeformat(-9, 0, &quot;ns&quot;, 6);
    $monitor(&quot;@time %t: pi_money_one=%b pi_money_half=%b pi_money=%b state=%b po_cola=%b po_money=%b&quot;, $time, pi_money_one, pi_money_half, pi_money, state, po_cola, po_money);
end
//------------------------------------------------------------

//********************************************************************//
//*************************** Instantiation **************************//
//********************************************************************//

//------------------------complex_fsm_inst------------------------
complex_fsm complex_fsm_inst(
    .sys_clk        (sys_clk        ),  //input     sys_clk
    .sys_rst_n      (sys_rst_n      ),  //input     sys_rst_n
    .pi_money_one   (pi_money_one   ),  //input     pi_money_one
    .pi_money_half  (pi_money_half  ),  //input     pi_money_half
                    
    .po_cola        (po_cola        ),  //output    po_money
    .po_money       (po_money       )   //output    po_cola
);  

endmodule
</code></pre>
<h2 id="十四-无源蜂鸣器"><a href="#十四-无源蜂鸣器" class="headerlink" title="十四.无源蜂鸣器"></a>十四.无源蜂鸣器</h2><pre><code>    蜂鸣器按其是否带有震荡源又分为有源蜂鸣器和无源蜂鸣器。有源蜂鸣器的内部装有 集成电路，不需要音频驱动电路，只需要接通直流电源就能直接发出声响。而无源蜂鸣器 只有外加音频驱动信号才能发出声响。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9739916bd01d5da854f10529de7bf04c.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ff8f350fea1cf05ea913f0a2cc20aed0.png"></p>
<pre><code>    这里占空比我们保持为 50%。cnt_500ms：该信号我们定义为蜂鸣器的鸣叫状态计数。由于我们需鸣叫七个音调，所 以我们需要计 7 个数（0~6），而每个音调的鸣叫时间即计数值的持续时间。所以这里我们 需要用一个鸣叫持续时间计数器去控制蜂鸣器各音调的鸣叫持续时间。 cnt：蜂鸣器各音调鸣叫持续时间计数器。在“计数器”章节我们详细的介绍了该如何 用计数器进行时间计数，这里就不详细的介绍了。本次实验我们设计让每个音调持续鸣叫 0.5s，故这里我们计数到 24999999（0.5s）时让鸣叫状态计数器加 1。当最后一个音调 （cnt_500ms = 3’d6）鸣叫了 0.5s 时，我们让状态计数器跳转回第一个音调鸣叫状态 （cnt_500ms = 3’d0），以此循环，我们就能实现蜂鸣器七个基本音调的循环鸣叫了。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5620fa45183aaca2fc841d87809c8010.png"></p>
<pre><code>    首先是音调的频率我们该如何产生？我们先计算该频率单个方波的时间：1 / 262 ≈ 0.003816794s=3816794ns；而我们单个系统时钟（50MHz）的时间为：1 / 50000000 =0.00000002s = 20ns；所以我们需用：3816794 / 20 ≈ 190840 个系统时钟去产生一个 PWM 波，该 PWM 波形的频率即为 262。故我们需先对 190840 个系统时钟进行计数，这里我们 声明 freq_cnt 信号进行计数。
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/efc4721fe989ceadb077cfa024b628d1.png"></p>
<p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  beep<br>    #(<br>        parameter   TIME_500MS &#x3D;   25’d24999999,   &#x2F;&#x2F;0.5s计数值<br>        parameter   DO  &#x3D;   18’d190839 ,   &#x2F;&#x2F;“哆”音调分频计数值（频率262）<br>        parameter   RE  &#x3D;   18’d170067 ,   &#x2F;&#x2F;“来”音调分频计数值（频率294）<br>        parameter   MI  &#x3D;   18’d151514 ,   &#x2F;&#x2F;“咪”音调分频计数值（频率330）<br>        parameter   FA  &#x3D;   18’d143265 ,   &#x2F;&#x2F;“发”音调分频计数值（频率349）<br>        parameter   SO  &#x3D;   18’d127550 ,   &#x2F;&#x2F;“梭”音调分频计数值（频率392）<br>        parameter   LA  &#x3D;   18’d113635 ,   &#x2F;&#x2F;“拉”音调分频计数值（频率440）<br>        parameter   XI  &#x3D;   18’d101214     &#x2F;&#x2F;“西”音调分频计数值（频率494）<br>    )<br>    (<br>        input   wire        sys_clk     ,   &#x2F;&#x2F;系统时钟,频率50MHz<br>        input   wire        sys_rst_n   ,   &#x2F;&#x2F;系统复位，低有效</p>
<pre><code>    output  reg         beep            //输出蜂鸣器控制信号
);

//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//reg   define
reg     [24:0]  cnt         ;   //0.5s计数器
reg     [17:0]  freq_cnt    ;   //音调计数器
reg     [2:0]   cnt_500ms   ;   //0.5s个数计数
reg     [17:0]  freq_data   ;   //音调分频计数值

//wire  define
wire    [16:0]  duty_data   ;   //占空比计数值

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//设置50％占空比：音阶分频计数值的一半即为占空比的高电平数
assign  duty_data   =   freq_data   &gt;&gt;    1&#39;b1;

//cnt:0.5s循环计数器
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt &lt;=  25&#39;d0;
    else    if(cnt == TIME_500MS )
        cnt &lt;=   25&#39;d0;
    else
        cnt &lt;=  cnt +   1&#39;b1;

//cnt_500ms：对500ms个数进行计数，每个音阶鸣叫时间0.5s，7个音节一循环
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_500ms   &lt;=  3&#39;d0;
    else    if(cnt == TIME_500MS &amp;&amp; cnt_500ms ==  6)
        cnt_500ms   &lt;=  3&#39;d0;
    else    if(cnt == TIME_500MS)
        cnt_500ms   &lt;=  cnt_500ms + 1&#39;b1;

//不同时间鸣叫不同的音阶
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        freq_data   &lt;=  DO;
    else    case(cnt_500ms)
        0:  freq_data   &lt;=   DO;
        1:  freq_data   &lt;=   RE;
        2:  freq_data   &lt;=   MI;
        3:  freq_data   &lt;=   FA;
        4:  freq_data   &lt;=   SO;
        5:  freq_data   &lt;=   LA;
        6:  freq_data   &lt;=   XI;
        default:  freq_data   &lt;=   DO;
    endcase

//freq_cnt：当计数到音阶计数值或跳转到下一音阶时，开始重新计数
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        freq_cnt    &lt;=  18&#39;d0;
    else    if(freq_cnt == freq_data || cnt == TIME_500MS)
        freq_cnt    &lt;=  18&#39;d0;
    else
        freq_cnt    &lt;=  freq_cnt +  1&#39;b1;

//beep：输出蜂鸣器波形
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        beep    &lt;=  1&#39;b0;
    else    if(freq_cnt &gt;= duty_data)
        beep    &lt;=  1&#39;b1;
    else
        beep    &lt;=  1&#39;b0;

endmodule
</code></pre>
<p>​<br>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  tb_beep();</p>
<pre><code>//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//reg   define
reg     sys_clk     ;   //时钟
reg     sys_rst_n   ;   //复位

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//对时钟，复位信号赋初值
initial
    begin
        sys_clk     =   1&#39;b1;
        sys_rst_n   &lt;=  1&#39;b0;
        #100
        sys_rst_n   &lt;=  1&#39;b1;
    end

//产生时钟信号
always #10 sys_clk =   ~sys_clk;

//********************************************************************//
//*************************** Instantiation **************************//
//********************************************************************//

beep
#(
    .TIME_500MS(25&#39;d2499 ),   //0.5s计数值
    .DO        (18&#39;d190  ),   //&quot;哆&quot;音调分频计数值（频率262）
    .RE        (18&#39;d170  ),   //&quot;来&quot;音调分频计数值（频率294）
    .MI        (18&#39;d151  ),   //&quot;咪&quot;音调分频计数值（频率330）
    .FA        (18&#39;d143  ),   //&quot;发&quot;音调分频计数值（频率349）
    .SO        (18&#39;d127  ),   //&quot;梭&quot;音调分频计数值（频率392）
    .LA        (18&#39;d113  ),   //&quot;拉&quot;音调分频计数值（频率440）
    .XI        (18&#39;d101  )    //&quot;西&quot;音调分频计数值（频率494）
)
beep_inst
(
    .sys_clk     (sys_clk   ),   //系统时钟,频率50MHz
    .sys_rst_n   (sys_rst_n ),   //系统复位，低有效

    .beep        (beep      )    //输出蜂鸣器控制信号
);

endmodule
</code></pre>
<h2 id="十五-动态数码管显示"><a href="#十五-动态数码管显示" class="headerlink" title="十五.动态数码管显示"></a>十五.动态数码管显示</h2><p>让六位数码管显示从十进制数 0 开始计数，每 0.1s 加 1，一直到加到十进制数 999999。到达 999999 之后回到 0 开始重新计数。</p>
<h3 id="1-实现-2"><a href="#1-实现-2" class="headerlink" title="1.实现"></a>1.实现</h3><p><img src="https://i-blog.csdnimg.cn/blog_migrate/2cbae469f08cf53fc9d5f56e3059bb4f.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/696166e97ce5d3b1a2be055ac6dc925c.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b28c0e71220e72cd013719c820965bed.png"></p>
<h4 id="data-gen"><a href="#data-gen" class="headerlink" title="&lt;1&gt;data_gen"></a>&lt;1&gt;data_gen</h4><pre><code>    生成0-999999的计数值，用20位二进制表示。bcd_8421生成6位十进制8421码。再转化成相应段码。
</code></pre>
<p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  data_gen<br>    #(<br>        parameter   CNT_MAX &#x3D; 23’d4999_999, &#x2F;&#x2F;100ms计数值<br>        parameter   DATA_MAX&#x3D; 20’d999_999   &#x2F;&#x2F;显示的最大值<br>    )<br>    (<br>        input   wire            sys_clk     ,   &#x2F;&#x2F;系统时钟，频率50MHz<br>        input   wire            sys_rst_n   ,   &#x2F;&#x2F;复位信号，低电平有效</p>
<pre><code>    output  reg     [19:0]  data        ,   //数码管要显示的值
    output  wire    [5:0]   point       ,   //小数点显示,高电平有效
    output  reg             seg_en      ,   //数码管使能信号，高电平有效
    output  wire            sign            //符号位，高电平显示负号
);

//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//reg   define
reg     [22:0]  cnt_100ms   ;   //100ms计数器
reg             cnt_flag    ;   //100ms标志信号

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//不显示小数点以及负数
assign  point   =   6&#39;b000_000;
assign  sign    =   1&#39;b0;

//cnt_100ms:用50MHz时钟从0到4999_999计数即为100ms
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_100ms   &lt;=  23&#39;d0;
    else    if(cnt_100ms == CNT_MAX)
        cnt_100ms   &lt;=  23&#39;d0;
    else
        cnt_100ms   &lt;=  cnt_100ms + 1&#39;b1;

//cnt_flag:每100ms产生一个标志信号
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_flag    &lt;=  1&#39;b0;
    else    if(cnt_100ms == CNT_MAX - 1&#39;b1)
        cnt_flag    &lt;=  1&#39;b1;
    else
        cnt_flag    &lt;=  1&#39;b0;

//数码管显示的数据:0-999_999
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        data    &lt;=  20&#39;d0;
    else    if((data == DATA_MAX) &amp;&amp; (cnt_flag == 1&#39;b1))
        data    &lt;=  20&#39;d0;
    else    if(cnt_flag == 1&#39;b1)
        data    &lt;=  data + 1&#39;b1;
    else
        data    &lt;=  data;

//数码管使能信号给高即可
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        seg_en  &lt;=  1&#39;b0;
    else
        seg_en  &lt;=  1&#39;b1;

endmodule
</code></pre>
<h4 id="bcd-8421"><a href="#bcd-8421" class="headerlink" title="&lt;2&gt;bcd_8421"></a>&lt;2&gt;bcd_8421</h4><p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  bcd_8421<br>    (<br>        input   wire            sys_clk     ,   &#x2F;&#x2F;系统时钟，频率50MHz<br>        input   wire            sys_rst_n   ,   &#x2F;&#x2F;复位信号，低电平有效<br>        input   wire    [19:0]  data        ,   &#x2F;&#x2F;输入需要转换的数据</p>
<pre><code>    output  reg     [3:0]   unit        ,   //个位BCD码
    output  reg     [3:0]   ten         ,   //十位BCD码
    output  reg     [3:0]   hun         ,   //百位BCD码
    output  reg     [3:0]   tho         ,   //千位BCD码
    output  reg     [3:0]   t_tho       ,   //万位BCD码
    output  reg     [3:0]   h_hun           //十万位BCD码
);

//********************************************************************//
//******************** Parameter And Internal Signal *****************//
//********************************************************************//

//reg   define
reg     [4:0]   cnt_shift   ;   //移位判断计数器
reg     [43:0]  data_shift  ;   //移位判断数据寄存器
reg             shift_flag  ;   //移位判断标志信号

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//cnt_shift:从0到21循环计数
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_shift   &lt;=  5&#39;d0;
    else    if((cnt_shift == 5&#39;d21) &amp;&amp; (shift_flag == 1&#39;b1))
        cnt_shift   &lt;=  5&#39;d0;
    else    if(shift_flag == 1&#39;b1)
        cnt_shift   &lt;=  cnt_shift + 1&#39;b1;
    else
        cnt_shift   &lt;=  cnt_shift;
       
//data_shift：计数器为0时赋初值，计数器为1~20时进行移位判断操作
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        data_shift  &lt;=  44&#39;b0;
    else    if(cnt_shift == 5&#39;d0)
        data_shift  &lt;=  &#123;24&#39;b0,data&#125;;
    else    if((cnt_shift &lt;= 20) &amp;&amp; (shift_flag == 1&#39;b0))
        begin
            data_shift[23:20]   &lt;=  (data_shift[23:20] &gt; 4) ? (data_shift[23:20] + 2&#39;d3) : (data_shift[23:20]);
            data_shift[27:24]   &lt;=  (data_shift[27:24] &gt; 4) ? (data_shift[27:24] + 2&#39;d3) : (data_shift[27:24]);
            data_shift[31:28]   &lt;=  (data_shift[31:28] &gt; 4) ? (data_shift[31:28] + 2&#39;d3) : (data_shift[31:28]);
            data_shift[35:32]   &lt;=  (data_shift[35:32] &gt; 4) ? (data_shift[35:32] + 2&#39;d3) : (data_shift[35:32]);
            data_shift[39:36]   &lt;=  (data_shift[39:36] &gt; 4) ? (data_shift[39:36] + 2&#39;d3) : (data_shift[39:36]);
            data_shift[43:40]   &lt;=  (data_shift[43:40] &gt; 4) ? (data_shift[43:40] + 2&#39;d3) : (data_shift[43:40]);
        end
    else    if((cnt_shift &lt;= 20) &amp;&amp; (shift_flag == 1&#39;b1))
        data_shift  &lt;=  data_shift &lt;&lt; 1;
    else
        data_shift  &lt;=  data_shift;

//shift_flag：移位判断标志信号，用于控制移位判断的先后顺序
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        shift_flag  &lt;=  1&#39;b0;
    else
        shift_flag  &lt;=  ~shift_flag;

//当计数器等于20时，移位判断操作完成，对各个位数的BCD码进行赋值
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        begin
            unit    &lt;=  4&#39;b0;
            ten     &lt;=  4&#39;b0;
            hun     &lt;=  4&#39;b0;
            tho     &lt;=  4&#39;b0;
            t_tho   &lt;=  4&#39;b0;
            h_hun   &lt;=  4&#39;b0;
        end
    else    if(cnt_shift == 5&#39;d21)
        begin
            unit    &lt;=  data_shift[23:20];
            ten     &lt;=  data_shift[27:24];
            hun     &lt;=  data_shift[31:28];
            tho     &lt;=  data_shift[35:32];
            t_tho   &lt;=  data_shift[39:36];
            h_hun   &lt;=  data_shift[43:40];
        end

endmodule
</code></pre>
<p> BCD码分类：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/6bbbe960d9a46469be4d41b77fe63590.png"></p>
<p> BCD码转换原理：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ce08eac2cbdaba2d66e7242c75655e6e.png"></p>
<pre><code>    如上图所示，十进制数 234 其对应的二进制数为 1110_1010，首先第一步我们在其前面补上若干个 0，这里我们就需要 12 位 BCD 码，故我们就在前面补 12 个 0。 **第二步我们需要进行判断运算移位操作，首先判断每一个 BCD 码其对应的十进制数是否大于 4，如果大于 4 就对 BCD 码做加 3 操作，若小于等于 4 就让其值保持不变** 。当对每 一个 BCD 码进行判断运算后，都需要将运算后的数据像左移 1 位。移完位后我们仍按前面所述进行判断运算，判断运算后需再次移位，以此循环，当我们进行 8 次判断移位后的BCD 码部分数据就是我们转换的数据。这里需要注意的是我们**输入转换的二进制码有多少位我们就需要进行多少次判断移位操作** ，这里输入的是 8 位二进制，我们就进行 8 次判断移位操作。 
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f2782237565cfc547af71d1efbb7664d.png"></p>
<pre><code>    cnt_shift：移位判断计数器，前面我们说到我们输入转换的二进制码有多少位我们就需要进行多少次判断移位操作，这里我们 data 数据的位宽为 20 位，所以这里我们声明移位判断计数器对移位 20 次进行判断控制。

    data_shift：移位判断数据寄存器，该寄存器用于存储移位判断操作过程中的数据，这里我们输入的二进制位宽为 20 位，待转换成的 BCD 码位宽为 24 位，所以这里我们声明该 寄存器的位宽为输入的二进制位宽和待转换完成的 BCD 码位宽之和，即 44 位。根据波形 图可知，这里我们设计当移位计数器等于 0 时寄存器的低 20 位即为待转换数据，而由于还 没开始进行转换，高 24 位的 BCD 码我们补 0 即可。

    shift_flag：移位判断操作标志信号。前面说到我们需要对数据进行移位和判断，判断在前移位在后，所以这里我们声明一个标志信号，用于控制判断和移位的先后顺序，**当 shift_flag 为低时对数据进行判断，当 shift_flag 为高时对数据进行移位** 。需要注意的是无论 是移位操作和判断操作都是在单个系统时钟下完成的，故我们判断 20 次移位 20 次在 40 个 系统时钟内就能完成。 
</code></pre>
<h4 id="seg-dynamic"><a href="#seg-dynamic" class="headerlink" title="&lt;3&gt; seg_dynamic"></a>&lt;3&gt; seg_dynamic</h4><p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  seg_dynamic<br>    (<br>        input   wire            sys_clk     , &#x2F;&#x2F;系统时钟，频率50MHz<br>        input   wire            sys_rst_n   , &#x2F;&#x2F;复位信号，低有效<br>        input   wire    [19:0]  data        , &#x2F;&#x2F;数码管要显示的值<br>        input   wire    [5:0]   point       , &#x2F;&#x2F;小数点显示,高电平有效<br>        input   wire            seg_en      , &#x2F;&#x2F;数码管使能信号，高电平有效<br>        input   wire            sign        , &#x2F;&#x2F;符号位，高电平显示负号</p>
<pre><code>    output  reg     [5:0]   sel         , //数码管位选信号
    output  reg     [7:0]   seg           //数码管段选信号
);

//********************************************************************//
//****************** Parameter and Internal Signal *******************//
//********************************************************************//

//parameter define
parameter   CNT_MAX =   16&#39;d49_999;  //数码管刷新时间计数最大值 1ms

//wire  define
wire    [3:0]   unit        ;   //个位数
wire    [3:0]   ten         ;   //十位数
wire    [3:0]   hun         ;   //百位数
wire    [3:0]   tho         ;   //千位数
wire    [3:0]   t_tho       ;   //万位数
wire    [3:0]   h_hun       ;   //十万位数

//reg   define
reg     [23:0]  data_reg    ;   //待显示数据寄存器
reg     [15:0]  cnt_1ms     ;   //1ms计数器
reg             flag_1ms    ;   //1ms标志信号
reg     [2:0]   cnt_sel     ;   //数码管位选计数器
reg     [5:0]   sel_reg     ;   //位选信号
reg     [3:0]   data_disp   ;   //当前数码管显示的数据
reg             dot_disp    ;   //当前数码管显示的小数点

//********************************************************************//
//***************************** Main Code ****************************//
//********************************************************************//

//data_reg：控制数码管显示数据
 always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        data_reg    &lt;=  24&#39;b0;
//若显示的十进制数的十万位为非零数据或需显示小数点，则六个数码管全显示
    else    if((h_hun) || (point[5]))
        data_reg    &lt;=  &#123;h_hun,t_tho,tho,hun,ten,unit&#125;;
//若显示的十进制数的万位为非零数据或需显示小数点，则值显示在5个数码管上
//打比方我们输入的十进制数据为20’d12345，我们就让数码管显示12345而不是012345
    else    if(((t_tho) || (point[4])) &amp;&amp; (sign == 1&#39;b1))//显示负号
        data_reg &lt;= &#123;4&#39;d10,t_tho,tho,hun,ten,unit&#125;;//4&#39;d10我们定义为显示负号
    else    if(((t_tho) || (point[4])) &amp;&amp; (sign == 1&#39;b0))
        data_reg &lt;= &#123;4&#39;d11,t_tho,tho,hun,ten,unit&#125;;//4&#39;d11我们定义为不显示
//若显示的十进制数的千位为非零数据或需显示小数点，则值显示4个数码管
    else    if(((tho) || (point[3])) &amp;&amp; (sign == 1&#39;b1))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d10,tho,hun,ten,unit&#125;;
    else    if(((tho) || (point[3])) &amp;&amp; (sign == 1&#39;b0))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,tho,hun,ten,unit&#125;;
//若显示的十进制数的百位为非零数据或需显示小数点，则值显示3个数码管
    else    if(((hun) || (point[2])) &amp;&amp; (sign == 1&#39;b1))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d10,hun,ten,unit&#125;;
    else    if(((hun) || (point[2])) &amp;&amp; (sign == 1&#39;b0))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d11,hun,ten,unit&#125;;
//若显示的十进制数的十位为非零数据或需显示小数点，则值显示2个数码管
    else    if(((ten) || (point[1])) &amp;&amp; (sign == 1&#39;b1))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d10,ten,unit&#125;;
    else    if(((ten) || (point[1])) &amp;&amp; (sign == 1&#39;b0))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d11,ten,unit&#125;;
//若显示的十进制数的个位且需显示负号
    else    if(((unit) || (point[0])) &amp;&amp; (sign == 1&#39;b1))
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d10,unit&#125;;
//若上面都不满足都只显示一位数码管
    else
        data_reg &lt;= &#123;4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d11,4&#39;d11,unit&#125;;

//cnt_1ms:1ms循环计数
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_1ms &lt;=  16&#39;d0;
    else    if(cnt_1ms == CNT_MAX)
        cnt_1ms &lt;=  16&#39;d0;
    else
        cnt_1ms &lt;=  cnt_1ms + 1&#39;b1;

//flag_1ms:1ms标志信号
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        flag_1ms    &lt;=  1&#39;b0;
    else    if(cnt_1ms == CNT_MAX - 1&#39;b1)
        flag_1ms    &lt;=  1&#39;b1;
    else
        flag_1ms    &lt;=  1&#39;b0;

//cnt_sel：从0到5循环数，用于选择当前显示的数码管
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        cnt_sel &lt;=  3&#39;d0;
    else    if((cnt_sel == 3&#39;d5) &amp;&amp; (flag_1ms == 1&#39;b1))
        cnt_sel &lt;=  3&#39;d0;
    else    if(flag_1ms == 1&#39;b1)
        cnt_sel &lt;=  cnt_sel + 1&#39;b1;
    else
        cnt_sel &lt;=  cnt_sel;

//数码管位选信号寄存器
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        sel_reg &lt;=  6&#39;b000_000;
    else    if((cnt_sel == 3&#39;d0) &amp;&amp; (flag_1ms == 1&#39;b1))
        sel_reg &lt;=  6&#39;b000_001;
    else    if(flag_1ms == 1&#39;b1)
        sel_reg &lt;=  sel_reg &lt;&lt; 1;
    else
        sel_reg &lt;=  sel_reg;

//控制数码管的位选信号，使六个数码管轮流显示
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        data_disp    &lt;=  4&#39;b0;
    else    if((seg_en == 1&#39;b1) &amp;&amp; (flag_1ms == 1&#39;b1))
        case(cnt_sel)
        3&#39;d0:   data_disp    &lt;=  data_reg[3:0]  ;  //给第1个数码管赋个位值
        3&#39;d1:   data_disp    &lt;=  data_reg[7:4]  ;  //给第2个数码管赋十位值
        3&#39;d2:   data_disp    &lt;=  data_reg[11:8] ;  //给第3个数码管赋百位值
        3&#39;d3:   data_disp    &lt;=  data_reg[15:12];  //给第4个数码管赋千位值
        3&#39;d4:   data_disp    &lt;=  data_reg[19:16];  //给第5个数码管赋万位值
        3&#39;d5:   data_disp    &lt;=  data_reg[23:20];  //给第6个数码管赋十万位值
        default:data_disp    &lt;=  4&#39;b0        ;
        endcase
    else
        data_disp   &lt;=  data_disp;

//dot_disp：小数点低电平点亮，需对小数点有效信号取反
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        dot_disp    &lt;=  1&#39;b1;
    else    if(flag_1ms == 1&#39;b1)
        dot_disp    &lt;=  ~point[cnt_sel];
    else
        dot_disp    &lt;=  dot_disp;

//控制数码管段选信号，显示数字
always@(posedge sys_clk or  negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        seg &lt;=  8&#39;b1111_1111;
    else    
        case(data_disp)
            4&#39;d0  : seg  &lt;=  &#123;dot_disp,7&#39;b100_0000&#125;;    //显示数字0
            4&#39;d1  : seg  &lt;=  &#123;dot_disp,7&#39;b111_1001&#125;;    //显示数字1
            4&#39;d2  : seg  &lt;=  &#123;dot_disp,7&#39;b010_0100&#125;;    //显示数字2
            4&#39;d3  : seg  &lt;=  &#123;dot_disp,7&#39;b011_0000&#125;;    //显示数字3
            4&#39;d4  : seg  &lt;=  &#123;dot_disp,7&#39;b001_1001&#125;;    //显示数字4
            4&#39;d5  : seg  &lt;=  &#123;dot_disp,7&#39;b001_0010&#125;;    //显示数字5
            4&#39;d6  : seg  &lt;=  &#123;dot_disp,7&#39;b000_0010&#125;;    //显示数字6
            4&#39;d7  : seg  &lt;=  &#123;dot_disp,7&#39;b111_1000&#125;;    //显示数字7
            4&#39;d8  : seg  &lt;=  &#123;dot_disp,7&#39;b000_0000&#125;;    //显示数字8
            4&#39;d9  : seg  &lt;=  &#123;dot_disp,7&#39;b001_0000&#125;;    //显示数字9
            4&#39;d10 : seg  &lt;=  8&#39;b1011_1111          ;    //显示负号
            4&#39;d11 : seg  &lt;=  8&#39;b1111_1111          ;    //不显示任何字符
            default:seg  &lt;=  8&#39;b1100_0000;
        endcase

//sel:数码管位选信号赋值
always@(posedge sys_clk or negedge sys_rst_n)
    if(sys_rst_n == 1&#39;b0)
        sel &lt;=  6&#39;b000_000;
    else
        sel &lt;=  sel_reg;

//********************************************************************//
//*************************** Instantiation **************************//
//********************************************************************//

//---------- bsd_8421_inst ----------
bcd_8421    bcd_8421_inst
(
    .sys_clk     (sys_clk  ),   //系统时钟，频率50MHz
    .sys_rst_n   (sys_rst_n),   //复位信号，低电平有效
    .data        (data     ),   //输入需要转换的数据

    .unit        (unit     ),   //个位BCD码
    .ten         (ten      ),   //十位BCD码
    .hun         (hun      ),   //百位BCD码
    .tho         (tho      ),   //千位BCD码
    .t_tho       (t_tho    ),   //万位BCD码
    .h_hun       (h_hun    )    //十万位BCD码
);

endmodule
</code></pre>
<h4 id="top-seg-dynamic"><a href="#top-seg-dynamic" class="headerlink" title="&lt;4&gt;top_seg_dynamic"></a>&lt;4&gt;top_seg_dynamic</h4><p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    module  top_seg_dynamic<br>    (<br>        input   wire            sys_clk     ,   &#x2F;&#x2F;系统时钟，频率50MHz<br>        input   wire            sys_rst_n   ,   &#x2F;&#x2F;复位信号，低电平有效</p>
<pre><code>    output  wire    [5:0]   sel         ,   //数码管位选信号
    output  wire    [7:0]   seg             //数码管段选信号
);

//********************************************************************//
//******************** Parameter And Internal Signal *****************//
//********************************************************************//
//wire  define
wire    [19:0]  data    ;   //数码管要显示的值
wire    [5:0]   point   ;   //小数点显示,高电平有效top_seg_595
wire            seg_en  ;   //数码管使能信号，高电平有效
wire            sign    ;   //符号位，高电平显示负号

//********************************************************************//
//**************************** Main Code *****************************//
//********************************************************************//
//-------------data_gen_inst--------------
data_gen    data_gen_inst
(
    .sys_clk     (sys_clk  ),   //系统时钟，频率50MHz
    .sys_rst_n   (sys_rst_n),   //复位信号，低电平有效
    
    .data        (data     ),   //数码管要显示的值
    .point       (point    ),   //小数点显示,高电平有效
    .seg_en      (seg_en   ),   //数码管使能信号，高电平有效
    .sign        (sign     )    //符号位，高电平显示负号
);

//-------------seg7_dynamic_inst--------------

seg_dynamic seg_dynamic_inst
(
    .sys_clk     (sys_clk  ),   //系统时钟，频率50MHz
    .sys_rst_n   (sys_rst_n),   //复位信号，低有效
    .data        (data     ),   //数码管要显示的值
    .point       (point    ),   //小数点显示,高电平有效
    .seg_en      (seg_en   ),   //数码管使能信号，高电平有效
    .sign        (sign     ),   //符号位，高电平显示负号

    .sel         (sel      ),   //数码管位选信号
    .seg         (seg      )    //数码管段选信号

);

endmodule
</code></pre>
<h3 id="2-仿真-6"><a href="#2-仿真-6" class="headerlink" title="2.仿真"></a>2.仿真</h3><p>​<br>​    &#96;timescale  1ns&#x2F;1ns<br>​<br>    &#x2F;&#x2F; Author  : EmbedFire<br>    &#x2F;&#x2F; 实验平台: 野火FPGA系列开发板<br>    &#x2F;&#x2F; 公司    : <a target="_blank" rel="noopener" href="http://www.embedfire.com/">http://www.embedfire.com</a><br>    &#x2F;&#x2F; 论坛    : <a target="_blank" rel="noopener" href="http://www.firebbs.cn/">http://www.firebbs.cn</a><br>    &#x2F;&#x2F; 淘宝    : <a target="_blank" rel="noopener" href="https://fire-stm32.taobao.com/">https://fire-stm32.taobao.com</a></p>
<p>​<br>​    module  tb_top_seg_dynamic();<br>​<br>    &#x2F;&#x2F;********************************************************************&#x2F;&#x2F;<br>    &#x2F;&#x2F;****************** Parameter and Internal Signal *******************&#x2F;&#x2F;<br>    &#x2F;&#x2F;********************************************************************&#x2F;&#x2F;<br>    &#x2F;&#x2F;wire  define<br>    wire    sel    ;   &#x2F;&#x2F;数码管位选信号<br>    wire    seg    ;   &#x2F;&#x2F;数码管段选信号</p>
<p>​<br>​    &#x2F;&#x2F;reg   define<br>​    reg     sys_clk     ;<br>​    reg     sys_rst_n   ;<br>​<br>    &#x2F;&#x2F;<em><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><em><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>&#x2F;&#x2F;<br>    &#x2F;&#x2F;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></em> Main Code <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>&#x2F;&#x2F;<br>    &#x2F;&#x2F;</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></em>*&#x2F;&#x2F;</p>
<pre><code>//对sys_clk,sys_rst_n赋初始值
initial
    begin
        sys_clk     =   1&#39;b1;
        sys_rst_n   &lt;=  1&#39;b0;
        #100
        sys_rst_n   &lt;=  1&#39;b1;
    end

//clk:产生时钟
always  #10 sys_clk &lt;=  ~sys_clk;

//重新定义参数值，缩短仿真时间
defparam  top_seg_dynamic_inst.seg_dynamic_inst.CNT_MAX =    9;
defparam  top_seg_dynamic_inst.data_gen_inst.CNT_MAX    =  239;

//********************************************************************//
//*************************** Instantiation **************************//
//********************************************************************//
//------------- seg_595_static_inst -------------
top_seg_dynamic  top_seg_dynamic_inst
(
    .sys_clk     (sys_clk   ),  //系统时钟，频率50MHz
    .sys_rst_n   (sys_rst_n ),  //复位信号，低电平有效

    .sel         (sel       ),  //串行数据输入
    .seg         (seg       )   //输出使能信号
);

endmodule
</code></pre>
<p>本文转自 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/132314807">https://blog.csdn.net/qq_32971095/article/details/132314807</a>，如有侵权，请联系删除。</p>

    </div>

    
    
    

    
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:36px;">---THE END---</div>
    
</div>
      </div>
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>SWQ
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://xidianswq.github.io/2023/08/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(3)%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1%E4%B8%80/" title="基础设计一——FPGA学习笔记＜2＞">https://xidianswq.github.io/2023/08/16/学习笔记/FPGA学习笔记(3)——基础设计一/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/fpga%E5%BC%80%E5%8F%91/" rel="tag"># fpga开发</a>
              <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%A1%AC%E4%BB%B6/" rel="tag"># 嵌入式硬件</a>
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"># 学习笔记</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/08/15/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(2)%E2%80%94%E2%80%94HDL%E8%AF%AD%E6%B3%95/" rel="prev" title="HDL语法——FPGA学习笔记＜1＞">
      <i class="fa fa-chevron-left"></i> HDL语法——FPGA学习笔记＜1＞
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/08/17/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/" rel="next" title="项目管理概述">
      项目管理概述 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%B6-%E8%AE%BE%E8%AE%A1%E6%B5%81%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">零.设计流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80-%E6%8C%89%E9%94%AE%E7%82%B9%E4%BA%AELED%E7%81%AF"><span class="nav-number">2.</span> <span class="nav-text">一.按键点亮LED灯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%A1%AC%E4%BB%B6%E8%B5%84%E6%BA%90"><span class="nav-number">2.1.</span> <span class="nav-text">1.硬件资源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.2.</span> <span class="nav-text">2.项目设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%B3%A2%E5%BD%A2%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.3.</span> <span class="nav-text">3.波形设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">2.4.</span> <span class="nav-text"></span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%AE%BE%E8%AE%A1%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.1.</span> <span class="nav-text">&lt;1&gt;添加设计文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%BB%BF%E7%9C%9F%E6%96%87%E4%BB%B6"><span class="nav-number">2.4.2.</span> <span class="nav-text">&lt;2&gt;添加仿真文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%BC%95%E8%84%9A%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.5.</span> <span class="nav-text">5.引脚约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E7%94%9F%E6%88%90%E6%AF%94%E7%89%B9%E6%B5%81%E6%96%87%E4%BB%B6"><span class="nav-number">2.6.</span> <span class="nav-text">6.生成比特流文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E4%B8%8B%E8%BD%BD%E9%AA%8C%E8%AF%81"><span class="nav-number">2.7.</span> <span class="nav-text">7.下载验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E7%A8%8B%E5%BA%8F%E5%9B%BA%E5%8C%96"><span class="nav-number">2.8.</span> <span class="nav-text">8.程序固化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C-%E5%A4%9A%E8%B7%AF%E9%80%89%E6%8B%A9%E5%99%A8"><span class="nav-number">3.</span> <span class="nav-text">二.多路选择器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.</span> <span class="nav-text">1.实现方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#always-%E4%B8%AD-if-else-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.1.</span> <span class="nav-text">&lt;1&gt;always 中 if-else 实现方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#always-%E4%B8%AD-case"><span class="nav-number">3.1.2.</span> <span class="nav-text">&lt;2&gt;always 中 case</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#assign-%E4%B8%AD%E6%9D%A1%E4%BB%B6%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88%E4%B8%89%E5%85%83%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%89%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.3.</span> <span class="nav-text">&lt;3&gt;assign 中条件运算符（三元运算符）实现方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F"><span class="nav-number">3.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89-%E8%AF%91%E7%A0%81%E5%99%A8"><span class="nav-number">4.</span> <span class="nav-text">三.译码器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-1"><span class="nav-number">4.1.</span> <span class="nav-text">1.实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-1"><span class="nav-number">4.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B-%E5%8D%8A%E5%8A%A0%E5%99%A8"><span class="nav-number">5.</span> <span class="nav-text">四.半加器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0"><span class="nav-number">5.1.</span> <span class="nav-text">1.实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-2"><span class="nav-number">5.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94-%E5%B1%82%E6%AC%A1%E5%8C%96%E8%AE%BE%E8%AE%A1"><span class="nav-number">6.</span> <span class="nav-text">五.层次化设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%A8%E5%8A%A0%E5%99%A8"><span class="nav-number">6.1.</span> <span class="nav-text">1.全加器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD-%E9%81%BF%E5%85%8DLatch%E7%9A%84%E4%BA%A7%E7%94%9F"><span class="nav-number">7.</span> <span class="nav-text">六.避免Latch的产生</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83-%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">8.</span> <span class="nav-text">七.寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%90%8C%E6%AD%A5%E5%A4%8D%E4%BD%8D-D-%E8%A7%A6%E5%8F%91%E5%99%A8%E5%92%8C%E5%BC%82%E6%AD%A5%E5%A4%8D%E4%BD%8D-D-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">8.1.</span> <span class="nav-text">1.同步复位 D 触发器和异步复位 D 触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E5%A4%8D%E4%BD%8D-D-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">8.1.1.</span> <span class="nav-text">&lt;1&gt;同步复位 D 触发器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E5%A4%8D%E4%BD%8D-D-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">8.1.2.</span> <span class="nav-text">&lt;2&gt;异步复位 D 触发器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-3"><span class="nav-number">8.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB-%E9%98%BB%E5%A1%9E%E8%B5%8B%E5%80%BC%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9E%E8%B5%8B%E5%80%BC"><span class="nav-number">9.</span> <span class="nav-text">八.阻塞赋值与非阻塞赋值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="nav-number">10.</span> <span class="nav-text">九.计数器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-2"><span class="nav-number">10.1.</span> <span class="nav-text">1.实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-4"><span class="nav-number">10.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81-%E5%88%86%E9%A2%91%E5%99%A8"><span class="nav-number">11.</span> <span class="nav-text">十.分频器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%81%B6%E5%88%86%E9%A2%91"><span class="nav-number">11.1.</span> <span class="nav-text">1.偶分频</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%A5%87%E5%88%86%E9%A2%91"><span class="nav-number">11.2.</span> <span class="nav-text">2.奇分频</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80-%E6%8C%89%E9%94%AE%E6%B6%88%E6%8A%96"><span class="nav-number">12.</span> <span class="nav-text">十一.按键消抖</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%A1%AC%E4%BB%B6%E6%B6%88%E6%8A%96"><span class="nav-number">12.1.</span> <span class="nav-text">1.硬件消抖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E8%BD%AF%E4%BB%B6%E6%B6%88%E6%8A%96"><span class="nav-number">12.2.</span> <span class="nav-text">2.软件消抖</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C-%E6%B5%81%E6%B0%B4%E7%81%AF"><span class="nav-number">13.</span> <span class="nav-text">十二.流水灯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0-1"><span class="nav-number">13.1.</span> <span class="nav-text">1.实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-5"><span class="nav-number">13.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89-%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="nav-number">14.</span> <span class="nav-text">十三.状态机</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%AE%80%E6%98%93%E5%8F%AF%E4%B9%90%E6%9C%BA"><span class="nav-number">14.1.</span> <span class="nav-text">1.简易可乐机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%A4%8D%E6%9D%82%E5%8F%AF%E4%B9%90%E6%9C%BA"><span class="nav-number">14.2.</span> <span class="nav-text">2.复杂可乐机</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B-%E6%97%A0%E6%BA%90%E8%9C%82%E9%B8%A3%E5%99%A8"><span class="nav-number">15.</span> <span class="nav-text">十四.无源蜂鸣器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%94-%E5%8A%A8%E6%80%81%E6%95%B0%E7%A0%81%E7%AE%A1%E6%98%BE%E7%A4%BA"><span class="nav-number">16.</span> <span class="nav-text">十五.动态数码管显示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%AE%9E%E7%8E%B0-2"><span class="nav-number">16.1.</span> <span class="nav-text">1.实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#data-gen"><span class="nav-number">16.1.1.</span> <span class="nav-text">&lt;1&gt;data_gen</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bcd-8421"><span class="nav-number">16.1.2.</span> <span class="nav-text">&lt;2&gt;bcd_8421</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#seg-dynamic"><span class="nav-number">16.1.3.</span> <span class="nav-text">&lt;3&gt; seg_dynamic</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#top-seg-dynamic"><span class="nav-number">16.1.4.</span> <span class="nav-text">&lt;4&gt;top_seg_dynamic</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%BF%E7%9C%9F-6"><span class="nav-number">16.2.</span> <span class="nav-text">2.仿真</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SWQ"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">SWQ</p>
  <div class="site-description" itemprop="description">舟遥遥以轻飏，风飘飘而吹衣</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">135</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xidianswq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xidianswq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/3209507800@qq.com" title="E-Mail → 3209507800@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_32971095" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_32971095" rel="noopener" target="_blank"><i class="fa fa-link fa-fw"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1309889000&auto=1&height=66"></iframe>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-8 ~ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SWQ</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">17:18</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'H2FYHQwVGaUkawg5DkrA6d6M-gzGzoHsz',
      appKey     : 'zndS0u9Qj7qj8CqnJINs2MGT',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : 'https://h2fyhqwv.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});
</script>


  <script async src="/js/cursor/fireworks.js"></script>


<!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><!-- hexo injector body_end end --></body>
</html>
