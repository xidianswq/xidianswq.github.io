<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Zhi Mang Xing:300,300italic,400,400italic,700,700italic|Ma Shan Zheng:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@200..900&family=Permanent+Marker&family=Satisfy&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xidianswq.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#e6c35c","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="目录">
<meta property="og:type" content="article">
<meta property="og:title" content="西电计科大三下SOC微体系结构设计作业合集">
<meta property="og:url" content="https://xidianswq.github.io/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/index.html">
<meta property="og:site_name" content="Switch">
<meta property="og:description" content="目录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2cdaef1463aa82317fd6029b8c7bb08e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/5dcfe13e83a9275011aae48f12d1be1c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/711bd6d2672a650569b2474d89e3f38e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/dfad20f27e654f243f373cfb9b80256c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2b1e4d12b3c904bbdb1f64914294b450.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9085cd14c31cada75062d36a643fb2b5.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/4dbe7b6e7886a88433a6fb76f77ee7f8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/adec0f2295677479c7321988b4b0f166.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/7bb5fc46ac6d878964e59ddeb1fe803c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8f30332a988566f33bab93454ab0c0ca.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/559a1c00923a7cda00c06f63c6dec1cc.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/920cb7c013bd5af2e09bc59aafba028c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d171f9dc0e6d54b72cf1ffe1f8c759ec.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/08847d6e576be1f9f61c68f8d15899b6.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/e286d15abce298cf0b629350ba7e076e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/cdd818c3fea80ef3bef0a36c7c6ab446.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/b25fa007565503bdd4b69b5d6c31496d.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/daac7ca07dca672e89a3e831d4b8bd9a.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8c09ab4e531a18f069ba4afb9e18d438.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d3e67513e1e27963a8e15f23f6a8cc7c.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/4cd31e8dc5958ee6e4b4eedfd590f2fa.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/83c13baff1be05be6cda0e582d59099f.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/61bbc405e10beaea2c2635a94871b4cb.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/78e8dae445e0aa8620fd29c657228abd.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/9597c2a19cccbc17358d377d0ee32df8.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/d7c983ed1ce45af2d329d820c088e9dd.png">
<meta property="article:published_time" content="2024-04-03T11:33:51.000Z">
<meta property="article:modified_time" content="2025-02-09T06:23:24.716Z">
<meta property="article:author" content="SWQ">
<meta property="article:tag" content="fpga开发">
<meta property="article:tag" content="作业解答">
<meta property="article:tag" content="vhdl">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i-blog.csdnimg.cn/blog_migrate/2cdaef1463aa82317fd6029b8c7bb08e.png">

<link rel="canonical" href="https://xidianswq.github.io/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>西电计科大三下SOC微体系结构设计作业合集 | Switch</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><!-- hexo injector head_end end --><link rel="alternate" href="/rss2.xml" title="Switch" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Switch</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Welcome to My Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">29</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">69</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xidianswq.github.io/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="SWQ">
      <meta itemprop="description" content="舟遥遥以轻扬，风飘飘而吹衣">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Switch">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          西电计科大三下SOC微体系结构设计作业合集
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar" color=f6416c></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-04-03 19:33:51" itemprop="dateCreated datePublished" datetime="2024-04-03T19:33:51+08:00">2024-04-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          
            <span id="/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/" class="post-meta-item leancloud_visitors" data-flag-title="西电计科大三下SOC微体系结构设计作业合集" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2024/04/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%A5%BF%E7%94%B5%E8%AE%A1%E7%A7%91%E5%A4%A7%E4%B8%89%E4%B8%8BSOC%E5%BE%AE%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%90%88%E9%9B%86/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>34k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>31 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><strong>目录</strong></p>
<p><a href="about:blank#%E4%B8%80.VHDL%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A">一.VHDL设计作业</a></p>
<p><a href="about:blank#1.%E5%9F%BA%E4%BA%8E%E7%A1%AC%E4%BB%B6%E6%8F%8F%E8%BF%B0%E8%AF%AD%E8%A8%80%E7%9A%843-8%E8%AF%91%E7%A0%81%E5%99%A8%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1">1.基于硬件描述语言的3-8译码器逻辑电路设计</a></p>
<p><a href="about:blank#2.8%E4%BD%8D%E5%8F%8C%E5%90%91%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8%E8%AE%BE%E8%AE%A1">2.8位双向移位寄存器设计</a></p>
<p><a href="about:blank#3.%E5%9F%BA%E4%BA%8E%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA%E7%9A%84%E8%87%AA%E5%8A%A9%E5%94%AE%E7%A5%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1">3.基于有限状态机的自助售票系统设计</a></p>
<p><a href="about:blank#4.%E6%8C%89%E9%94%AE%E6%B6%88%E6%8A%96%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1">4.按键消抖电路设计</a></p>
<p><a href="about:blank#5.%E5%90%8C%E6%AD%A5%E7%8E%AF%E5%BD%A2FIFO%E8%AE%BE%E8%AE%A1">5.同步环形FIFO设计</a></p>
<p><a href="about:blank#6.%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E6%97%B6%E9%92%9F%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1">6.线上实验——时钟模块设计</a></p>
<p><a href="about:blank#7.%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E5%8E%9F%E7%A0%81%E4%BA%8C%E4%BD%8D%E4%B9%98%E6%B3%95%E5%99%A8%E8%AE%BE%E8%AE%A1%C2%A0">7.线上实验——原码二位乘法器设计
</a></p>
<p><a href="about:blank#8.%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E5%B8%83%E6%96%AF%E4%B9%98%E6%B3%95%E5%99%A8%E8%AE%BE%E8%AE%A1">8.线上实验——布斯乘法器设计</a></p>
<hr>
<h2 id="一-VHDL设计作业"><a href="#一-VHDL设计作业" class="headerlink" title="一.VHDL设计作业"></a>一.VHDL设计作业</h2><p>源文件、测试文件及仿真结果</p>
<h3 id="1-基于硬件描述语言的3-8译码器逻辑电路设计"><a href="#1-基于硬件描述语言的3-8译码器逻辑电路设计" class="headerlink" title="1.基于硬件描述语言的3-8译码器逻辑电路设计"></a>1.基于硬件描述语言的3-8译码器逻辑电路设计</h3><p>根据3-8译码器基本原理，采用硬件描述语言设计一个3-8译码器逻辑电路，并给出仿真结果。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity decoder3_8 is<br>        Port (<br>            OE: in std_logic;<br>            X: in std_logic_vector(2 downto 0);<br>            Y: out std_logic_vector(7 downto 0)<br>        );<br>    end decoder3_8;</p>
<pre><code>architecture Behavioral of decoder3_8 is
begin
process(OE,X)
begin
    if OE=&#39;0&#39; then Y&lt;=&quot;00000000&quot;;
    elsif OE=&#39;1&#39;then
        Case X is
            When &quot;000&quot; =&gt;Y&lt;=&quot;11111110&quot;;
            When &quot;001&quot; =&gt;Y&lt;=&quot;11111101&quot;;
            When &quot;010&quot; =&gt;Y&lt;=&quot;11111011&quot;;
            When &quot;011&quot; =&gt;Y&lt;=&quot;11110111&quot;;
            When &quot;100&quot; =&gt;Y&lt;=&quot;11101111&quot;;
            When &quot;101&quot; =&gt;Y&lt;=&quot;11011111&quot;;
            When &quot;110&quot; =&gt;Y&lt;=&quot;10111111&quot;;
            When &quot;111&quot; =&gt;Y&lt;=&quot;01111111&quot;;
            When others =&gt;Y&lt;=&quot;11111111&quot;;
        END CASE;    
   end if;
end process;
end Behavioral;
</code></pre>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity decoder3_8_tb is<br>    –  Port ( );<br>    end decoder3_8_tb;</p>
<pre><code>architecture structural of decoder3_8_tb is
component decoder3_8
    port(
        OE: in std_logic;
        X: in std_logic_vector(2 downto 0);
        Y: out std_logic_vector(7 downto 0)
    );
end component;
signal oe:std_logic;
signal input:std_logic_vector(2 downto 0);
signal output:std_logic_vector(7 downto 0);
begin
d1:decoder3_8 port map(oe,input,output);

ensure:process
    begin
        oe&lt;=&#39;0&#39;;
        wait for 50ns;
        oe&lt;=&#39;1&#39;;
        wait;
end process;

sel:process
    begin
        input&lt;=&quot;000&quot;;
        wait for 20ns;
        input&lt;=&quot;001&quot;;
        wait for 20ns;
        input&lt;=&quot;010&quot;;
        wait for 20ns;
        input&lt;=&quot;011&quot;;
        wait for 20ns;
        input&lt;=&quot;100&quot;;
        wait for 20ns;
        input&lt;=&quot;101&quot;;
        wait for 20ns;
        input&lt;=&quot;110&quot;;
        wait for 20ns;
        input&lt;=&quot;111&quot;;
        wait for 20ns;
end process;
end structural;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/2cdaef1463aa82317fd6029b8c7bb08e.png"></p>
<h3 id="2-8位双向移位寄存器设计"><a href="#2-8位双向移位寄存器设计" class="headerlink" title="2.8位双向移位寄存器设计"></a>2.8位双向移位寄存器设计</h3><p>采用硬件描述语言实现8位双向移位寄存器，其功能包括异步置零，同步置数，左移，右移和保持状态不变等5种功能。其中输入端口包括8位并行数据、两位的选择信号和两个1位串行数据，输出是8位并行数据。当RESET信号为低电平时，寄存器的输出被异步置零；否则当RESET&#x3D;1时，与时钟有关的四种功能由输入信号MODE决定。请给出仿真结果。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity shift_register is<br>        Port (<br>            clk,reset,left,right:in std_logic;<br>            mode:in std_logic_vector(1 downto 0);<br>            input_data:in std_logic_vector(7 downto 0);<br>            output_data:inout std_logic_vector(7 downto 0)<br>        );<br>    end shift_register;</p>
<pre><code>architecture Behavioral of shift_register is
begin
process(reset,clk,mode)

begin
    if (reset=&#39;0&#39;)then
        output_data&lt;=&quot;00000000&quot;;
    elsif(reset=&#39;1&#39;and clk=&#39;1&#39;)then
        case mode is
            when &quot;00&quot;=&gt;output_data&lt;=output_data;
            when &quot;01&quot;=&gt;output_data&lt;=input_data;
            when &quot;10&quot;=&gt;
                    output_data(0)&lt;=left;
                    output_data(7)&lt;=output_data(6);
                    output_data(6)&lt;=output_data(5);
                    output_data(5)&lt;=output_data(4);
                    output_data(4)&lt;=output_data(3);
                    output_data(3)&lt;=output_data(2);
                    output_data(2)&lt;=output_data(1);
                    output_data(1)&lt;=output_data(0);              
            when &quot;11&quot;=&gt;
                    output_data(0)&lt;=output_data(1);
                    output_data(1)&lt;=output_data(2);
                    output_data(2)&lt;=output_data(3);
                    output_data(3)&lt;=output_data(4);
                    output_data(4)&lt;=output_data(5);
                    output_data(5)&lt;=output_data(6);
                    output_data(6)&lt;=output_data(7);
                    output_data(7)&lt;=right;
            when others=&gt;output_data&lt;=output_data;
        end case;         
    end if;
end process;

end Behavioral;
</code></pre>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity shift_register_tb is<br>    –  Port ( );<br>    end shift_register_tb;</p>
<pre><code>architecture Behavioral of shift_register_tb is
component shift_register
port(
        clk,reset,left,right:in std_logic;
        mode:in std_logic_vector(1 downto 0);
        input_data:in std_logic_vector(7 downto 0);
        output_data:inout std_logic_vector(7 downto 0)   
);
end component;
signal clk,reset,left,right:std_logic;
signal mode:std_logic_vector(1 downto 0);
signal input_data:std_logic_vector(7 downto 0);
signal output_data:std_logic_vector(7 downto 0);   
begin
sr1:shift_register port map(clk,reset,left,right,mode,input_data,output_data);

clock_gen:process
    begin
        left&lt;=output_data(7);
        right&lt;=output_data(0);
        clk&lt;=&#39;0&#39;;
        wait for 10ns;
        clk&lt;=&#39;1&#39;;
        wait for 10ns;
end process;

reset_gen:process
    begin
        reset&lt;=&#39;0&#39;;
        wait for 25ns;
        reset&lt;=&#39;1&#39;;
        wait;
end process;

mode_test:process
    begin
        mode&lt;=&quot;00&quot;;
        wait for 30ns;
        mode&lt;=&quot;01&quot;;
        input_data&lt;=&quot;00001111&quot;;
        wait for 30ns;
        mode&lt;=&quot;10&quot;;
        wait for 200ns;
        mode&lt;=&quot;01&quot;;
        input_data&lt;=&quot;00001111&quot;;
        wait for 30ns;
        mode&lt;=&quot;11&quot;;
        wait for 200ns;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/5dcfe13e83a9275011aae48f12d1be1c.png"></p>
<h3 id="3-基于有限状态机的自助售票系统设计"><a href="#3-基于有限状态机的自助售票系统设计" class="headerlink" title="3.基于有限状态机的自助售票系统设计"></a>3.基于有限状态机的自助售票系统设计</h3><p>某自助售票系统只能接收 5元和10元纸币，若一张票的价格设定为 25元。<br>请利用有限状态机设计该售票系统，<br>1. 首先给出状态说明，然后画出具体的状态图及说明状态转移关系。<br>2. 并完成硬件描述语言程序设计。</p>
<p>3.将第1和2题的答案做成word文档上传。</p>
<p>4.扩展要求（加分10分）：增加20元纸币输入。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity ticket_state_machine is<br>        Port (<br>            clk,reset:in std_logic;<br>            input_money:in std_logic_vector(2 downto 0);<br>            return_money:out std_logic_vector(2 downto 0);<br>            output_ticket:out std_logic<br>        );<br>    end ticket_state_machine;</p>
<pre><code>architecture Behavioral of ticket_state_machine is
type states is (m0,m5,m10,m15,m20,m25,m30,m35,m40);
signal current_state,next_state:states;
begin

start:process(reset,clk)
    begin
        if(reset=&#39;1&#39;)then
            current_state&lt;=m0;
        elsif(reset=&#39;0&#39;and clk=&#39;1&#39;and clk&#39;event)then
            current_state&lt;=next_state;
        end if;         
end process;

state_machine:process(current_state,input_money)
    begin
        case current_state is
            when m0=&gt;
                output_ticket&lt;=&#39;0&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m0;
                    when&quot;001&quot;=&gt;next_state&lt;=m5;
                    when&quot;010&quot;=&gt;next_state&lt;=m10;
                    when&quot;100&quot;=&gt;next_state&lt;=m20;
                    when others=&gt;next_state&lt;=current_state;
                end case;
            when m5=&gt;
                output_ticket&lt;=&#39;0&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m5;
                    when&quot;001&quot;=&gt;next_state&lt;=m10;
                    when&quot;010&quot;=&gt;next_state&lt;=m15;
                    when&quot;100&quot;=&gt;next_state&lt;=m25;
                    when others=&gt;next_state&lt;=current_state;
                end case;
            when m10=&gt;
                output_ticket&lt;=&#39;0&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m10;
                    when&quot;001&quot;=&gt;next_state&lt;=m15;
                    when&quot;010&quot;=&gt;next_state&lt;=m20;
                    when&quot;100&quot;=&gt;next_state&lt;=m30;
                    when others=&gt;next_state&lt;=current_state;
                end case; 
            when m15=&gt;
                output_ticket&lt;=&#39;0&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m15;
                    when&quot;001&quot;=&gt;next_state&lt;=m20;
                    when&quot;010&quot;=&gt;next_state&lt;=m25;
                    when&quot;100&quot;=&gt;next_state&lt;=m35;
                    when others=&gt;next_state&lt;=current_state;
                end case; 
            when m20=&gt;
                output_ticket&lt;=&#39;0&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m20;
                    when&quot;001&quot;=&gt;next_state&lt;=m25;
                    when&quot;010&quot;=&gt;next_state&lt;=m30;
                    when&quot;100&quot;=&gt;next_state&lt;=m40;
                    when others=&gt;next_state&lt;=current_state;
                end case; 
            when m25=&gt;
                output_ticket&lt;=&#39;1&#39;;
                return_money&lt;=&quot;000&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m0;
                    when&quot;001&quot;=&gt;next_state&lt;=m5;
                    when&quot;010&quot;=&gt;next_state&lt;=m10;
                    when&quot;100&quot;=&gt;next_state&lt;=m20;
                    when others=&gt;next_state&lt;=current_state;
                end case; 
            when m30=&gt;
                output_ticket&lt;=&#39;1&#39;;
                return_money&lt;=&quot;001&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m0;
                    when&quot;001&quot;=&gt;next_state&lt;=m5;
                    when&quot;010&quot;=&gt;next_state&lt;=m10;
                    when&quot;100&quot;=&gt;next_state&lt;=m20;
                    when others=&gt;next_state&lt;=current_state;
                end case;
             when m35=&gt;
                output_ticket&lt;=&#39;1&#39;;
                return_money&lt;=&quot;010&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m0;
                    when&quot;001&quot;=&gt;next_state&lt;=m5;
                    when&quot;010&quot;=&gt;next_state&lt;=m10;
                    when&quot;100&quot;=&gt;next_state&lt;=m20;
                    when others=&gt;next_state&lt;=current_state;
                end case;    
            when m40=&gt;
                output_ticket&lt;=&#39;1&#39;;
                return_money&lt;=&quot;011&quot;;
                case input_money is
                    when&quot;000&quot;=&gt;next_state&lt;=m0;
                    when&quot;001&quot;=&gt;next_state&lt;=m5;
                    when&quot;010&quot;=&gt;next_state&lt;=m10;
                    when&quot;100&quot;=&gt;next_state&lt;=m20;
                    when others=&gt;next_state&lt;=current_state;
                end case;    
        end case;             
end process;

end Behavioral;
</code></pre>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity ticket_state_machine_tb is<br>    –  Port ( );<br>    end ticket_state_machine_tb;</p>
<pre><code>architecture Behavioral of ticket_state_machine_tb is
component ticket_state_machine
    Port (
        clk,reset:in std_logic;
        input_money:in std_logic_vector(2 downto 0);
        return_money:out std_logic_vector(2 downto 0);
        output_ticket:out std_logic
    );
end component;
signal clk,reset: std_logic;
signal input_money: std_logic_vector(2 downto 0);
signal return_money: std_logic_vector(2 downto 0);
signal output_ticket: std_logic;
begin
tsm:ticket_state_machine port map(clk,reset,input_money,return_money,output_ticket);

clock:process
    begin
        clk&lt;=&#39;0&#39;;
        wait for 10ns;
        clk&lt;=&#39;1&#39;;
        wait for 10ns;
end process;

start:process
    begin
        reset&lt;=&#39;1&#39;;
        wait for 20ns;
        reset&lt;=&#39;0&#39;;
        wait;
end process;

test:process
    begin
        wait for 50ns;
        input_money&lt;=&quot;001&quot;;
        wait for 20ns;
        input_money&lt;=&quot;000&quot;;
        wait for 50ns;
        input_money&lt;=&quot;010&quot;;
        wait for 20ns;
        input_money&lt;=&quot;000&quot;;
        wait for 50ns;
        input_money&lt;=&quot;100&quot;;
        wait for 20ns;
        input_money&lt;=&quot;000&quot;;
        wait for 50ns;
        input_money&lt;=&quot;010&quot;;
        wait for 20ns;
        input_money&lt;=&quot;000&quot;;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/711bd6d2672a650569b2474d89e3f38e.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/dfad20f27e654f243f373cfb9b80256c.png"></p>
<h3 id="4-按键消抖电路设计"><a href="#4-按键消抖电路设计" class="headerlink" title="4.按键消抖电路设计"></a>4.按键消抖电路设计</h3><p>请使用硬件描述语言设计一个按键消抖电路，假设输入时钟频率为50MHZ。请给出设计方案及仿真验证结果。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity key_stroke is<br>        generic(CLK_FRE:integer:&#x3D;50000000);<br>        Port (<br>            clk:in std_logic;<br>            reset:in std_logic;<br>            key_in:in std_logic;<br>            output:out std_logic<br>        );<br>    end key_stroke;</p>
<pre><code>architecture Behavioral of key_stroke is

type states is(s0,s1,s2,s3,s4);
signal state:states;

begin
process(reset,clk,key_in)
variable count_num:integer:=3*CLK_FRE/1000;
variable count:integer:=0;
    begin
        if reset=&#39;1&#39;then
            state&lt;=s0;
            count:=0;
            output&lt;=&#39;0&#39;;
        elsif reset=&#39;0&#39;then
            case state is
                when s0=&gt;if key_in=&#39;1&#39; then state&lt;=s1;end if;
                when s1=&gt;
                    if clk=&#39;1&#39; then count:=count+1;end if;
                    if count=count_num then state&lt;=s2; end if;
                when s2=&gt;
                    if(key_in=&#39;1&#39;)then output&lt;=&#39;1&#39;;state&lt;=s3;
                    elsif(key_in=&#39;0&#39;)then output&lt;=&#39;0&#39;;state&lt;=s4;
                    end if;
                when s3=&gt;
                    output&lt;=&#39;0&#39;;
                    if(key_in=&#39;0&#39;)then state&lt;=s4;end if;
                when s4=&gt;
                    state&lt;=s0;
                    count:=0;
                    output&lt;=&#39;0&#39;;             
            end case;               
        end if;     
end process;
</code></pre>
<p>​<br>​<br>​    end Behavioral;</p>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity key_stroke_tb is<br>    –  Port ( );<br>    end key_stroke_tb;</p>
<pre><code>architecture Behavioral of key_stroke_tb is
component key_stroke
    generic(CLK_FRE:integer:=50000000);
    port(
        clk:in std_logic;
        reset:in std_logic;
        key_in:in std_logic;
        output:out std_logic 
    ); 
end component;
signal clk:std_logic;
signal reset:std_logic;
signal key_in:std_logic;
signal output:std_logic;
begin
ks:key_stroke generic map(50000000)port map(clk,reset,key_in,output);

clock:process
begin
    clk&lt;=&#39;0&#39;;
    wait for 10ns;
    clk&lt;=&#39;1&#39;;
    wait for 10ns;
end process;

rst:process
begin
    reset&lt;=&#39;1&#39;;
    wait for 25ns;
    reset&lt;=&#39;0&#39;;
    wait;
end process;

test:process
begin
    key_in&lt;=&#39;1&#39;;
    wait for 50ns;
    key_in&lt;=&#39;0&#39;;
    wait for 70ns;
    key_in&lt;=&#39;1&#39;;
    wait for 100ns;
    key_in&lt;=&#39;0&#39;;
    wait for 40ns;
    key_in&lt;=&#39;1&#39;;
    wait for 120ns;
    key_in&lt;=&#39;0&#39;;
    wait for 30ns;
    key_in&lt;=&#39;1&#39;;
    wait for 40ns;
    key_in&lt;=&#39;0&#39;;
    wait for 70ns;
    key_in&lt;=&#39;1&#39;;
    wait for 30ns;
    key_in&lt;=&#39;0&#39;;
    wait for 100ns;
    key_in&lt;=&#39;1&#39;;
    wait for 50ns;
    key_in&lt;=&#39;0&#39;;
    wait for 20ns;
    key_in&lt;=&#39;1&#39;;
    wait for 1000ns;
    key_in&lt;=&#39;0&#39;;
    wait for 2000ns;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/2b1e4d12b3c904bbdb1f64914294b450.png"></p>
<h3 id="5-同步环形FIFO设计"><a href="#5-同步环形FIFO设计" class="headerlink" title="5.同步环形FIFO设计"></a>5.同步环形FIFO设计</h3><p>请采用硬件描述语言设计实现一个存储深度M和数据宽度N可以用户配置的同步FIFO存储器，请给出仿真结果。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​<br>    entity FIFO_ring is<br>    generic(<br>        depth:positive :&#x3D;8;<br>        width:positive:&#x3D;8<br>    );<br>        Port(<br>            clk:in std_logic;<br>            rst:in std_logic;<br>            data_in:in std_logic_vector(7 downto 0);<br>            wr:in std_logic;<br>            rd:in std_logic;<br>    –        wr_clr:in std_logic;<br>    –        wr_en:in std_logic;<br>    –        rd_clr:in std_logic;<br>    –        rd_en:in std_logic;</p>
<pre><code>        empty:out std_logic;
        full:out std_logic;
        data_out:out std_logic_vector(7 downto 0)
    );
end FIFO_ring;

architecture Behavioral of FIFO_ring is
component duaram
generic(
    depth:positive :=8;
    width:positive:=8
);
Port(
    clka:in std_logic;
    wr:in std_logic;
    addra:in std_logic_vector(depth-1 downto 0);
    datain:in std_logic_vector(width-1 downto 0);
    
    clkb:in std_logic;
    rd:in std_logic;
    addrb:in std_logic_vector(depth-1 downto 0);
    dataout:out std_logic_vector(width-1 downto 0)
); 
end component;
component write_pointer
    generic(
        depth:positive
    );
    Port(
        clk:in std_logic;
        rst:in std_logic;
        wq:in std_logic;
        wr_pt:out std_logic_vector(depth-1 downto 0)
    );
end component;
component read_pointer
    generic(
        depth:positive
    );
    Port(
        clk:in std_logic;
        rst:in std_logic;
        rq:in std_logic;
        rd_pt:out std_logic_vector(depth-1 downto 0)
    );
end component;
component judge_status
    generic(
        depth:positive
    );
    port(
        clk:in std_logic;
        rst:in std_logic;
        wr_pt:in std_logic_vector(depth-1 downto 0);
        rd_pt:in std_logic_vector(depth-1 downto 0);
        empty:out std_logic;
        full:out std_logic
    );
end component;

signal rp_line:std_logic_vector(depth-1 downto 0);
signal wp_line:std_logic_vector(depth-1 downto 0);

begin
duaram_inst:duaram generic map(depth,width)port map(clka=&gt;clk,clkb=&gt;clk,datain=&gt;data_in,dataout=&gt;data_out,addra=&gt;wp_line,addrb=&gt;rp_line,rd=&gt;rd,wr=&gt;wr);
write_pointer_inst:write_pointer generic map(depth)port map(clk=&gt;clk,rst=&gt;rst,wq=&gt;wr,wr_pt=&gt;wp_line);
read_pointer_inst:read_pointer generic map(depth)port map(clk=&gt;clk,rst=&gt;rst,rq=&gt;rd,rd_pt=&gt;rp_line);
judge_status_inst:judge_status generic map(depth)port map(clk=&gt;clk,rst=&gt;rst,wr_pt=&gt;wp_line,rd_pt=&gt;rp_line,full=&gt;full,empty=&gt;empty);
</code></pre>
<p>​<br>​    end Behavioral;</p>
<p>​<br>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​<br>    entity duaram is<br>    generic(<br>        depth:positive :&#x3D;8;<br>        width:positive:&#x3D;8<br>    );<br>    Port(<br>        clka:in std_logic;<br>        wr:in std_logic;<br>        addra:in std_logic_vector(depth-1 downto 0);<br>        datain:in std_logic_vector(width-1 downto 0);</p>
<pre><code>    clkb:in std_logic;
    rd:in std_logic;
    addrb:in std_logic_vector(depth-1 downto 0);
    dataout:out std_logic_vector(width-1 downto 0)
);
end duaram;

architecture Behavioral of duaram is

type ram is array(2**depth-1 downto 0)of std_logic_vector(width-1 downto 0);
signal dualram:ram;

begin

process(clka,clkb)
begin
    if(clka&#39;event and clka=&#39;1&#39;)then
        if(wr=&#39;0&#39;)then dualram(conv_integer(addra))&lt;=datain;end if;
    end if;
end process;

process(clkb)
begin
    if(clkb&#39;event and clkb=&#39;1&#39;)then
        if(rd=&#39;0&#39;)then dataout&lt;=dualram(conv_integer(addrb));end if;
    end if;
end process;

end Behavioral;
</code></pre>
<p>​<br>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​<br>    entity write_pointer is<br>        generic(<br>            depth:positive<br>        );<br>        Port(<br>            clk:in std_logic;<br>            rst:in std_logic;<br>            wq:in std_logic;<br>            wr_pt:out std_logic_vector(depth-1 downto 0)<br>        );<br>    end write_pointer;</p>
<pre><code>architecture Behavioral of write_pointer is

signal wr_pt_t:std_logic_vector(depth-1 downto 0);

begin
process(rst,clk)
begin
    if(rst=&#39;0&#39;)then
        wr_pt_t&lt;=(others=&gt;&#39;0&#39;);
    elsif(clk&#39;event and clk=&#39;1&#39;)then
        if wq=&#39;0&#39;then wr_pt_t&lt;=wr_pt_t+1;end if;
    end if;     
end process;
wr_pt&lt;=wr_pt_t;
end Behavioral;
</code></pre>
<p>​<br>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​<br>    entity read_pointer is<br>        generic(<br>            depth:positive<br>        );<br>        Port(<br>            clk:in std_logic;<br>            rst:in std_logic;<br>            rq:in std_logic;<br>            rd_pt:out std_logic_vector(depth-1 downto 0)<br>        );<br>    end read_pointer;</p>
<pre><code>architecture Behavioral of read_pointer is

signal rd_pt_t:std_logic_vector(depth-1 downto 0);

begin
process(rst,clk)
begin
    if(rst=&#39;0&#39;)then
        rd_pt_t&lt;=(others=&gt;&#39;0&#39;);
    elsif(clk&#39;event and clk=&#39;1&#39;)then
        if rq=&#39;0&#39;then rd_pt_t&lt;=rd_pt_t+1;end if;
    end if;     
end process;
rd_pt&lt;=rd_pt_t;
end Behavioral;
</code></pre>
<p>​<br>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​<br>    entity judge_status is<br>        generic(<br>            depth:positive<br>        );<br>        port(<br>            clk:in std_logic;<br>            rst:in std_logic;<br>            wr_pt:in std_logic_vector(depth-1 downto 0);<br>            rd_pt:in std_logic_vector(depth-1 downto 0);<br>            empty:out std_logic;<br>            full:out std_logic<br>        );<br>    end entity judge_status;</p>
<pre><code>architecture Behavioral of judge_status is

begin

process(rst,clk)
begin
    if(rst=&#39;0&#39;)then empty&lt;=&#39;1&#39;;
    elsif clk&#39;event and clk=&#39;1&#39;then
        if wr_pt=rd_pt then empty&lt;=&#39;1&#39;;
        else empty&lt;=&#39;0&#39;;
        end if;
    end if;  
end process;

process(rst,clk)
begin
    if(rst=&#39;0&#39;)then full&lt;=&#39;0&#39;;
    elsif clk&#39;event and clk=&#39;1&#39;then
        if wr_pt&gt;rd_pt then
            if(depth+rd_pt)=wr_pt then full&lt;=&#39;1&#39;;else full&lt;=&#39;0&#39;;end if;
        end if;
    end if;  
end process;

end Behavioral;
</code></pre>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity FIFO_ring_tb is<br>    –  Port ( );<br>    end FIFO_ring_tb;</p>
<pre><code>architecture Behavioral of FIFO_ring_tb is

component FIFO_ring
generic(
    depth:positive :=8;
    width:positive:=8
);
    Port(
        clk:in std_logic;
        rst:in std_logic;
        data_in:in std_logic_vector(7 downto 0);
        wr:in std_logic;
        rd:in std_logic;
--        wr_clr:in std_logic;
--        wr_en:in std_logic;
--        rd_clr:in std_logic;
--        rd_en:in std_logic;
        
        empty:out std_logic;
        full:out std_logic;
        data_out:out std_logic_vector(7 downto 0)
    );
end component;

signal clk:std_logic;
signal rst:std_logic;
signal data_in:std_logic_vector(7 downto 0);
signal wr:std_logic;
signal rd:std_logic;
signal empty:std_logic;
signal full:std_logic;
signal data_out:std_logic_vector(7 downto 0);

begin

FIFO_ring_inst:FIFO_ring generic map(8,8)port map(clk,rst,data_in,wr,rd,empty,full,data_out);

clock:process
begin
    clk&lt;=&#39;0&#39;;
    wait for 10ns;
    clk&lt;=&#39;1&#39;;
    wait for 10ns;
end process;

reset:process
begin
    rst&lt;=&#39;0&#39;;
    wait for 25ns;
    rst&lt;=&#39;1&#39;;
    wait;
end process;

test:process
begin
    rd&lt;=&#39;1&#39;;
    wr&lt;=&#39;1&#39;;
    data_in&lt;=&quot;00000000&quot;;
    wait for 50ns;
    data_in&lt;=&quot;00000001&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;00000010&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;00000100&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;00001000&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;00010000&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;00100000&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;01000000&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 30ns;
    data_in&lt;=&quot;10000000&quot;;
    wr&lt;=&#39;0&#39;;
    wait for 20ns;
    wr&lt;=&#39;1&#39;;
    wait for 50ns;
    
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    rd&lt;=&#39;0&#39;;
    wait for 20ns;
    rd&lt;=&#39;1&#39;;
    wait for 30ns;
    
    wait;
    
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9085cd14c31cada75062d36a643fb2b5.png"></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4dbe7b6e7886a88433a6fb76f77ee7f8.png"></p>
<h3 id="6-线上实验——时钟模块设计"><a href="#6-线上实验——时钟模块设计" class="headerlink" title="6.线上实验——时钟模块设计"></a>6.线上实验——时钟模块设计</h3><p>采用硬件描述语言设计实现CPU时钟模块，输出信号包括四个节拍信号（每两个时钟周期一个节拍），时钟反相信号，时钟2分频信号及其反相信号，完成逻辑功能设计及仿真验证，并给出仿真结果。</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity clock is<br>        Port(<br>            clk,rst:in std_logic;<br>            clk1,nclk1:out std_logic;   –clk<br>            clk2,nclk2:out std_logic;   –clk二分频<br>            w0,w1,w2,w3:out std_logic   –节拍信号<br>        );<br>    end clock;</p>
<pre><code>architecture Behavioral of clock is
begin

process(clk)
variable count_clk2:integer:=0;
variable count_w:integer:=0;
begin
    if(rst=&#39;0&#39;)then
        w0&lt;=&#39;0&#39;;
        w1&lt;=&#39;0&#39;;
        w2&lt;=&#39;0&#39;;
        w3&lt;=&#39;0&#39;;
        clk1&lt;=&#39;0&#39;;
        nclk1&lt;=&#39;1&#39;;
        clk2&lt;=&#39;0&#39;;
        nclk2&lt;=&#39;1&#39;;
        count_clk2:=0;
        count_w:=0;
    elsif(rst=&#39;1&#39;)then
        clk1&lt;=clk;
        nclk1&lt;=not clk;
        if(clk&#39;event and clk=&#39;1&#39;)then
            if(count_clk2=0)then count_clk2:=1;clk2&lt;=&#39;1&#39;;nclk2&lt;=&#39;0&#39;;
            elsif(count_clk2=1)then count_clk2:=0;clk2&lt;=&#39;0&#39;;nclk2&lt;=&#39;1&#39;;
            end if;
            if(count_w&gt;=0 and count_w&lt;=3)then w0&lt;=&#39;1&#39;;else w0&lt;=&#39;0&#39;;end if;
            if(count_w&gt;=4 and count_w&lt;=7)then w1&lt;=&#39;1&#39;;else w1&lt;=&#39;0&#39;;end if;
            if(count_w&gt;=8 and count_w&lt;=11)then w2&lt;=&#39;1&#39;;else w2&lt;=&#39;0&#39;;end if;
            if(count_w&gt;=12 and count_w&lt;=15)then w3&lt;=&#39;1&#39;;else w3&lt;=&#39;0&#39;;end if;
            if(count_w&lt;15)then count_w:=count_w+1;else count_w:=0;end if;
        end if;
    end if;
end process;

end Behavioral;
</code></pre>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity clock_tb is<br>    –  Port ( );<br>    end clock_tb;</p>
<pre><code>architecture Behavioral of clock_tb is
component clock
    Port(
        clk,rst:in std_logic;
        clk1,nclk1:out std_logic;   --clk
        clk2,nclk2:out std_logic;   --clk二分频
        w0,w1,w2,w3:out std_logic   --节拍信号
    );
end component;

signal clk,rst:std_logic;
signal clk1,nclk1:std_logic;   --clk
signal clk2,nclk2:std_logic;   --clk二分频
signal w0,w1,w2,w3:std_logic;  --节拍信号

begin
clock_inst:clock port map(clk,rst,clk1,nclk1,clk2,nclk2,w0,w1,w2,w3);

clock_gen:process
begin
    clk&lt;=&#39;0&#39;;
    wait for 10ns;
    clk&lt;=&#39;1&#39;;
    wait for 10ns;
end process;

reset_gen:process
begin
    rst&lt;=&#39;0&#39;;
    wait for 25ns;
    rst&lt;=&#39;1&#39;;
    wait;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/adec0f2295677479c7321988b4b0f166.png"></p>
<h3 id="7-线上实验——原码二位乘法器设计"><a href="#7-线上实验——原码二位乘法器设计" class="headerlink" title="7.线上实验——原码二位乘法器设计"></a>7.线上实验——原码二位乘法器设计</h3><p>请用硬件描述语言设计一个原码二位乘法器，其中两个操作数位宽为8，请给出仿真结果。</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/7bb5fc46ac6d878964e59ddeb1fe803c.png"></p>
<p>顶层——multiplier_2bit：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity multiplier_2bit is<br>        Port(<br>            clk,start:in std_logic;<br>            ain,bin:in std_logic_vector(7 downto 0);<br>            done:out std_logic;<br>            sout:inout std_logic_vector(15 downto 0)<br>        );<br>    end multiplier_2bit;</p>
<pre><code>architecture Behavioral of multiplier_2bit is

component multiplier_ctrl
    Port (
        clk,start:in std_logic;
        clkout,rstall,done:out std_logic
     );
end component;
component multiplier_8bitshiftreg
    Port (
        clk,load:in std_logic;
        din:in std_logic_vector(7 downto 0);
        qb0,qb1:out std_logic
     );
end component;
component multiplier_16bitreg
    Port (
        clk,clr:in std_logic;
        d:in std_logic_vector(8 downto 0);
        q:out std_logic_vector(15 downto 0)
     );
end component;
component multiplier_selector
    Port (
        clk,rst:in std_logic;
        a0,a1,cin:in std_logic;
        din:in std_logic_vector(7 downto 0);
        cout:out std_logic;
        dout:out std_logic_vector(7 downto 0)
     );
end component;
component multiplier_8bitadder
    Port (
        clk,rst:in std_logic;
        cin:in std_logic;
        ain,bin:in std_logic_vector(7 downto 0);
        sout:out std_logic_vector(8 downto 0)
     );
end component;

signal clk_line:std_logic;
signal rst_line:std_logic;
signal cin_line:std_logic;
signal qb1_line,qb0_line:std_logic;
signal bin_line:std_logic_vector(7 downto 0);
signal sout_line:std_logic_vector(8 downto 0);
signal test_line:std_logic_vector(8 downto 0);

begin
multiplier_ctrl_inst:multiplier_ctrl port map(clk=&gt;clk,start=&gt;start,clkout=&gt;clk_line,rstall=&gt;rst_line,done=&gt;done);
multiplier_8bitshiftreg_inst:multiplier_8bitshiftreg port map(clk=&gt;clk_line,load=&gt;rst_line,din=&gt;ain,qb0=&gt;qb0_line,qb1=&gt;qb1_line);
multiplier_16bitreg_inst:multiplier_16bitreg port map(clk=&gt;clk_line,clr=&gt;rst_line,d=&gt;sout_line,q=&gt;sout);
multiplier_selector_inst:multiplier_selector port map(clk=&gt;clk_line,rst=&gt;rst_line,a0=&gt;qb0_line,a1=&gt;qb1_line,cin=&gt;sout_line(8),din=&gt;bin,cout=&gt;cin_line,dout=&gt;bin_line);
multiplier_8bitadder_inst:multiplier_8bitadder port map(clk=&gt;clk_line,rst=&gt;rst_line,cin=&gt;cin_line,ain=&gt;sout(15 downto 8),bin=&gt;bin_line,sout=&gt;sout_line);

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8f30332a988566f33bab93454ab0c0ca.png"></p>
<p>testbench:</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity multiplier_2bit_tb is<br>    –  Port ( );<br>    end multiplier_2bit_tb;</p>
<pre><code>architecture Behavioral of multiplier_2bit_tb is
component multiplier_2bit
    Port(
        clk,start:in std_logic;
        ain,bin:in std_logic_vector(7 downto 0);
        done:out std_logic;
        sout:inout std_logic_vector(15 downto 0)
    );
end component;
signal clk,start: std_logic;
signal ain,bin: std_logic_vector(7 downto 0);
signal done: std_logic;
signal sout: std_logic_vector(15 downto 0);
begin
multiplier_2bit_inst:multiplier_2bit port map(clk,start,ain,bin,done,sout);

clock_gen:process
begin  
    clk&lt;=&#39;1&#39;;
    wait for 10ns;
    clk&lt;=&#39;0&#39;;
    wait for 10ns;
end process;

test:process
begin
    ain&lt;=&quot;10011010&quot;;
    bin&lt;=&quot;01100101&quot;;
    wait for 25ns;
    start&lt;=&#39;1&#39;;
    wait for 25ns;
    start&lt;=&#39;0&#39;;    
    wait for 150ns;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/559a1c00923a7cda00c06f63c6dec1cc.png"></p>
<p>模块：</p>
<p>multiplier_2bit_ctrl ：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_ctrl is<br>​        Port (<br>​            clk,start:in std_logic;<br>​            clkout,rstall,done:out std_logic<br>​         );<br>​    end multiplier_ctrl;<br>​<br>    architecture Behavioral of multiplier_ctrl is</p>
<pre><code>signal cnt3b:std_logic_vector(2 downto 0);

begin

process(clk,start)
begin
    rstall&lt;=start;
    if(start=&#39;1&#39;)then cnt3b&lt;=&quot;000&quot;;
    elsif clk&#39;event and clk=&#39;1&#39;then if cnt3b&lt;=4 then cnt3b&lt;=cnt3b+1;end if;
    end if;
end process;

process(clk,cnt3b,start)
begin
    if (start=&#39;1&#39;)then
        clkout&lt;=&#39;0&#39;;done&lt;=&#39;0&#39;; 
    elsif(start=&#39;0&#39;)then    
        if cnt3b&lt;=4 then clkout&lt;=clk;
        else clkout&lt;=&#39;0&#39;;done&lt;=&#39;1&#39;;
        end if; 
    end if;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/920cb7c013bd5af2e09bc59aafba028c.png"></p>
<p>multiplier_2bit_8bitshiftreg：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_8bitshiftreg is<br>​        Port (<br>​            clk,load:in std_logic;<br>​            din:in std_logic_vector(7 downto 0);<br>​            qb0,qb1:out std_logic<br>​         );<br>​    end multiplier_8bitshiftreg;<br>​<br>    architecture Behavioral of multiplier_8bitshiftreg is</p>
<pre><code>signal reg8b:std_logic_vector(7 downto 0);

begin

process(clk,load)
begin
    if load=&#39;1&#39;then reg8b&lt;=din;qb0&lt;=&#39;0&#39;;qb1&lt;=&#39;0&#39;;end if;
    if(load=&#39;0&#39;and clk=&#39;1&#39;)then 
        qb0&lt;=reg8b(0);
        qb1&lt;=reg8b(1);
        reg8b(5 downto 0)&lt;=reg8b(7 downto 2);
        reg8b(7 downto 6)&lt;=&quot;00&quot;;   
    end if;     
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d171f9dc0e6d54b72cf1ffe1f8c759ec.png"></p>
<p>multiplier_2bit_16bitreg：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_16bitreg is<br>​        Port (<br>​            clk,clr:in std_logic;<br>​            d:in std_logic_vector(8 downto 0);<br>​            q:out std_logic_vector(15 downto 0)<br>​         );<br>​    end multiplier_16bitreg;<br>​<br>    architecture Behavioral of multiplier_16bitreg is</p>
<pre><code>begin

process(clk,clr)
variable sr16b:std_logic_vector(15 downto 0);
begin
    if clr=&#39;1&#39;then
        sr16b:=&quot;0000000000000000&quot;;
    elsif(clr=&#39;0&#39;and clk&#39;event and clk=&#39;1&#39;)then  
        sr16b(15 downto 8):=d(7 downto 0);
        sr16b(13 downto 0):=sr16b(15 downto 2);
        sr16b(15):=d(8);
        sr16b(14):=d(8);
    end if;   
    q&lt;=sr16b;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/08847d6e576be1f9f61c68f8d15899b6.png"></p>
<p>multiplier_2bit_selector：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_selector is<br>​        Port (<br>​            clk,rst:in std_logic;<br>​            a0,a1,cin:in std_logic;<br>​            din:in std_logic_vector(7 downto 0);<br>​            cout:out std_logic;<br>​            dout:out std_logic_vector(7 downto 0)<br>​         );<br>​    end multiplier_selector;<br>​<br>    architecture Behavioral of multiplier_selector is</p>
<pre><code>begin

process(clk,a0,a1,cin,din)
begin
    if(rst=&#39;1&#39;)then cout&lt;=&#39;0&#39;;dout&lt;=&quot;00000000&quot;;
    elsif(rst=&#39;0&#39;and clk&#39;event and clk=&#39;0&#39;)then
        if(a0=a1 and a0=cin)then dout&lt;=&quot;00000000&quot;;cout&lt;=cin;
        elsif(a1=&#39;0&#39;and (a0 xor cin)=&#39;1&#39;)then dout&lt;=din;cout&lt;=&#39;0&#39;;
        elsif((a1 xor a0)=&#39;1&#39;and a0=cin)then
            dout(7 downto 1)&lt;=din(6 downto 0);  
            dout(0)&lt;=&#39;0&#39;;
            cout&lt;=&#39;0&#39;;
        elsif(a1=&#39;1&#39;and(a0 xor cin)=&#39;1&#39;)then
            dout&lt;=(not din)+1;
            cout&lt;=&#39;1&#39;;  
        end if;
    end if;    
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/e286d15abce298cf0b629350ba7e076e.png"></p>
<p>multiplier_2bit_8bitadder：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_8bitadder is<br>​        Port (<br>​            clk,rst:in std_logic;<br>​            cin:in std_logic;<br>​            ain,bin:in std_logic_vector(7 downto 0);<br>​            sout:out std_logic_vector(8 downto 0)<br>​         );<br>​    end multiplier_8bitadder;<br>​<br>    architecture Behavioral of multiplier_8bitadder is<br>    begin</p>
<pre><code>process(clk,rst,ain,bin,cin)
begin
    if(rst=&#39;1&#39;)then sout&lt;=&quot;000000000&quot;;
    elsif(rst=&#39;0&#39;and clk=&#39;0&#39;)then
        sout&lt;=(&#39;0&#39;&amp; ain)+(cin &amp; bin);
    end if;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/cdd818c3fea80ef3bef0a36c7c6ab446.png"></p>
<p><strong>设计注意点：</strong></p>
<p>0.设计顺序：控制器-8b移位寄存器-16位缓存器-选择器-加法器</p>
<p>1.输入位8位无符号数，若输入有符号数需修改位宽并另外计算符号位。</p>
<p>2.共用总线需注意时序，防止总线冲突以及数据读取错误</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b25fa007565503bdd4b69b5d6c31496d.png"></p>
<p>共用总线sout时序设计：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/daac7ca07dca672e89a3e831d4b8bd9a.png"></p>
<p>3.process内语句顺序执行的次序。</p>
<p>4.变量的使用：mulitiplier_16bitreg中</p>
<p>​<br>​    variable sr16b:std_logic_vector(15 downto 0);</p>
<p>若使用 signal sr16b，则 q&lt;&#x3D;sr16b; 无效</p>
<p>5.位拓展：</p>
<p>​<br>​    sout&lt;&#x3D;(‘0’&amp; ain)+(cin &amp; bin); </p>
<p>使用 &amp; 符拓展位宽</p>
<h3 id="8-线上实验——布斯乘法器设计"><a href="#8-线上实验——布斯乘法器设计" class="headerlink" title="8.线上实验——布斯乘法器设计"></a>8.线上实验——布斯乘法器设计</h3><p>采用硬件描述语言设计实现布斯乘法器，完成逻辑功能设计及仿真验证，并给出仿真结果。</p>
<p>按照7中的设计顺序对7中设计文件进行修改：</p>
<pre><code>    ctrl模块发出时钟周期数改为8；8bitshiftreg和16bitreg模块每个时钟周期移动1位，且8；8bitshiftreg输出的是a0和a-1；16bitreg和selector模块载入数值后求补；selector模块删去cin和cout信号并修改规则；adder无cin...
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8c09ab4e531a18f069ba4afb9e18d438.png"></p>
<p>顶层模块——multiplier_booth：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity multiplier_booth is<br>        Port(<br>            clk,start:in std_logic;<br>            ain,bin:in std_logic_vector(7 downto 0);<br>            done:out std_logic;<br>            sout:inout std_logic_vector(15 downto 0)<br>        );<br>    end multiplier_booth;</p>
<pre><code>architecture Behavioral of multiplier_booth is

component multiplier_booth_ctrl
    Port (
        clk,start:in std_logic;
        clkout,rstall,done:out std_logic
     );
end component;
component multiplier_booth_8bitshiftreg
    Port (
        clk,load:in std_logic;
        din:in std_logic_vector(7 downto 0);
        qb0,qb1:out std_logic
     );
end component;
component multiplier_booth_16bitreg
    Port (
        clk,clr:in std_logic;
        d:in std_logic_vector(8 downto 0);
        q:out std_logic_vector(15 downto 0)
     );
end component;
component multiplier_booth_selector
    Port (
        clk,rst:in std_logic;
        a0,a1:in std_logic;
        din:in std_logic_vector(7 downto 0);
        dout:out std_logic_vector(7 downto 0)
     );
end component;
component multiplier_booth_8bitadder
    Port (
        clk,rst:in std_logic;
        ain,bin:in std_logic_vector(7 downto 0);
        sout:out std_logic_vector(8 downto 0)
     );
end component;

signal clk_line:std_logic;
signal rst_line:std_logic;
signal qb1_line,qb0_line:std_logic;
signal bin_line:std_logic_vector(7 downto 0);
signal sout_line:std_logic_vector(8 downto 0);
signal test_line:std_logic_vector(8 downto 0);

begin
multiplier_booth_ctrl_inst:multiplier_booth_ctrl port map(clk=&gt;clk,start=&gt;start,clkout=&gt;clk_line,rstall=&gt;rst_line,done=&gt;done);
multiplier_booth_8bitshiftreg_inst:multiplier_booth_8bitshiftreg port map(clk=&gt;clk_line,load=&gt;rst_line,din=&gt;ain,qb0=&gt;qb0_line,qb1=&gt;qb1_line);
multiplier_booth_16bitreg_inst:multiplier_booth_16bitreg port map(clk=&gt;clk_line,clr=&gt;rst_line,d=&gt;sout_line,q=&gt;sout);
multiplier_booth_selector_inst:multiplier_booth_selector port map(clk=&gt;clk_line,rst=&gt;rst_line,a0=&gt;qb0_line,a1=&gt;qb1_line,din=&gt;bin,dout=&gt;bin_line);
multiplier_booth_8bitadder_inst:multiplier_booth_8bitadder port map(clk=&gt;clk_line,rst=&gt;rst_line,ain=&gt;sout(15 downto 8),bin=&gt;bin_line,sout=&gt;sout_line);

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d3e67513e1e27963a8e15f23f6a8cc7c.png"></p>
<p>testbench：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​<br>    entity multiplier_booth_tb is<br>    –  Port ( );<br>    end multiplier_booth_tb;</p>
<pre><code>architecture Behavioral of multiplier_booth_tb is
component multiplier_booth
    Port(
        clk,start:in std_logic;
        ain,bin:in std_logic_vector(7 downto 0);
        done:out std_logic;
        sout:inout std_logic_vector(15 downto 0)
    );
end component;
signal clk,start: std_logic;
signal ain,bin: std_logic_vector(7 downto 0);
signal done: std_logic;
signal sout: std_logic_vector(15 downto 0);
begin
multiplier_booth_inst:multiplier_booth port map(clk,start,ain,bin,done,sout);

clock_gen:process
begin  
    clk&lt;=&#39;1&#39;;
    wait for 10ns;
    clk&lt;=&#39;0&#39;;
    wait for 10ns;
end process;

test:process
begin
    ain&lt;=&quot;00000010&quot;;
    bin&lt;=&quot;10000010&quot;;
    wait for 25ns;
    start&lt;=&#39;1&#39;;
    wait for 25ns;
    start&lt;=&#39;0&#39;;    
    wait for 200ns;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4cd31e8dc5958ee6e4b4eedfd590f2fa.png"></p>
<p>模块：</p>
<p>multiplier_booth_ctrl：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_booth_ctrl is<br>​        Port (<br>​            clk,start:in std_logic;<br>​            clkout,rstall,done:out std_logic<br>​         );<br>​    end multiplier_booth_ctrl;<br>​<br>    architecture Behavioral of multiplier_booth_ctrl is</p>
<pre><code>signal cnt4b:std_logic_vector(3 downto 0);

begin

process(clk,start)
begin
    rstall&lt;=start;
    if(start=&#39;1&#39;)then cnt4b&lt;=&quot;0000&quot;;
    elsif clk&#39;event and clk=&#39;1&#39;then if cnt4b&lt;=8 then cnt4b&lt;=cnt4b+1;end if;
    end if;
end process;

process(clk,cnt4b,start)
begin
    if (start=&#39;1&#39;)then
        clkout&lt;=&#39;0&#39;;done&lt;=&#39;0&#39;; 
    elsif(start=&#39;0&#39;)then    
        if cnt4b&lt;=8 then clkout&lt;=clk;
        else clkout&lt;=&#39;0&#39;;done&lt;=&#39;1&#39;;
        end if; 
    end if;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/83c13baff1be05be6cda0e582d59099f.png"></p>
<p>multiplier_booth_8bitshiftreg：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_booth_8bitshiftreg is<br>​        Port (<br>​            clk,load:in std_logic;<br>​            din:in std_logic_vector(7 downto 0);<br>​            qb0,qb1:out std_logic<br>​         );<br>​    end multiplier_booth_8bitshiftreg;<br>​<br>    architecture Behavioral of multiplier_booth_8bitshiftreg is</p>
<pre><code>signal reg8b:std_logic_vector(8 downto 0);

begin

process(clk,load)
begin
    if load=&#39;1&#39;then 
        if(din(7)=&#39;1&#39;)then reg8b(8 downto 1)&lt;=(din(7)&amp;(not din(6 downto 0)))+1;else reg8b(8 downto 1)&lt;=din;end if;  --取补码
        reg8b(0)&lt;=&#39;0&#39;;
        qb0&lt;=&#39;0&#39;;qb1&lt;=&#39;0&#39;;
    end if;
    if(load=&#39;0&#39;and clk=&#39;1&#39;)then 
        qb0&lt;=reg8b(0);
        qb1&lt;=reg8b(1);
        reg8b(7 downto 0)&lt;=reg8b(8 downto 1);
        reg8b(8)&lt;=&#39;0&#39;;   
    end if;     
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/61bbc405e10beaea2c2635a94871b4cb.png"></p>
<p>multiplier_booth_16bitreg：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_booth_16bitreg is<br>​        Port (<br>​            clk,clr:in std_logic;<br>​            d:in std_logic_vector(8 downto 0);<br>​            q:out std_logic_vector(15 downto 0)<br>​         );<br>​    end multiplier_booth_16bitreg;<br>​<br>    architecture Behavioral of multiplier_booth_16bitreg is</p>
<pre><code>begin

process(clk,clr)
variable sr16b:std_logic_vector(15 downto 0);
begin
    if clr=&#39;1&#39;then
        sr16b:=&quot;0000000000000000&quot;;
    elsif(clr=&#39;0&#39;and clk&#39;event and clk=&#39;1&#39;)then  
        sr16b(15 downto 8):=d(7 downto 0);
        sr16b(14 downto 0):=sr16b(15 downto 1);
        sr16b(15):=d(8);    --移位复制符号位
    end if;   
    q&lt;=sr16b;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/78e8dae445e0aa8620fd29c657228abd.png"></p>
<p>multiplier_booth_selector：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_booth_selector is<br>​        Port (<br>​            clk,rst:in std_logic;<br>​            a0,a1:in std_logic;<br>​            din:in std_logic_vector(7 downto 0);<br>​            dout:out std_logic_vector(7 downto 0)<br>​         );<br>​    end multiplier_booth_selector;<br>​<br>    architecture Behavioral of multiplier_booth_selector is</p>
<pre><code>begin

process(clk,a0,a1,din)
variable complement_x:std_logic_vector(7 downto 0);
variable complement_x_negative:std_logic_vector(7 downto 0);
begin
    if(rst=&#39;1&#39;)then dout&lt;=&quot;00000000&quot;;
    elsif(rst=&#39;0&#39;and clk&#39;event and clk=&#39;0&#39;)then
        if(din(7)=&#39;1&#39;)then complement_x:=(din(7)&amp;(not din(6 downto 0)))+1;else complement_x:=din;end if;    --取X补码
        if((not din(7))=&#39;1&#39;)then complement_x_negative:=((not din(7))&amp;(not din(6 downto 0)))+1;else complement_x_negative:=(not din(7))&amp;din(6 downto 0);end if; --取-X补码
        if(a1=a0)then dout&lt;=&quot;00000000&quot;;
        elsif(a0=&#39;1&#39;and a1=&#39;0&#39;)then dout&lt;=complement_x;
        elsif(a0=&#39;0&#39;and a1=&#39;1&#39;)then dout&lt;=complement_x_negative;
        end if;
    end if;    
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/9597c2a19cccbc17358d377d0ee32df8.png"></p>
<p>multiplier_booth_8bitadder：</p>
<p>​<br>​    library IEEE;<br>​    use IEEE.STD_LOGIC_1164.ALL;<br>​    use IEEE.STD_LOGIC_UNSIGNED.ALL;<br>​    entity multiplier_booth_8bitadder is<br>​        Port (<br>​            clk,rst:in std_logic;<br>​            ain,bin:in std_logic_vector(7 downto 0);<br>​            sout:out std_logic_vector(8 downto 0)<br>​         );<br>​    end multiplier_booth_8bitadder;<br>​<br>    architecture Behavioral of multiplier_booth_8bitadder is<br>    begin</p>
<pre><code>process(clk,rst,ain,bin)
begin
    if(rst=&#39;1&#39;)then sout&lt;=&quot;000000000&quot;;
    elsif(rst=&#39;0&#39;and clk=&#39;0&#39;)then
        sout&lt;=(ain(7) &amp; ain)+(bin(7)  &amp; bin);   --符号位扩展加法
    end if;
end process;

end Behavioral;
</code></pre>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d7c983ed1ce45af2d329d820c088e9dd.png"></p>
<p><strong>设计注意点：</strong></p>
<p>1.求补码的方法：</p>
<p>​<br>​    if(din(7)&#x3D;’1’)then<br>​        reg8b(8 downto 1)&lt;&#x3D;(din(7)&amp;(not din(6 downto 0)))+1;<br>​    else reg8b(8 downto 1)&lt;&#x3D;din;<br>​    end if;<br>​    –取补码</p>
<p>2.求和时符号位拓展：</p>
<p>​<br>​    sout&lt;&#x3D;(ain(7) &amp; ain)+(bin(7)  &amp; bin);   –符号位扩展加法</p>
<p>本文转自 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32971095/article/details/137247923">https://blog.csdn.net/qq_32971095/article/details/137247923</a>，如有侵权，请联系删除。</p>

    </div>

    
    
    

    
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;"><i>&gt --------------- THE END -------------- &lt</i></div>
    
</div>
      </div>
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/fpga%E5%BC%80%E5%8F%91/" rel="tag"># fpga开发</a>
              <a href="/tags/%E4%BD%9C%E4%B8%9A%E8%A7%A3%E7%AD%94/" rel="tag"># 作业解答</a>
              <a href="/tags/vhdl/" rel="tag"># vhdl</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/03/29/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/FPGA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(50)%E2%80%94%E2%80%94Vitis%20AI/" rel="prev" title="Vitis AI——FPGA学习笔记">
      <i class="fa fa-chevron-left"></i> Vitis AI——FPGA学习笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/04/06/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E3%80%8A%E7%BE%8E%E4%B8%BD%E6%96%B0%E4%B8%96%E7%95%8C%E3%80%8B%E2%80%94%E2%80%94%E8%8B%B1%C2%B7%E8%B5%AB%E8%83%A5%E9%BB%8E/" rel="next" title="《美丽新世界》——英·赫胥黎">
      《美丽新世界》——英·赫胥黎 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80-VHDL%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A"><span class="nav-number">1.</span> <span class="nav-text">一.VHDL设计作业</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E4%BA%8E%E7%A1%AC%E4%BB%B6%E6%8F%8F%E8%BF%B0%E8%AF%AD%E8%A8%80%E7%9A%843-8%E8%AF%91%E7%A0%81%E5%99%A8%E9%80%BB%E8%BE%91%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.1.</span> <span class="nav-text">1.基于硬件描述语言的3-8译码器逻辑电路设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8%E4%BD%8D%E5%8F%8C%E5%90%91%E7%A7%BB%E4%BD%8D%E5%AF%84%E5%AD%98%E5%99%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.2.</span> <span class="nav-text">2.8位双向移位寄存器设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%9F%BA%E4%BA%8E%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA%E7%9A%84%E8%87%AA%E5%8A%A9%E5%94%AE%E7%A5%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.3.</span> <span class="nav-text">3.基于有限状态机的自助售票系统设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%8C%89%E9%94%AE%E6%B6%88%E6%8A%96%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.4.</span> <span class="nav-text">4.按键消抖电路设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%90%8C%E6%AD%A5%E7%8E%AF%E5%BD%A2FIFO%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.5.</span> <span class="nav-text">5.同步环形FIFO设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E6%97%B6%E9%92%9F%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.6.</span> <span class="nav-text">6.线上实验——时钟模块设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E5%8E%9F%E7%A0%81%E4%BA%8C%E4%BD%8D%E4%B9%98%E6%B3%95%E5%99%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.7.</span> <span class="nav-text">7.线上实验——原码二位乘法器设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E7%BA%BF%E4%B8%8A%E5%AE%9E%E9%AA%8C%E2%80%94%E2%80%94%E5%B8%83%E6%96%AF%E4%B9%98%E6%B3%95%E5%99%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.8.</span> <span class="nav-text">8.线上实验——布斯乘法器设计</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SWQ"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">SWQ</p>
  <div class="site-description" itemprop="description">舟遥遥以轻扬，风飘飘而吹衣</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">69</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xidianswq" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xidianswq" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/qq_32971095" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_32971095" rel="noopener" target="_blank"><i class="fa fa-link fa-fw"></i>CSDN</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://qm.qq.com/q/fJkfzkochO" title="QQ → https:&#x2F;&#x2F;qm.qq.com&#x2F;q&#x2F;fJkfzkochO" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
      <span class="links-of-author-item">
        <a href="/3209507800@qq.com" title="E-Mail → 3209507800@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/348651384" title="bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;348651384" rel="noopener" target="_blank"><i class="fa fa-tv fa-fw"></i>bilibili</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/profiles/76561199188319035/" title="Steam → https:&#x2F;&#x2F;steamcommunity.com&#x2F;profiles&#x2F;76561199188319035&#x2F;" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://c6.y.qq.com/base/fcgi-bin/u?__=sZVdegbNTeC3" title="Music → https:&#x2F;&#x2F;c6.y.qq.com&#x2F;base&#x2F;fcgi-bin&#x2F;u?__&#x3D;sZVdegbNTeC3" rel="noopener" target="_blank"><i class="fa fa-music fa-fw"></i>Music</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1309889000&auto=1&height=66"></iframe>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-8 ~ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SWQ</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">16:48</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  




  
<script src="/js/local-search.js"></script>













  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'H2FYHQwVGaUkawg5DkrA6d6M-gzGzoHsz',
      appKey     : 'zndS0u9Qj7qj8CqnJINs2MGT',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : 'https://h2fyhqwv.lc-cn-n1-shared.com'
    });
  }, window.Valine);
});
</script>


  <script async src="/js/cursor/fireworks.js"></script>


<!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><!-- hexo injector body_end end --></body>
</html>
